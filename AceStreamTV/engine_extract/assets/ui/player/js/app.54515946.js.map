{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/PlaylistSheet.vue?e356","webpack:///./src/components/ListSelector.vue?3ab5","webpack:///./src/components/TvPlaylist.vue?488f","webpack:///./src/components/FavoriteToggleButton.vue?8586","webpack:///./src/components/ResizeVideoMenu.vue?3b26","webpack:///./src/App.vue?6893","webpack:///./src/pages/PlayerScreen.vue?88d9","webpack:///./src/stores/main.js","webpack:///../../src/index.ts","webpack:///./src/pages/PlayerScreen.vue","webpack:///./src/common/src/plugins/focus.js","webpack:///./src/pages/player/video-size.js","webpack:///./src/lib/ad-player.js","webpack:///./src/lib/app.js","webpack:///./src/utils/logger.js","webpack:///./src/lib/AppNotificationManager.js","webpack:///./src/components/BufferingProgress.vue","webpack:///./src/components/BufferingProgress.vue?8f91","webpack:///./src/components/ControlButton.vue","webpack:///./src/common/src/components/TheButton.vue","webpack:///./src/common/src/components/TheButton.vue?cf71","webpack:///./src/common/src/components/TheButton.vue?36d4","webpack:///ControlButton.vue","webpack:///./src/components/ControlButton.vue?f4da","webpack:///./src/components/ControlButton.vue?28fc","webpack:///./src/components/FavoriteToggleButton.vue","webpack:///FavoriteToggleButton.vue","webpack:///./src/components/FavoriteToggleButton.vue?65f2","webpack:///./src/components/FavoriteToggleButton.vue?2ddf","webpack:///./src/components/ListSelector.vue","webpack:///./src/components/BottomSheet.vue","webpack:///BottomSheet.vue","webpack:///./src/components/BottomSheet.vue?c669","webpack:///./src/components/BottomSheet.vue?0de7","webpack:///ListSelector.vue","webpack:///./src/components/ListSelector.vue?2504","webpack:///./src/components/ListSelector.vue?7706","webpack:///./src/components/PlayerMenu.vue","webpack:///./src/common/src/components/SidePanel.vue","webpack:///SidePanel.vue","webpack:///./src/common/src/components/SidePanel.vue?9cf9","webpack:///./src/common/src/components/SidePanel.vue?ffef","webpack:///PlayerMenu.vue","webpack:///./src/components/PlayerMenu.vue?59d6","webpack:///./src/components/PlayerMenu.vue?4c8f","webpack:///./src/components/PlaylistSheet.vue","webpack:///./src/components/TvPlaylist.vue","webpack:///TvPlaylist.vue","webpack:///./src/components/TvPlaylist.vue?3150","webpack:///./src/components/TvPlaylist.vue?03e3","webpack:///PlaylistSheet.vue","webpack:///./src/components/PlaylistSheet.vue?20c6","webpack:///./src/components/PlaylistSheet.vue?7b2e","webpack:///./src/components/ResizeVideoMenu.vue","webpack:///ResizeVideoMenu.vue","webpack:///./src/components/ResizeVideoMenu.vue?817e","webpack:///./src/components/ResizeVideoMenu.vue?cfcc","webpack:///./src/components/ExternalPage.vue","webpack:///ExternalPage.vue","webpack:///./src/components/ExternalPage.vue?6848","webpack:///./src/components/ExternalPage.vue?e261","webpack:///./src/lib/ima-sdk-wrapper.js","webpack:///./src/lib/ima-sdk-ad-player.js","webpack:///PlayerScreen.vue","webpack:///./src/pages/PlayerScreen.vue?ea68","webpack:///./src/pages/PlayerScreen.vue?3953","webpack:///./src/routes.js","webpack:///./src/mock/utils.js","webpack:///./src/mock/states.js","webpack:///./src/lib/utils.js","webpack:///./src/App.vue","webpack:///./src/components/StatFrame.vue","webpack:///StatFrame.vue","webpack:///./src/components/StatFrame.vue?38d6","webpack:///./src/components/StatFrame.vue?7035","webpack:///App.vue","webpack:///./src/App.vue?9c7b","webpack:///./src/App.vue?315a","webpack:///./src/plugins/vuetify.js","webpack:///./src/plugins/vue-touch-events.js","webpack:///./src/main.js","webpack:///./src/components/ExternalPage.vue?6042","webpack:///./src/common/src/components/SidePanel.vue?5bac","webpack:///./src/components/ControlButton.vue?c800","webpack:///./src/components/StatFrame.vue?779e","webpack:///./src/components/BottomSheet.vue?9e8c","webpack:///./src/pages/PlayerScreen.vue?6fe9","webpack:///./src/components/PlayerMenu.vue?7d19","webpack:///./src/common/src/components/TheButton.vue?036b"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","jsonpScriptSrc","p","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","useMainStore","defineStore","state","frozen","appVersion","process","firstRenderReceived","playerState","config","overlayHideTimeoutDefault","overlayHideTimeoutTv","currentDialog","isPanelVisible","overlayVisible","canHideOverlay","hideOverlayFunc","getters","applicationId","applicationVersionCode","locale","hasBrowser","hasMarketApp","isTv","hasLocalPlayback","_state$playerState$lo","_state$playerState$lo2","local","playbackState","playlistState","prebuffering","skipping","startingLocalPlayback","hasAcecastPlayback","acecast","hasChromecastPlayback","chromecast","dialogVisible","overlayHideTimeout","actions","setState","newState","this","freezeState","unfreezeState","waitState","watch","cancelDialog","cancel","hideOverlay","log","VideoPlayer","registerPlugin","web","then","VideoPlayerWeb","staticClass","class","directives","rawName","playingAds","_setup","_c","loadingAds","BufferingProgress","attrs","_vm","_v","engineStatus","onTouchStart","onTouchMove","onTouchEnd","isOverlayVisible","swipeHintVisible","on","$event","currentTarget","preventDefault","stopPropagation","ref","style","swipeHintOkContainerStyle","DEVELOPER_MODE","staticStyle","overlayMessage","domProps","homeButtonVisible","ControlButton","goHome","_s","speedDown","togglePiP","showResolver","showMenu","isLocalPlayback","mediaTitleClass","mediaTitle","gotEngineSession","canAddToFavorites","favoriteUri","isLocked","isFavorite","toggleFavorite","canChangeVolume","onVolumeUpdate","isFastSeekEnabled","showBox","isPlaying","isIdle","onSliderEnd","liveProgress","goLive","isAudio","selectSpuTrack","showSimpleControls","click","stopEngineSession","lockScreen","showPlaylist","hasPlaylist","enabled","preventFocus","expression","skipPrev","$t","skipNext","resizeVideo","formatTime","displayTime","showingInformation","toggleInformation","focusElementSelector","onclick","progressKey","progressValue","onSliderChange","onSliderBlur","onResizeVideoLongPress","isPlayingOrPaused","dialog","closeDialog","playbackSpeed","spuTracks","streams","_setup$currentStream","onSpuTrackSelected","hasNotch","setVideoSize","m3uPlaylist","onPlaylistItemSelected","swipeFeedbackVisible","transform","swipeFeedbackDirection","opacity","swipeProgress","externalPageUrl","closeExternalPage","staticRenderFns","VERBOSE","navigationService","verbose","args","FocusPlugin","install","Vue","options","NavigationService","directive","el","binding","vnode","_binding$value","id","focusElement","FocusElement","registerElement","addEventListener","inserted","findById","isDefault","focus","focused","update","oldValue","oldEl","unregisterElement","newEl","setEnabled","unbind","constructor","_defineProperty","navigationMap","defaultFocusElements","restoreFocusInterval","started","active","paused","restoreTimer","elements","unwatchFocusedElement","longPressTimer","longPressDelay","longPressDetected","configure","focusedElementId","13","38","40","37","39","assign","defaults","navigationMapFunc","defaultFocusElementFunc","watchFocusedElement","start","initKeyboardListener","initBackwardHandler","pause","resume","isPaused","setActive","restoreFocus","_stopRestoreTimer","foundFocusedElement","startTimer","focusCandidates","element","canFocus","_startRestoreTimer","createEmptyHistory","history","pushState","location","pathname","keyCode","getKeyCode","isEnter","performAction","action","keycode","which","immediate","index","indexOf","els","destroy","unregisterElementById","setFocusedById","onFocused","updateState","foundFocused","findFocusedElement","focusedElement","blurAll","blur","refocusInterval","destroyed","dataset","focusDefault","next","up","focusUp","down","focusDown","left","focusLeft","right","focusRight","onLongPress","nextFunc","querySelector","disabled","classList","add","_this$el","activeElement","remove","clickEvent","Event","dispatchEvent","longPress","getNextElement","direction","_map$id","_map","nextId","nextDirection","nextAction","move","_target","targetId","moveDown","moveUp","moveLeft","moveRight","getVideoSizeName","$i18n","size","VideoSize","SURFACE_BEST_FIT","SURFACE_FIT_SCREEN","SURFACE_FILL","SURFACE_16_9","SURFACE_4_3","SURFACE_16_10","SURFACE_2_1","SURFACE_221_1","SURFACE_235_1","SURFACE_239_1","SURFACE_5_4","SURFACE_ORIGINAL","async","init","playerContainer","adContainer","ima","loadImaSdk","adsRenderingSettings","google","AdsRenderingSettings","playerOptions","PlayerOptions","imaPlayer","Player","settings","setVpaidMode","ImaSdkSettings","VpaidMode","INSECURE","setNumRedirects","MAX_TRIES","getHost","count","check","acestreamAppHost","AceStreamApp","packageName","host","isAppInstalled","category","startActivity","url","openBrowser","packageId","installFromMarket","LOG_ERROR","LOG_VERBOSE","LOG_LEVEL","level","tag","msg","vars","full","varList","JSON","stringify","join","method","logerror","logverbose","TAG","AppNotificationManager","_classStaticPrivateFieldSpecGet","_instance","_classStaticPrivateFieldSpecSet","placement","hasPremium","isLive","adsShown","list","getFromBackend","chooseOne","domains","domain","getFromBackendImpl","mainStore","params","appId","a","response","axios","notifications","notification","shouldShow","shouldShowUnsafe","conditions","checkConditions","or","condition","checkSingleCondition","and","registerNotificationImpression","where","sendEvent","registerNotificationClick","urls","getEventUrls","events","requestUrl","replace","catch","_events$impression","_events$click","impression","writable","_self","component","TheButton","withBackground","iconSize","$attrs","selected","blue","ICON_SIZE_RATIO","buttonSize","computed","props","Math","round","buttonColor","render","_setupProxy","emit","width","height","BottomSheet","scopedSlots","slot","animationDuration","rounded","bodyVisible","title","_e","_l","items","item","_t","itemSelected","currentMenu","menuItemClicked","icon","$listeners","showOverlay","showContent","itemsContainerOffset","getItemId","onItemClicked","focusedItem","onFocus","DEFAULT_OFFSET","onKeyDown","code","onBackPressed","bindEvents","unbindEvents","removeEventListener","setDefaulFocus","getSelectedItemIndex","selectedItemId","findIndex","scrollOnFocus","offsetTop","onMounted","onBeforeUnmount","watchItems","nextTick","getCurrentInstance","proxy","delayModel","audioDelay","defaultValue","step","spuDelay","selectedMenu","currentAudioTrackName","selectedAudioTrack","track","audioTracks","find","currentSpuTrackName","selectedSpuTrack","currentStreamName","stream","selectedStream","currentPlaybackSpeedName","currentAudioDelayName","currentSpuDelayName","topMenu","hasSubmenu","currentValue","visible","menus","selectedItem","setRate","parseFloat","map","setAudioDelay","parseInt","setSpuDelay","menu","filter","_currentMenu$value","rate","displayDelay","decreaseDelay","updateDelay","increaseDelay","factor","newValue","setDelay","resetDelay","TvPlaylist","playlist","$emit","_g","_b","_u","fn","position","SEARCH_CLEAR_ID","searchQuery","SEARCH_INPUT_ID","filteredItems","onItemClick","containerRef","headerRef","inputRef","baseItems","uri","q","trim","toLowerCase","includes","itemId","getFocusUpId","getFocusDownId","onItemFocus","_headerRef$value","container","headerHeight","offsetHeight","itemTop","itemHeight","containerHeight","clientHeight","visibleHeight","max","targetScrollTop","maxScrollTop","scrollHeight","clampedScrollTop","min","scrollTo","top","behavior","onSearchFocus","focusSearchInput","_inputRef$value","_navigationService$fi","ensureOverlayFocus","first","firstFocus","inputFocus","clearFocus","onSearchBlur","onSearchKeyDown","_inputRef$value2","_navigationService$fi2","_navigationService$fi3","clearSearch","_inputRef$value3","setDefaultFocus","visibleIndex","it","focusEl","_navigationService$fi4","scrollIntoView","displayUnderNotch","currentVideoSize","menuItems","values","videoSize","unshift","iframeRef","targetOrigin","urlObject","URL","origin","frameEventListener","close","keyboardEventListener","sendFrameMessage","contentWindow","postMessage","listeners","adsManagers","STATE","videoElement","adDisplayContainer","sizeReferenceContainer","adsLoader","adsManager","imaInitialized","hideLoader","loader","getElementById","display","notifyRequestCompleted","requestId","fireEvent","notifyRequestFailed","errorMessage","notifyEvent","eventName","_STATE$activity","activity","_STATE$activity2","notifyError","initializeIMA","videoPlayerElement","adContainerElement","AdDisplayContainer","AdsLoader","getSettings","setAutoPlayAdBreaks","initialize","AdsManagerLoadedEvent","Type","ADS_MANAGER_LOADED","onAdsManagerLoaded","AdErrorEvent","AD_ERROR","onAdLoaderError","setupImaSdkEventListeners","onAdManagerError","STARTED","AdEvent","IMPRESSION","PAUSED","RESUMED","COMPLETE","USER_CLOSE","LOADED","ALL_ADS_COMPLETED","AD_BREAK_FETCH_ERROR","AD_BREAK_READY","LOG","SKIPPED","CONTENT_PAUSE_REQUESTED","CONTENT_RESUME_REQUESTED","eventId","entries","adsManagerLoadedEvent","context","getUserRequestContext","getAdsManager","adErrorEvent","getError","removeAdManager","requestAds","adTagUrl","vastLoadTimeout","adsRequest","AdsRequest","initAdsManager","_sizeReferenceContain","_sizeReferenceContain2","clientWidth","innerWidth","innerHeight","ViewMode","NORMAL","adError","startAdsManager","addListener","listener","sizeReferenceContainerElement","_sizeReferenceContain3","_sizeReferenceContain4","resize","removeAllAdManagers","manager","ImaSdkWrapper","USE_OFFSET_TO_HIDE_PLAYER","AD_REQUEST_SAFE_TIMEOUT","AD_START_SAFE_TIMEOUT","AD_FINISH_SAFE_TIMEOUT","STATUS_PENDING","STATUS_SUCCESS","STATUS_FAILED","EVENT_ALL_ADS_COMPLETED","EVENT_AD_BREAK_FETCH_ERROR","EVENT_COMPLETED","EVENT_AD_BREAK_READY","EVENT_SKIPPED","EVENT_STARTED","EVENT_LOADED","eventIdFromName","ImaSdkAdPlayer","videoPlayer","inAppMode","verboseEnabled","lastRequestId","requests","currentRequest","lastRequestStartedAt","reset","initWrapper","onRequestCompleted","onRequestFailed","errorCode","onAdEvent","onAdError","newRequest","status","preload","adsReady","countStartedAds","finishedCallback","requestCompleted","adStarted","adFinished","requestCompletedTimer","adStartedTimer","adFinishedTimer","logRequestStarted","Date","now","logNoAds","time","sendAnalyticsEvent","logGotAds","tags","maxAds","vmap","clearRequests","setPlayingAds","showAdsContainer","failed","hideAdsContainer","notifyAdsReady","validateRequest","startIfAllCompleted","startAdFinishedSafeTimer","notifyAdFinished","finished","startNextAd","nextRequestId","isValidRequestId","startAd","onImaSdkStuck","allCompleted","firstSuccessful","dumpRequests","success","arguments","resumeContent","resumePlayback","eventObject","imaSdkRequestAds","imaSdkAdsManagerStart","imaSdkAdsManagerInit","imaSdkRemoveAllAdsManagers","imaSdkAdsContainerShow","useOffset","imaSdkAdsContainerHide","$router","$root","screenOrientation","useScreenOrientation","isLandscapeOrientation","orientation","startsWith","isLandscapeMode","DialogType","AUDIO_TRACK","SPU_TRACK","PLAYLIST","STREAM","MENU","VIDEO_SIZE","PlaybackState","NONE","STOPPED","PLAYING","BUFFERING","ERROR","TARGET_IDLE","TARGET_LOCAL","TARGET_ACECAST","TARGET_CHROMECAST","VLC_EVENT_BUFFERING","VLC_EVENT_PLAYING","VLC_EVENT_PAUSED","VLC_EVENT_STOPPED","VLC_EVENT_END_REACHED","VLC_EVENT_ERROR","MAX_ADS","AD_TRANSPORT_IMA_SDK_WEBVIEW","AD_TRANSPORT_IMA_SDK_APP","AD_TRANSPORT_WEB","adPlayer","midrollTags","midrollVmapMode","canRequestAdsDeferred","MODE_NONE","MODE_IDLE","MODE_LOCAL","MODE_ACECAST","MODE_CHROMECAST","centerBox","playbackMode","draggingProgress","draggingValue","freezeProgress","onScreenMessage","playerBuffering","unlockButtonVisible","playPauseAnimationIcon","playPauseAnimation","playPauseAnimationVisible","showOverlayWhenNotPlaying","draggingVolume","freezeVolume","volume","activityPaused","externalPageVisible","skipProgressClick","m3uPlaylistState","m3uPlaylistItems","renderingDisabled","swipeFeedbackItem","touchStartTime","touchStartY","touchStartX","overlayShowTimer","swipeDetected","swipeInProgress","currentTouchY","swipeOffset","swipeTriggered","screenHeight","swipeHintShown","swipeHintDownArrowEl","swipeHintOkButtonEl","swipeHintOkMidY","SWIPE_MOVEMENT_THRESHOLD","SWIPE_TRIGGER_THRESHOLD","SWIPE_ARROW_SPEED_RATIO","SWIPE_HINT_STORAGE_KEY","SWIPE_HINT_DISMISS_BY_TAP","isSliderDisabled","isDialogVisible","_mainStore$playerStat","_mainStore$playerStat2","currentDisplayUnderNotch","_mainStore$playerStat3","showControls","isInPiP","displayProgress","displayVolume","_currentStream$value","currentAudioTrack","onselected","onAudioTrackSelected","currentSpuTrack","currentStream","onStreamSelected","isVod","isChromecastPlayback","isTaskRoot","_mainStore$playerStat4","hasPip","_mainStore$playerStat5","isVideo","isAceCastPlayback","hasM3uPlaylist","localInternalPlaylistState","remote","remoteInternalPlaylistState","_state$playlistState","_state$playlistState2","_state$playlistState3","_state$playlistState4","mediaItem","createdAt","_playlist$value","_playerState$value","_playerState$value2","locked","isMuted","_playerState$value3","muted","_mainStore$playerStat6","_playerState$value4","_playerState$value5","_playerState$value6","audioTrack","_playerState$value7","spuTrack","hasStreams","_streams$value","hasAudioTracks","_audioTracks$value","hasSpuTracks","_spuTracks$value","_mediaItem$value","_mediaItem$value2","_mediaItem$value3","_mediaItem$value4","videoDisabled","_mediaItem$value5","live","_mediaItem$value6","isP2P","_mediaItem$value7","p2p","_mediaItem$value8","hasFileExtension","test","segments","split","lastSegment","_mediaTitle$value$len","_mediaTitle$value","len","_playlist$value2","_m3uPlaylistState$val","hasNext","_playlist$value3","hasPrev","_playlist$value4","_playerState$value8","_playerState$value9","_playerState$value10","canTogglePip","isLocalMediaFile","_mediaItem$value9","favoriteTitleRaw","_mediaItem$value10","canUseFavoritesBridge","addFavorite","removeFavorite","refreshFavoriteState","_playlist$value5","_playlist$value6","canSwipePlaylist","canSwipe","canUseSwipe","contentTypeIcon","_mediaItem$value11","_mediaItem$value12","mime","_playerState$value$en","_playerState$value$en2","currentIndex","currentStreamIndex","outputFormat","engineSession","playbackData","format","_playerState$value$en3","engineStatusMessage","progress","gotPreloaderImage","isPrebuffering","prebufferingProgress","backdropUrl","_playerState$value11","path","movieMetadata","backdropPath","preloaderImageUrl","_playerState$value12","imdbId","isPlayerBuffering","_playlist$value7","_playerState$value$en4","livePos","duration","lastTimestamp","firstTimestamp","pieces","last","offset","pos","displayLiveProgress","_liveProgress$value","progressMax","progressStep","displayDuration","_playerState$value13","hasVolume","isOurPlayer","_playerState$value$de","device","selectedPlayer","overlayHideTimer","freezeProgressTimer","onScreenTimer","freezeVolumeTimer","setVolumeTimer","unlockButtonTimer","playPauseAnimationTimer","imaSdkAdPlayer","onActivityPause","onActivityResume","play","onBackButton","canGoBack","onclose","showMainActivity","closePlayer","currentRoute","back","showInterstitial","adShown","callback","startIfPreloaded","CapacitorApp","exitApp","getVastTagsFromEvent","vastTagsJson","vastTagsRequested","vastTags","mediaItemState","parse","requestVideoAds","infohash","forceAds","debugOptions","deferred","res","rej","listenP2PSession","showFullscreenNotificationIfNeeded","tokena","_playerState$value14","interstitialAge","lastInterstitialAge","requestMidrollAds","canRequestAds","showAds","getInstance","openExternalPage","_canRequestAdsDeferre","initImaSdkAdPlayer","showPlayPauseAnimation","showVideoSizeInfo","showInfo","togglePause","setTarget","playMidrollAds","_mediaItem$value13","shouldUseVmap","_midrollTags","showAdUi","hideAdUi","stop","stopPlayer","m3uPlaylistNext","m3uPlaylistPrev","prev","restart","setDisplayUnderNotch","hideSystemStatusBar","showSystemStatusBar","openDialog","seekBy","newTime","seekTo","sign","displayValue","abs","unlockScreen","forceShowSystemBar","showUnlockButton","hideOverlayDelayed","command","playerRoot","ratio","devicePixelRatio","bottom","rules","itemsState","needFocus","force","isInteractiveElement","body","_element$classList","_element$classList2","_element$classList3","_element$classList4","_element$closest","_element","_element$closest2","_element2","_element$classList5","tagName","contains","getAttribute","closest","clickableParent","parentElement","toggleAudioMode","switchToVideo","switchToAudio","touches","clientY","clientX","currentY","currentX","deltaY","deltaX","distanceY","distanceX","isSwipeDown","threshold","targetIndex","targetItem","getPrevIndex","getNextIndex","showSwipeFeedback","_event$changedTouches","touch","changedTouches","elementFromPoint","onSwipeDown","onSwipeUp","hideSwipeFeedback","_event$changedTouches2","dismissSwipeHint","updateSwipeHintOkPosition","arrowEl","okEl","arrowRect","getBoundingClientRect","okRect","viewportHeight","documentElement","arrowBottom","mid","margin","halfBtn","minY","maxY","_m3uPlaylistState$val2","_m3uPlaylistState$val3","currentPos","ALLOW_WRAP","_m3uPlaylistState$val4","_m3uPlaylistState$val5","onKeyUp","playbackModeFromState","store","selectAudioTrack","setAudioTrack","trackId","dialogType","onDialogOpened","onDialogClosed","setSpuTrack","toggleSubtitles","newTrack","showNativeTvPlaylist","showM3uPlaylist","m3uPlaylistPlayIndex","playIndex","selectStream","switchStream","streamType","onProgressClick","applyProgressChange","onSliderStart","_playerState$value$en5","skipSeek","percentToCurrent","percentToLive","liveSeek","freezeFor","onSliderInput","showSeekInfo","targetValue","delta","forceRender","forceSliderRender","forceSliderReset","setVolume","onVolumeSliderStart","onVolumeSliderEnd","toggleMute","mute","prefix","floor","hours","minutes","seconds","toString","padStart","fixBoxSize","setPlaybackMode","remoteControl","updateScreenOrientation","watchPlaybackMode","newPlaybackMode","forceModeUpdate","initSwipeHint","playing","localStorage","setItem","enterAdsMode","leaveAdsMode","parseTagParams","searchParams","paramMap","transport","keys","isNaN","replaceMacros","macros","macroId","macroValue","newTags","showAdsImaSdk","showAdsInline","showAdsWeb","currentTagIndex","startedAds","playNextAd","playAdsRequest","playAds","initAds","detail","useVmap","getItem","appInfo","getInfo","routes","PlayerScreen","shouldInstallMock","href","playlistSize","baseState","poster","videoTracks","baseLocalState","baseAcecastState","engineStatusDownloading","peers","speedUp","engineStatusPrebuffering","playingLocalState","pausedLocalState","detectTouchScreen","hasTouchScreen","navigator","maxTouchPoints","msMaxTouchPoints","_matchMedia","mQ","matchMedia","media","matches","UA","userAgent","inject","crossorigin","background","$vuetify","theme","frames","hostname","__default__","dark","statFrameVisible","use","Vuetify","themes","primary","colors","grey","lighten5","Vue2TouchEvents","productionTip","PiniaVuePlugin","pinia","createPinia","VueI18n","numberFormats","en","currency","notation","decimal","minimumFractionDigits","maximumFractionDigits","i18n","messages","enMessages","ru","ruMessages","es","esMessages","VueRouter","router","loadInitialState","getState","initAdManager","vuetify","h","App","$mount","MockStates","backgroundColor"],"mappings":"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","file":"js/app.54515946.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-2d0cf116\":\"53575d14\",\"chunk-2d208e4e\":\"f66fce84\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaylistSheet.vue?vue&type=style&index=0&id=2b2549a2&prod&scoped=true&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListSelector.vue?vue&type=style&index=0&id=61a1b832&prod&scoped=true&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TvPlaylist.vue?vue&type=style&index=0&id=9f381968&prod&scoped=true&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FavoriteToggleButton.vue?vue&type=style&index=0&id=6d47d050&prod&scoped=true&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResizeVideoMenu.vue?vue&type=style&index=0&id=1dca102b&prod&scoped=true&lang=scss&\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=58912e44&prod&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerScreen.vue?vue&type=style&index=1&id=cb70d34a&prod&scoped=true&lang=scss&\"","import { defineStore } from \"pinia\";\nimport { watch } from \"vue\";\n\nexport const useMainStore = defineStore(\"main\", {\n  state: () => {\n    return {\n      frozen: false,\n      appVersion: process.env.VUE_APP_VERSION,\n      firstRenderReceived: false,\n      playerState: {},\n      config: {\n        overlayHideTimeoutDefault: 5000,\n        overlayHideTimeoutTv: 5000,\n      },\n      currentDialog: null,\n      isPanelVisible: false,\n\n      //TODO: implement\n      overlayVisible: false,\n      canHideOverlay: false,\n      hideOverlayFunc: null,\n    };\n  },\n  getters: {\n    applicationId: (state) => state.playerState.applicationId,\n    applicationVersionCode: (state) => state.playerState.applicationVersionCode,\n    locale: (state) => state.playerState.locale,\n    hasBrowser: (state) => state.playerState.hasBrowser,\n    hasMarketApp: (state) => state.playerState.hasMarketApp,\n    isTv: (state) => state.playerState.isTv,\n\n    hasLocalPlayback: (state) =>\n      state.playerState.local &&\n      (state.playerState.local.playbackState != 0\n        || state.playerState.local.playlistState?.prebuffering\n        || state.playerState.local.playlistState?.skipping\n        || state.playerState.local.startingLocalPlayback\n        ),\n    hasAcecastPlayback: (state) => !!state.playerState.acecast,\n    hasChromecastPlayback: (state) => !!state.playerState.chromecast,\n    dialogVisible: (state) => !!state.currentDialog,\n    overlayHideTimeout: (state) =>\n      state.isTv\n        ? state.config.overlayHideTimeoutTv\n        : state.config.overlayHideTimeoutDefault,\n  },\n  actions: {\n    setState(newState) {\n      if (!this.frozen) {\n        this.playerState = newState;\n      }\n    },\n    freezeState() {\n      this.frozen = true;\n    },\n    unfreezeState() {\n      this.frozen = false;\n    },\n    waitState() {\n      return new Promise((resolve) => {\n        if (this.firstRenderReceived) {\n          resolve();\n        } else {\n          watch(\n            () => this.firstRenderReceived,\n            () => {\n              if (this.firstRenderReceived) {\n                resolve();\n              }\n            }\n          );\n        }\n      });\n    },\n    cancelDialog() {\n      if (this.currentDialog) {\n        this.currentDialog.cancel();\n        this.currentDialog = null;\n      }\n    },\n    hideOverlay() {\n      //TODO: implement\n      console.log(`hideOverlay: canHide=${this.canHideOverlay}`);\n      if (this.overlayVisible && this.canHideOverlay) {\n        this.hideOverlayFunc();\n      }\n    },\n  },\n});\n","import { registerPlugin } from '@capacitor/core';\n\nimport type { VideoPlayerPlugin } from './definitions';\n\nconst VideoPlayer = registerPlugin<VideoPlayerPlugin>(\n  'VideoPlayer',\n  {\n    web: () => import('./web').then(m => new m.VideoPlayerWeb()),\n  },\n);\n\nexport * from './definitions';\nexport { VideoPlayer };\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"player-root\",class:{\n    'is-tv': _setup.isTv,\n    'mode-portrait': !_setup.isLandscapeMode,\n    'mode-landscape': _setup.isLandscapeMode,\n  }},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_setup.playingAds),expression:\"playingAds\"}],staticClass:\"ad-player-container\",class:{\n      'is-tv': _setup.isTv,\n      'mode-portrait': !_setup.isLandscapeMode,\n      'mode-landscape': _setup.isLandscapeMode,\n      'orientation-portrait': !_setup.isLandscapeOrientation,\n      'orientation-landscape': _setup.isLandscapeOrientation,\n    }},[_c('video',{staticClass:\"video-player\",class:{ 'as-visible': _setup.playingAds }}),_c('div',{staticClass:\"ad-container\"}),(_setup.loadingAds)?_c('div',{staticClass:\"ad-loading-progress-container\"},[_c(_setup.BufferingProgress)],1):_vm._e()]),(_setup.isInPiP && (_setup.isPrebuffering || _setup.isPlayerBuffering))?_c('v-container',{staticClass:\"page-container fill-height pip-container\"},[_c('div',{staticClass:\"progress-container\"},[_c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"color\":\"primary\",\"size\":\"24\",\"width\":\"1\"}})],1),(_setup.gotEngineSession && _setup.isPrebuffering)?_c('div',{staticClass:\"p2p-info-container\"},[_c('div',{staticClass:\"p2p-info-item\"},[_vm._v(\"Helping: \"+_vm._s(_setup.engineStatus.peers))]),_c('div',{staticClass:\"p2p-info-item\"},[_vm._v(\"DL: \"+_vm._s(_setup.engineStatus.speedDown))]),_c('div',{staticClass:\"p2p-info-item\"},[_vm._v(\"UL: \"+_vm._s(_setup.engineStatus.speedUp))])]):_vm._e()]):_vm._e(),(_setup.showControls)?_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_setup.playingAds),expression:\"!playingAds\"}],staticClass:\"fill-height player-screen\",class:{\n      'developer-mode': _setup.DEVELOPER_MODE,\n      'is-tv': _setup.isTv,\n      'mode-portrait': !_setup.isLandscapeMode,\n      'mode-landscape': _setup.isLandscapeMode,\n      'orientation-portrait': !_setup.isLandscapeOrientation,\n      'orientation-landscape': _setup.isLandscapeOrientation,\n    },on:{\"touchstart\":_setup.onTouchStart,\"touchmove\":_setup.onTouchMove,\"touchend\":_setup.onTouchEnd}},[(!_setup.isLocalPlayback)?_c('div',{staticClass:\"solid-background-image\"}):_vm._e(),(_setup.isOverlayVisible)?_c('div',{staticClass:\"solid-background-overlay\"}):_vm._e(),(_setup.swipeHintVisible)?_c('div',{staticClass:\"swipe-hint-overlay\",on:{\"click\":function($event){if($event.target !== $event.currentTarget)return null;$event.preventDefault();$event.stopPropagation();},\"touchstart\":function($event){if($event.target !== $event.currentTarget)return null;$event.preventDefault();$event.stopPropagation();},\"touchmove\":function($event){if($event.target !== $event.currentTarget)return null;$event.preventDefault();$event.stopPropagation();},\"touchend\":function($event){if($event.target !== $event.currentTarget)return null;$event.preventDefault();$event.stopPropagation();}}},[_c('div',{staticClass:\"swipe-hint-content\"},[_c('div',{staticClass:\"swipe-hint-arrow swipe-hint-arrow-up\"},[_c('svg',{attrs:{\"width\":\"64\",\"height\":\"64\",\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":\"M7 14L12 9L17 14\",\"stroke\":\"currentColor\",\"stroke-width\":\"0.5\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}})])]),_c('div',{staticClass:\"swipe-hint-text\"},[_vm._v(_vm._s(_vm.$t('swipe_hint')))]),_c('div',{ref:\"swipeHintDownArrowEl\",staticClass:\"swipe-hint-arrow swipe-hint-arrow-down\"},[_c('svg',{attrs:{\"width\":\"64\",\"height\":\"64\",\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":\"M7 10L12 15L17 10\",\"stroke\":\"currentColor\",\"stroke-width\":\"0.5\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}})])])]),_c('div',{staticClass:\"swipe-hint-ok-container\",style:(_setup.swipeHintOkContainerStyle)},[_c('div',{ref:\"swipeHintOkButtonEl\",staticClass:\"swipe-hint-ok-button\",on:{\"click\":function($event){$event.stopPropagation();return _setup.dismissSwipeHint.apply(null, arguments)}}},[_vm._v(\" OK \")])])]):_vm._e(),(_setup.backdropUrl && !_setup.isPlayingOrPaused)?_c('div',{staticClass:\"poster\",style:(`background-image: url(${_setup.backdropUrl})`)},[_c('div',{staticClass:\"poster-overlay\"})]):_vm._e(),(_setup.isPrebuffering && _setup.gotPreloaderImage)?_c('div',{staticClass:\"preloader-image\"},[_c('img',{staticClass:\"image-background\",attrs:{\"src\":_setup.preloaderImageUrl}}),_c('div',{staticClass:\"image-foreground-container\",style:(`width: ${_setup.prebufferingProgress}%`)},[_c('img',{staticClass:\"image-foreground\",attrs:{\"src\":_setup.preloaderImageUrl}})])]):_vm._e(),(_setup.DEVELOPER_MODE)?_c('div',{staticStyle:{\"position\":\"absolute\",\"top\":\"0\",\"left\":\"0\",\"margin-top\":\"64px\",\"font-size\":\"12px\"}},[_vm._v(\" hasPlaylist: \"+_vm._s(_setup.hasPlaylist)+\" \"),_c('br'),_vm._v(\" hasM3uPlaylist: \"+_vm._s(_setup.hasM3uPlaylist)+\" \"),_c('br'),_vm._v(\" m3uPlaylistState: \"+_vm._s(Object.keys(_setup.m3uPlaylistState))+\" \"),_c('br'),_vm._v(\" playlist: \"+_vm._s(Object.keys(_setup.playlist))+\" \"),_c('br'),_vm._v(\" \"+_vm._s(_setup.gotEngineSession ? \"yes\" : \"no\")+\" \"),_c('br'),_vm._v(\" local: \"+_vm._s(_setup.mainStore.hasLocalPlayback)+\" acecast: \"+_vm._s(_setup.mainStore.hasAcecastPlayback)+\" chromecast: \"+_vm._s(_setup.mainStore.hasChromecastPlayback)+\" \"),_c('br'),_vm._v(\" isLocalPlayback: \"+_vm._s(_setup.isLocalPlayback)+\" \"),_c('br'),_vm._v(\" isIdle: \"+_vm._s(_setup.isIdle)+\" \"),_c('br'),_vm._v(\" isVideo: \"+_vm._s(_setup.isVideo)+\" isAudio: \"+_vm._s(_setup.isAudio)+\" \"),_c('br'),_vm._v(\" isLocked: \"+_vm._s(_setup.isLocked)+\" \"),_c('br'),_vm._v(\" isLive: \"+_vm._s(_setup.isLive)+\" live: \"+_vm._s(_setup.mediaItem?.live)+\" \"),_c('br'),_vm._v(\" isP2P: \"+_vm._s(_setup.isP2P)+\" \"),_c('br')]):_vm._e(),(_setup.unlockButtonVisible)?_c('div',{staticClass:\"unlock-button-container\"},[_c('v-btn',{attrs:{\"outlined\":\"\"},on:{\"click\":_setup.unlockScreen}},[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\" mdi-lock-open \")]),_vm._v(\" Unlock \")],1)],1):_vm._e(),(_setup.isLandscapeMode)?_c('div',{staticClass:\"status-container\"},[(_setup.overlayMessage)?_c('div',{staticClass:\"box-message\",domProps:{\"innerHTML\":_vm._s(_setup.overlayMessage)}}):_vm._e(),_c('div',{staticClass:\"play-button-container\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_setup.isTv && !_setup.isPlayerBuffering && _setup.playPauseAnimationVisible),expression:\"isTv && !isPlayerBuffering && playPauseAnimationVisible\"}],ref:\"playPauseAnimation\"},[_c('v-icon',{attrs:{\"size\":\"34\"}},[_vm._v(\" \"+_vm._s(_setup.playPauseAnimationIcon)+\" \")])],1)]),(_setup.showingInformation)?_c('div',{staticClass:\"onscreen-info-container\"},[_c('div',{staticClass:\"p2p-info\"},[_c('div',{staticClass:\"p2p-info-item\"},[_vm._v(\"Helping: \"+_vm._s(_setup.engineStatus.peers))]),_c('div',{staticClass:\"p2p-info-item\"},[_vm._v(\"DL: \"+_vm._s(_setup.engineStatus.speedDown))]),_c('div',{staticClass:\"p2p-info-item\"},[_vm._v(\"UL: \"+_vm._s(_setup.engineStatus.speedUp))])])]):_vm._e()]):_vm._e(),(_setup.isOverlayVisible)?_c('v-container',{staticClass:\"page-container fill-height\"},[_c('div',{staticClass:\"top-bar\"},[_c('div',{staticClass:\"left-actions\"},[(!_setup.isLocked && _setup.homeButtonVisible && !_setup.isTv)?_c(_setup.ControlButton,{attrs:{\"icon\":\"mdi-arrow-left\"},on:{\"click\":function($event){return _setup.goHome()}}}):_vm._e(),(_setup.isLandscapeOrientation)?_c('div',{staticClass:\"top-title-container fade-text-right\",domProps:{\"innerHTML\":_vm._s(_setup.mediaTitle)}}):_vm._e()],1),_c('div',{staticClass:\"right-actions\"},[(_setup.isTv && _setup.isLandscapeMode)?[(_setup.gotEngineSession && !_setup.renderingDisabled)?_c('div',{staticClass:\"p2p-info-container\"},[_c('div',{staticClass:\"p2p-info-item\"},[_vm._v(\" Helping: \"+_vm._s(_setup.engineStatus.peers)+\" \")]),_c('div',{staticClass:\"p2p-info-item\"},[_vm._v(\" DL: \"+_vm._s(_setup.engineStatus.speedDown)+\" \")]),_c('div',{staticClass:\"p2p-info-item\"},[_vm._v(\"UL: \"+_vm._s(_setup.engineStatus.speedUp))])]):_vm._e()]:[(_setup.canTogglePip && !_setup.isLocked)?_c(_setup.ControlButton,{attrs:{\"icon\":\"mdi-picture-in-picture-bottom-right\"},on:{\"click\":function($event){return _setup.togglePiP()}}}):_vm._e(),(!_setup.isLocked)?_c(_setup.ControlButton,{attrs:{\"icon\":\"mdi-cast-variant\"},on:{\"click\":function($event){return _setup.showResolver()}}}):_vm._e(),(!_setup.isLocked && _setup.isLocalPlayback && _setup.isPlayingOrPaused)?_c(_setup.ControlButton,{attrs:{\"icon\":\"mdi-cog\"},on:{\"click\":function($event){return _setup.showMenu()}}}):_vm._e()]],2)]),(!_setup.isLandscapeMode)?_c('div',{staticClass:\"portrait-container\"},[(_setup.isLocalPlayback)?_c('div',{staticClass:\"portrait-top-container\"},[_c('div',{staticClass:\"title-container\",class:_setup.mediaTitleClass,domProps:{\"innerHTML\":_vm._s(_setup.mediaTitle)}}),(_setup.gotEngineSession && !_setup.renderingDisabled)?_c('div',{staticClass:\"p2p-info-container\"},[_c('div',{staticClass:\"p2p-info-item\"},[_vm._v(\"Helping: \"+_vm._s(_setup.engineStatus.peers))]),_c('div',{staticClass:\"p2p-info-item\"},[_vm._v(\"DL: \"+_vm._s(_setup.engineStatus.speedDown))]),_c('div',{staticClass:\"p2p-info-item\"},[_vm._v(\"UL: \"+_vm._s(_setup.engineStatus.speedUp))])]):_vm._e(),_c('div',{staticClass:\"actions\"},[(_setup.canAddToFavorites && _setup.favoriteUri && !_setup.isLocked)?_c(_setup.FavoriteToggleButton,{attrs:{\"active\":_setup.isFavorite},on:{\"click\":function($event){return _setup.toggleFavorite()}}}):_vm._e()],1)]):_vm._e(),_c('div',{staticClass:\"portrait-center-container\"},[(\n              _setup.canChangeVolume &&\n              !_setup.isIdle &&\n              !_setup.isLocalPlayback &&\n              !_setup.showSimpleControls\n            )?_c('div',{staticClass:\"volume-placeholder\"},[_c('div',{staticClass:\"volume-container\"},[_c('v-btn',{attrs:{\"icon\":\"\",\"disabled\":_setup.isLocked || !_setup.isPlayingOrPaused},on:{\"click\":_setup.toggleMute}},[_c('v-icon',[_vm._v(\" \"+_vm._s(_setup.isMuted ? \"mdi-volume-off\" : \"mdi-volume-mute\")+\" \")])],1),_c('v-slider',{attrs:{\"value\":_setup.displayVolume,\"min\":\"0\",\"max\":\"100\",\"disabled\":_setup.isSliderDisabled},on:{\"input\":_setup.onVolumeUpdate,\"start\":_setup.onVolumeSliderStart,\"end\":_setup.onVolumeSliderEnd}})],1)]):_vm._e(),_c('div',{staticClass:\"box-row\"},[_c('div',{staticClass:\"center-box-actions\"},[(_setup.isFastSeekEnabled)?_c(_setup.ControlButton,{attrs:{\"icon\":\"mdi-rewind-10\",\"type\":\"small\",\"withBackground\":!_setup.showBox},on:{\"click\":function($event){return _setup.seekBy(-10)}}}):_vm._e()],1),_c('div',{ref:\"centerBox\",staticClass:\"box-container\",class:{ opaque: _setup.showBox }},[_c('div',{staticClass:\"box-container-inner\"},[(_setup.overlayMessage)?_c('div',{staticClass:\"box-message\",domProps:{\"innerHTML\":_vm._s(_setup.overlayMessage)}}):(_setup.showBox && _setup.isPlayerBuffering)?_c('div',{staticClass:\"box-buffering-progress\"},[_c(_setup.BufferingProgress)],1):(!_setup.isLocked && !_setup.isIdle && !_setup.showSimpleControls && _setup.isPlayingOrPaused && !_setup.renderingDisabled)?_c(_setup.ControlButton,{attrs:{\"icon\":_setup.isPlaying ? 'mdi-pause' : 'mdi-play',\"type\":\"big\",\"withBackground\":!_setup.showBox},on:{\"click\":_setup.togglePause}}):(_setup.showBox && !_setup.isPlayerBuffering && !_setup.renderingDisabled)?_c('v-icon',{staticClass:\"content-type-image\",attrs:{\"size\":\"96\"}},[_vm._v(\" \"+_vm._s(_setup.contentTypeIcon)+\" \")]):_vm._e()],1)]),_c('div',{staticClass:\"center-box-actions\"},[(_setup.isFastSeekEnabled)?_c(_setup.ControlButton,{attrs:{\"icon\":\"mdi-fast-forward-10\",\"type\":\"small\",\"withBackground\":!_setup.showBox},on:{\"click\":function($event){return _setup.seekBy(10)}}}):_vm._e()],1)])]),(!_setup.isLocalPlayback)?_c('div',{staticClass:\"portrait-center-info-container\"},[_c('div',{staticClass:\"title-container\",class:_setup.mediaTitleClass,domProps:{\"innerHTML\":_vm._s(_setup.mediaTitle)}}),_c('div',{staticClass:\"p2p-info-container\",class:{'invisible': !_setup.gotEngineSession }},[_c('div',{staticClass:\"p2p-info-item\"},[_vm._v(\"Helping: \"+_vm._s(_setup.engineStatus.peers))]),_c('div',{staticClass:\"p2p-info-item\"},[_vm._v(\"DL: \"+_vm._s(_setup.engineStatus.speedDown))]),_c('div',{staticClass:\"p2p-info-item\"},[_vm._v(\"UL: \"+_vm._s(_setup.engineStatus.speedUp))])])]):_vm._e(),_c('div',{staticClass:\"portrait-bottom-container\",class:{'is-playing': _setup.isLocalPlayback }},[(!_setup.isIdle && !_setup.showSimpleControls)?_c('div',{staticClass:\"progress-placeholder\"},[_c('div',{staticClass:\"progress-container\"},[_c('div',{staticClass:\"progress-slider-row\"},[_c('v-slider',{attrs:{\"value\":_setup.progressValue,\"min\":\"0\",\"max\":_setup.progressMax,\"step\":_setup.progressStep,\"disabled\":_setup.isSliderDisabled},on:{\"start\":_setup.onSliderStart,\"end\":_setup.onSliderEnd,\"input\":_setup.onSliderInput}}),_c('div',{staticClass:\"go-live-button-container\"},[(_setup.liveProgress && _setup.isPlayingOrPaused && !_setup.renderingDisabled)?_c('div',{staticClass:\"go-live-button\",class:{ 'is-live': _setup.liveProgress.live },on:{\"click\":_setup.goLive}},[_vm._v(\" LIVE \")]):_vm._e()])],1),_c('div',{staticClass:\"progress-time-row\"},[_c('div',{staticClass:\"progress-time\",class:{ 'text-disabled': _setup.isLocked || !_setup.isPlayingOrPaused || _setup.renderingDisabled }},[_vm._v(\" \"+_vm._s(_setup.formatTime(_setup.displayTime))+\" \")]),_c('div',{staticClass:\"progress-duration\",class:{ 'text-disabled': _setup.isLocked || !_setup.isPlayingOrPaused || _setup.renderingDisabled }},[_vm._v(\" \"+_vm._s(_setup.formatTime(_setup.displayDuration))+\" \")])])])]):_vm._e(),_c('div',{staticClass:\"buttons-row buttons-row-centered buttons-row-first\"},[(!_setup.isAudio && !_setup.isLocked && !_setup.isIdle && !_setup.showSimpleControls)?_c(_setup.ControlButton,{attrs:{\"icon\":\"mdi-music-note\",\"disabled\":_setup.renderingDisabled || !_setup.hasAudioTracks || !_setup.isPlayingOrPaused},on:{\"click\":function($event){return _setup.selectAudioTrack()}}}):_vm._e(),(\n                !_setup.isAudio &&\n                !_setup.isLocked &&\n                !_setup.isIdle &&\n                _setup.hasSpuTracks &&\n                _setup.isPlayingOrPaused &&\n                !_setup.renderingDisabled\n              )?_c(_setup.ControlButton,{attrs:{\"icon\":\"mdi-subtitles\"},on:{\"click\":function($event){return _setup.selectSpuTrack()}}}):_vm._e(),(!_setup.isLocked && !_setup.isIdle)?_c(_setup.ControlButton,{attrs:{\"icon\":\"mdi-stop\",\"type\":_setup.showSimpleControls ? 'big' : null},on:{\"click\":function($event){return _setup.stop()}}}):_vm._e(),(_setup.isIdle && !_setup.gotEngineSession)?_c(_setup.ControlButton,{attrs:{\"icon\":\"mdi-restart\",\"type\":\"big\"},on:{\"click\":function($event){return _setup.restart()}}}):_vm._e(),(_setup.isIdle && _setup.gotEngineSession)?_c(_setup.ControlButton,{attrs:{\"icon\":\"mdi-stop\"},on:{\"click\":function($event){return _setup.stopEngineSession()}}}):_vm._e(),(!_setup.isAudio && !_setup.isLocked && !_setup.isIdle && !_setup.showSimpleControls)?_c(_setup.ControlButton,{directives:[{name:\"on-long-press\",rawName:\"v-on-long-press\",value:([_setup.onResizeVideoLongPress, { delay: 1000 }]),expression:\"[onResizeVideoLongPress, { delay: 1000 }]\"}],attrs:{\"disabled\":!_setup.isPlayingOrPaused || (!_setup.isAceCastPlayback && !_setup.isVideo),\"icon\":\"mdi-aspect-ratio\"},on:{\"click\":function($event){return _setup.resizeVideo()}}}):_vm._e(),(_setup.isVideo && !_setup.isLocked && !_setup.isIdle && _setup.isLocalPlayback)?_c(_setup.ControlButton,{attrs:{\"disabled\":!_setup.isPlayingOrPaused,\"icon\":\"mdi-headphones\"},on:{\"click\":function($event){return _setup.toggleAudioMode()}}}):_vm._e(),(!_setup.isLocked && !_setup.isIdle && _setup.isLocalPlayback)?_c(_setup.ControlButton,{attrs:{\"icon\":\"mdi-lock\"},on:{\"click\":function($event){return _setup.lockScreen()}}}):_vm._e()],1),(_setup.hasPlaylist && !_setup.isIdle)?_c('div',{staticClass:\"buttons-row buttons-row-centered\"},[_c(_setup.ControlButton,{attrs:{\"disabled\":!_setup.hasPrev,\"icon\":\"mdi-skip-previous\"},on:{\"click\":function($event){return _setup.skipPrev()}}}),(_setup.hasPlaylist)?_c(_setup.ControlButton,{attrs:{\"icon\":\"mdi-playlist-play\"},on:{\"click\":function($event){return _setup.showPlaylist()}}}):_vm._e(),_c(_setup.ControlButton,{attrs:{\"disabled\":!_setup.hasNext,\"icon\":\"mdi-skip-next\"},on:{\"click\":function($event){return _setup.skipNext()}}})],1):_vm._e()])]):_vm._e(),(_setup.isLandscapeMode && !_setup.isTv)?_c('div',{staticClass:\"center-landscape-controls\"},[(_setup.isFastSeekEnabled)?_c(_setup.ControlButton,{attrs:{\"icon\":\"mdi-rewind-10\",\"type\":\"small\",\"withBackground\":!_setup.showBox},on:{\"click\":function($event){return _setup.seekBy(-10)}}}):_vm._e(),_c('div',{staticClass:\"play-button-container\"},[(!_setup.isLocked && !_setup.isIdle && _setup.isPlayingOrPaused && !_setup.renderingDisabled)?_c(_setup.ControlButton,{attrs:{\"icon\":_setup.isPlaying ? 'mdi-pause' : 'mdi-play',\"type\":\"big\",\"withBackground\":!_setup.showBox},on:{\"click\":_setup.togglePause}}):_vm._e()],1),(_setup.isFastSeekEnabled)?_c(_setup.ControlButton,{attrs:{\"icon\":\"mdi-fast-forward-10\",\"type\":\"small\",\"withBackground\":!_setup.showBox},on:{\"click\":function($event){return _setup.seekBy(10)}}}):_vm._e()],1):_vm._e(),(_setup.isLandscapeMode)?_c('div',{staticClass:\"bottom-controls-container\"},[(_setup.isTv)?_c('div',{staticClass:\"buttons-row\"},[_c('div',{staticClass:\"left-container\"},[(_setup.hasPlaylist)?_c(_setup.ControlButton,{directives:[{name:\"focus\",rawName:\"v-focus\",value:({ id: 'playlist-prev', enabled: !_setup.preventFocus }),expression:\"{ id: 'playlist-prev', enabled: !preventFocus }\"}],attrs:{\"disabled\":!_setup.hasPrev,\"icon\":\"mdi-skip-previous\",\"hint\":_vm.$t('previous')},on:{\"click\":function($event){return _setup.skipPrev()}}}):_vm._e(),(_setup.hasPlaylist)?_c(_setup.ControlButton,{directives:[{name:\"focus\",rawName:\"v-focus\",value:({ id: 'playlist-show', enabled: !_setup.preventFocus }),expression:\"{ id: 'playlist-show', enabled: !preventFocus }\"}],attrs:{\"icon\":\"mdi-playlist-play\",\"hint\":_vm.$t('playlist')},on:{\"click\":function($event){return _setup.showPlaylist()}}}):_vm._e(),(_setup.hasPlaylist)?_c(_setup.ControlButton,{directives:[{name:\"focus\",rawName:\"v-focus\",value:({ id: 'playlist-next', enabled: !_setup.preventFocus }),expression:\"{ id: 'playlist-next', enabled: !preventFocus }\"}],attrs:{\"disabled\":!_setup.hasNext,\"icon\":\"mdi-skip-next\",\"hint\":_vm.$t('next')},on:{\"click\":function($event){return _setup.skipNext()}}}):_vm._e()],1),_c('div',{staticClass:\"right-container\"},[(_setup.canAddToFavorites && _setup.favoriteUri && !_setup.isLocked)?_c(_setup.FavoriteToggleButton,{directives:[{name:\"focus\",rawName:\"v-focus\",value:({ id: 'toggle-favorite', enabled: !_setup.preventFocus }),expression:\"{ id: 'toggle-favorite', enabled: !preventFocus }\"}],attrs:{\"active\":_setup.isFavorite},on:{\"click\":function($event){return _setup.toggleFavorite()}}}):_vm._e(),(\n                !_setup.isAudio &&\n                !_setup.isLocked &&\n                !_setup.isIdle &&\n                _setup.hasSpuTracks &&\n                _setup.isPlayingOrPaused\n              )?_c(_setup.ControlButton,{directives:[{name:\"focus\",rawName:\"v-focus\",value:({ id: 'toggle-subtitles', enabled: !_setup.preventFocus }),expression:\"{ id: 'toggle-subtitles', enabled: !preventFocus }\"}],attrs:{\"icon\":_setup.currentSpuTrack < 0\n                  ? 'mdi-subtitles-outline'\n                  : 'mdi-subtitles',\"hint\":_vm.$t('subtitles')},on:{\"click\":function($event){return _setup.toggleSubtitles()}}}):_vm._e(),(!_setup.isAudio && !_setup.isLocked && !_setup.isIdle)?_c(_setup.ControlButton,{directives:[{name:\"focus\",rawName:\"v-focus\",value:({ id: 'resize-video', enabled: !_setup.preventFocus }),expression:\"{ id: 'resize-video', enabled: !preventFocus }\"}],attrs:{\"disabled\":!_setup.isVideo || !_setup.isPlayingOrPaused,\"icon\":\"mdi-aspect-ratio\",\"hint\":_vm.$t('resize')},on:{\"click\":function($event){return _setup.resizeVideo()}}}):_vm._e(),(!_setup.isLocked && _setup.isLocalPlayback && _setup.isPlayingOrPaused)?_c(_setup.ControlButton,{directives:[{name:\"focus\",rawName:\"v-focus\",value:({ id: 'menu', enabled: !_setup.preventFocus }),expression:\"{ id: 'menu', enabled: !preventFocus }\"}],attrs:{\"icon\":\"mdi-cog\",\"hint\":_vm.$t('menu')},on:{\"click\":function($event){return _setup.showMenu()}}}):_vm._e()],1)]):_vm._e(),(!_setup.isTv)?_c('div',{staticClass:\"buttons-row as-top\"},[_c('div',{staticClass:\"left-container progress-time-row\"},[_c('div',{staticClass:\"progress-time\"},[_vm._v(\" \"+_vm._s(_setup.formatTime(_setup.displayTime))+\" \")]),(!_setup.liveProgress)?[_c('div',{staticClass:\"progress-time-spacer\"},[_vm._v(\"/\")]),_c('div',{staticClass:\"progress-duration\"},[_vm._v(\" \"+_vm._s(_setup.formatTime(_setup.displayDuration))+\" \")])]:_vm._e()],2),_c('div',{staticClass:\"right-container\"},[(_setup.gotEngineSession)?_c(_setup.ControlButton,{attrs:{\"icon\":_setup.showingInformation\n                  ? 'mdi-information'\n                  : 'mdi-information-outline'},on:{\"click\":function($event){return _setup.toggleInformation()}}}):_vm._e(),(_setup.hasStreams)?_c(_setup.TheButton,{staticStyle:{\"font-size\":\"12px\",\"border-radius\":\"16px\",\"padding\":\"4px\"},attrs:{\"outlined\":\"\"},on:{\"click\":function($event){return _setup.selectStream()}}},[_vm._v(\" \"+_vm._s(_setup.currentStream.name)+\" \")]):_vm._e(),(_setup.hasPlaylist)?_c(_setup.ControlButton,{attrs:{\"disabled\":!_setup.hasPrev,\"icon\":\"mdi-skip-previous\"},on:{\"click\":function($event){return _setup.skipPrev()}}}):_vm._e(),(_setup.hasPlaylist)?_c(_setup.ControlButton,{attrs:{\"icon\":\"mdi-playlist-play\"},on:{\"click\":function($event){return _setup.showPlaylist()}}}):_vm._e(),(_setup.hasPlaylist)?_c(_setup.ControlButton,{attrs:{\"disabled\":!_setup.hasNext,\"icon\":\"mdi-skip-next\"},on:{\"click\":function($event){return _setup.skipNext()}}}):_vm._e(),(!_setup.isAudio && !_setup.isLocked && !_setup.isIdle)?_c(_setup.ControlButton,{directives:[{name:\"focus\",rawName:\"v-focus\",value:({ id: 'select-audio-track', enabled: !_setup.preventFocus }),expression:\"{ id: 'select-audio-track', enabled: !preventFocus }\"}],attrs:{\"icon\":\"mdi-music-note\",\"disabled\":!_setup.hasAudioTracks || !_setup.isPlayingOrPaused},on:{\"click\":function($event){return _setup.selectAudioTrack()}}}):_vm._e(),(\n                !_setup.isAudio &&\n                !_setup.isLocked &&\n                !_setup.isIdle &&\n                _setup.hasSpuTracks &&\n                _setup.isPlayingOrPaused\n              )?_c(_setup.ControlButton,{directives:[{name:\"focus\",rawName:\"v-focus\",value:({ id: 'select-spu-track', enabled: !_setup.preventFocus }),expression:\"{ id: 'select-spu-track', enabled: !preventFocus }\"}],attrs:{\"icon\":\"mdi-subtitles\"},on:{\"click\":function($event){return _setup.selectSpuTrack()}}}):_vm._e(),(_setup.isVideo && !_setup.isLocked && !_setup.isIdle && _setup.isLocalPlayback)?_c(_setup.ControlButton,{attrs:{\"disabled\":!_setup.isPlayingOrPaused,\"icon\":\"mdi-headphones\"},on:{\"click\":function($event){return _setup.toggleAudioMode()}}}):_vm._e()],1)]):_vm._e(),(!_setup.isIdle)?_c('div',{staticClass:\"progress-container\"},[_c('div',{staticClass:\"progress-slider-row\"},[_c('v-slider',{directives:[{name:\"focus\",rawName:\"v-focus\",value:({\n                id: 'progress-slider',\n                enabled: !_setup.preventFocus,\n                focusElementSelector: '.v-slider__thumb-container',\n                onclick: _setup.onProgressClick,\n              }),expression:\"{\\n                id: 'progress-slider',\\n                enabled: !preventFocus,\\n                focusElementSelector: '.v-slider__thumb-container',\\n                onclick: onProgressClick,\\n              }\"}],key:_setup.progressKey,attrs:{\"value\":_setup.progressValue,\"min\":\"0\",\"max\":_setup.progressMax,\"disabled\":_setup.isSliderDisabled,\"step\":_setup.progressStep},on:{\"start\":_setup.onSliderStart,\"end\":_setup.onSliderEnd,\"change\":_setup.onSliderChange,\"blur\":_setup.onSliderBlur,\"input\":_setup.onSliderInput}}),(!_setup.isTv)?_c('div',{staticClass:\"go-live-button-container\"},[(_setup.liveProgress && _setup.isPlayingOrPaused)?_c('div',{staticClass:\"go-live-button\",class:{ 'is-live': _setup.liveProgress.live },on:{\"click\":_setup.goLive}},[_vm._v(\" LIVE \")]):_vm._e()]):_vm._e()],1),(_setup.isTv)?_c('div',{staticClass:\"progress-time-row\"},[_c('div',{staticClass:\"progress-time\"},[_vm._v(\" \"+_vm._s(_setup.formatTime(_setup.displayTime))+\" \")]),(_setup.liveProgress)?_c('div',{staticClass:\"go-live-button-container\"},[_c(_setup.TheButton,{directives:[{name:\"focus\",rawName:\"v-focus\",value:({ id: 'go-live', enabled: !_setup.preventFocus }),expression:\"{ id: 'go-live', enabled: !preventFocus }\"}],staticClass:\"go-live-button-new\",class:{ 'is-live': _setup.liveProgress.live },attrs:{\"height\":\"24\",\"text\":\"\"},on:{\"click\":_setup.goLive}},[_c('svg',{staticClass:\"live-circle\",attrs:{\"viewBox\":\"0 0 100 100\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('circle',{attrs:{\"cx\":\"50\",\"cy\":\"50\",\"r\":\"50\"}})]),_vm._v(\" LIVE \")])],1):_c('div',{staticClass:\"progress-duration\"},[_vm._v(\" \"+_vm._s(_setup.formatTime(_setup.displayDuration))+\" \")])]):_vm._e()]):_vm._e(),(!_setup.isTv)?_c('div',{staticClass:\"buttons-row as-bottom\"},[_c('div',{staticClass:\"left-container\"},[(!_setup.isLocked && !_setup.isIdle && _setup.isLocalPlayback)?_c(_setup.ControlButton,{attrs:{\"icon\":\"mdi-lock\"},on:{\"click\":function($event){return _setup.lockScreen()}}}):_vm._e()],1),_c('div',{staticClass:\"center-container\"},[(!_setup.isLocked && !_setup.isIdle)?_c(_setup.ControlButton,{attrs:{\"icon\":\"mdi-stop\"},on:{\"click\":function($event){return _setup.stop()}}}):_vm._e()],1),_c('div',{staticClass:\"right-container\"},[(!_setup.isAudio && !_setup.isLocked && !_setup.isIdle)?_c(_setup.ControlButton,{directives:[{name:\"on-long-press\",rawName:\"v-on-long-press\",value:([_setup.onResizeVideoLongPress, { delay: 1000 }]),expression:\"[onResizeVideoLongPress, { delay: 1000 }]\"}],attrs:{\"disabled\":!_setup.isVideo || !_setup.isPlayingOrPaused,\"icon\":\"mdi-aspect-ratio\"},on:{\"click\":function($event){return _setup.resizeVideo()}}}):_vm._e()],1)]):_vm._e()]):_vm._e()]):_vm._e(),_c('transition',[(_setup.dialog.visible && _setup.dialog.type == 'list-selector')?_c(_setup.ListSelector,{attrs:{\"title\":_vm.$t(_setup.dialog.title),\"items\":_setup.dialog.items,\"selectedItem\":_setup.dialog.selectedItem,\"rounded\":\"\"},on:{\"item-selected\":_setup.dialog.onselected,\"cancel\":_setup.closeDialog}}):_vm._e()],1),_c('transition',[(_setup.dialog.visible && _setup.dialog.type == 'player-menu')?_c(_setup.PlayerMenu,{attrs:{\"animationDuration\":100,\"playbackSpeed\":_setup.playbackSpeed,\"audioDelay\":_setup.audioDelay,\"spuDelay\":_setup.spuDelay,\"audioTracks\":_setup.audioTracks,\"selectedAudioTrack\":_setup.currentAudioTrack,\"spuTracks\":_setup.spuTracks,\"selectedSpuTrack\":_setup.currentSpuTrack,\"streams\":_setup.streams,\"selectedStream\":_setup.currentStream?.id},on:{\"lock-screen\":_setup.lockScreen,\"cancel\":_setup.closeDialog,\"select-audio-track\":_setup.onAudioTrackSelected,\"select-spu-track\":_setup.onSpuTrackSelected,\"select-stream\":_setup.onStreamSelected,\"set-rate\":_setup.setRate,\"set-audio-delay\":_setup.setAudioDelay,\"set-spu-delay\":_setup.setSpuDelay}}):_vm._e()],1),_c('transition',[(_setup.dialog.visible && _setup.dialog.type == 'resize-video-menu')?_c(_setup.ResizeVideoMenu,{attrs:{\"animationDuration\":100,\"currentVideoSize\":_setup.currentVideoSize,\"hasNotch\":_setup.hasNotch,\"displayUnderNotch\":_setup.currentDisplayUnderNotch},on:{\"cancel\":_setup.closeDialog,\"on-video-size\":_setup.setVideoSize,\"on-display-under-notch\":_setup.setDisplayUnderNotch}}):_vm._e()],1),_c('transition',[(_setup.dialog.visible && _setup.dialog.type == 'playlist')?_c(_setup.PlaylistSheet,{attrs:{\"animationDuration\":100,\"playlist\":_setup.m3uPlaylist || _setup.playlist},on:{\"item-selected\":_setup.onPlaylistItemSelected,\"cancel\":_setup.closeDialog}}):_vm._e()],1),(_setup.swipeFeedbackVisible && _setup.swipeFeedbackItem && _setup.touchStartY !== null)?_c('div',{staticClass:\"swipe-feedback-overlay\",class:{\n        'swipe-feedback-from-top': _setup.swipeFeedbackDirection === 'prev',\n        'swipe-feedback-from-bottom': _setup.swipeFeedbackDirection === 'next'\n      }},[_c('div',{staticClass:\"swipe-feedback-body\",style:({\n          transform: _setup.swipeFeedbackDirection === 'prev'\n            ? `translateY(${_setup.swipeOffset * _setup.SWIPE_ARROW_SPEED_RATIO}px)`\n            : `translateY(${-_setup.swipeOffset * _setup.SWIPE_ARROW_SPEED_RATIO}px)`,\n          opacity: Math.min(_vm.swipeProgress * 2, 1)\n        })},[_c('div',{staticClass:\"swipe-feedback-content\"},[_c('div',{staticClass:\"swipe-feedback-icon\"},[(_setup.swipeFeedbackDirection === 'next')?_c('svg',{attrs:{\"width\":\"64\",\"height\":\"64\",\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":\"M7 14L12 9L17 14\",\"stroke\":\"currentColor\",\"stroke-width\":\"0.5\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}})]):_c('svg',{attrs:{\"width\":\"64\",\"height\":\"64\",\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":\"M7 10L12 15L17 10\",\"stroke\":\"currentColor\",\"stroke-width\":\"0.5\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}})])]),_c('div',{staticClass:\"swipe-feedback-title\"},[_vm._v(\" \"+_vm._s(_setup.swipeFeedbackItem.title)+\" \")])])])]):_vm._e(),(_setup.externalPageVisible)?_c(_setup.ExternalPage,{attrs:{\"url\":_setup.externalPageUrl},on:{\"close\":function($event){return _setup.closeExternalPage()}}}):_vm._e()],1):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { ref, watch } from \"vue\";\n\nconst VERBOSE = false;\nexport let navigationService = null;\n\nfunction verbose(...args) {\n  if (VERBOSE) {\n    console.log(...args);\n  }\n}\n\nconst FocusPlugin = {\n  install(Vue, options) {\n    navigationService = new NavigationService(options);\n\n    Vue.directive(\"focus\", {\n      bind(el, binding, vnode) {\n        verbose(`bind: id=${binding.value?.id}`);\n        if (!(binding.value instanceof Object)) {\n          throw new Error(\n            'v-focus value must be an object with at least \"id\" property'\n          );\n        }\n        if (!binding.value.id) {\n          throw new Error(\"focus element must have id\");\n        }\n        const focusElement = new FocusElement(\n          navigationService,\n          el,\n          vnode,\n          binding.value\n        );\n        navigationService.registerElement(focusElement);\n        el.addEventListener(\"keydown\", (e) => e.preventDefault());\n      },\n      inserted(el, binding) {\n        const focusElement = navigationService.findById(binding.value.id);\n        // verbose(`inserted: id=${binding.value?.id}`);\n        if (focusElement) {\n          if (focusElement.isDefault) {\n            focusElement.focus();\n          } else if (focusElement.focused) {\n            // Ensure that the DOM element is focused\n            // verbose('set focus on', el.id);\n            setTimeout(() => el.focus(), 0);\n          }\n        }\n      },\n      update(el, binding, vnode) {\n        // verbose(`binding value: ${binding.oldValue.enabled} -> ${binding.value.enabled}`);\n\n        // Element id can change if Vue reuses same component\n        if (binding.oldValue && binding.value.id !== binding.oldValue.id) {\n          const oldEl = navigationService.findById(binding.oldValue.id);\n          if (oldEl) navigationService.unregisterElement(oldEl);\n          const newEl = new FocusElement(navigationService, el, vnode, binding.value);\n          navigationService.registerElement(newEl);\n        }\n        if (binding.value.enabled !== binding.oldValue.enabled) {\n          const focusElement = navigationService.findById(binding.value.id);\n          focusElement?.setEnabled(binding.value.enabled);\n        }\n      },\n      unbind(el, binding) {\n        verbose(`unbind: id=${binding.value.id}`);\n        const focusElement = navigationService.findById(binding.value.id);\n        if (focusElement) {\n          navigationService.unregisterElement(focusElement);\n        }\n      },\n    });\n  },\n};\n\nclass NavigationService {\n  defaults = {\n    navigationMap: {},\n    defaultFocusElements: {},\n    restoreFocusInterval: 100,\n  };\n\n  constructor(options) {\n    this.started = false;\n    this.active = true;\n    this.paused = false;\n    this.restoreTimer = null;\n    this.elements = [];\n    this.unwatchFocusedElement = null;\n\n    this.longPressTimer = null;\n    this.longPressDelay = 800;\n    this.longPressDetected = false;\n\n    this.configure(options);\n\n    this.focusedElementId = ref(\n      this.defaultFocusElements.length > 0 ? this.defaultFocusElements[0] : null\n    );\n\n    this.actions = {\n      13: \"click\",\n      38: \"moveUp\",\n      40: \"moveDown\",\n      37: \"moveLeft\",\n      39: \"moveRight\",\n    };\n  }\n\n  configure(options) {\n    options = Object.assign({}, this.defaults, options);\n    this.navigationMap = options.navigationMap;\n    this.navigationMapFunc = options.navigationMapFunc;\n    this.defaultFocusElementFunc = options.defaultFocusElementFunc;\n    this.defaultFocusElements = options.defaultFocusElements;\n    this.restoreFocusInterval = options.restoreFocusInterval;\n    if (this.focusedElementId) {\n      // Reset focused element to allow to restore default focus\n      this.focusedElementId.value = null;\n    }\n\n    if (this.started) {\n      this.watchFocusedElement();\n    }\n  }\n\n  start() {\n    verbose(\"NavigationService:start\");\n    if (!this.started) {\n      this.started = true;\n      this.initKeyboardListener();\n      this.watchFocusedElement();\n      this.initBackwardHandler();\n    }\n  }\n\n  pause() {\n    this.paused = true;\n  }\n\n  resume() {\n    this.paused = false;\n  }\n\n  isPaused() {\n    return this.paused;\n  }\n\n  setActive(active) {\n    if (!this.started) return;\n\n    verbose(`NavigationService:setActive: active=${active}`);\n    this.active = active;\n    if (active) {\n      setTimeout(() => this.restoreFocus(), 0);\n    } else {\n      this._stopRestoreTimer();\n    }\n  }\n\n  restoreFocus() {\n    if (!this.started) return;\n\n    verbose(`restoreFocus: active=${this.active}`);\n\n    let foundFocusedElement = false;\n    let startTimer = true;\n\n    let focusCandidates = this.defaultFocusElementFunc\n      ? this.defaultFocusElementFunc()\n      : this.defaultFocusElements;\n\n    if (!this.active) {\n      startTimer = false;\n    } else if (this.focusedElementId.value) {\n      foundFocusedElement = true;\n      startTimer = false;\n    } else if (focusCandidates.length > 0) {\n      for (const id of focusCandidates) {\n        const element = this.findById(id);\n        if (element) {\n          verbose(\n            `restoreFocus: id=${element.id} canFocus=${element.canFocus()}`\n          );\n        }\n        if (element && element.canFocus()) {\n          element.focus();\n          foundFocusedElement = true;\n          break;\n        }\n      }\n      startTimer = !foundFocusedElement;\n    } else {\n      startTimer = false;\n    }\n\n    if (startTimer) {\n      this._startRestoreTimer();\n    } else {\n      this._stopRestoreTimer();\n    }\n\n    return foundFocusedElement;\n  }\n\n  _startRestoreTimer() {\n    if (this.restoreTimer) {\n      clearTimeout(this.restoreTimer);\n    }\n    this.restoreTimer = setTimeout(\n      this.restoreFocus.bind(this),\n      this.restoreFocusInterval\n    );\n  }\n\n  _stopRestoreTimer() {\n    if (this.restoreTimer) {\n      clearTimeout(this.restoreTimer);\n      this.restoreTimer = null;\n    }\n  }\n\n  initBackwardHandler() {\n    // // Create empty history\n    // this.createEmptyHistory();\n\n    // window.addEventListener('popstate', (e) => {\n    //   e.preventDefault();\n\n    //   console.log(`nav:back`);\n    //   // if(fullout || wait) return\n\n    //   this.createEmptyHistory();\n\n    //   // listener.send('popstate',{count: activites.length})\n\n    //   // if(callback) callback()\n    //   // else{\n    //   //   backward()\n    //   // }\n    // })\n  }\n\n  createEmptyHistory() {\n    window.history.pushState(null, null, window.location.pathname);\n  }\n\n  initKeyboardListener() {\n    document.addEventListener(\"keydown\", (e) => {\n      if (!this.active) {\n        verbose(`keydown: not active`);\n        return;\n      }\n\n      if (this.paused) {\n        verbose(`keydown: paused`);\n        return;\n      }\n\n      const keyCode = this.getKeyCode(e);\n\n      if (this.isEnter(keyCode)) {\n        // Special handling for Enter do detect long press\n\n        e.preventDefault();\n        if (!this.longPressTimer) {\n          this.longPressDetected = false;\n          this.longPressTimer = setTimeout(() => {\n            this.performAction(\"longPress\");\n            this.longPressDetected = true;\n          }, this.longPressDelay);\n        }\n\n      } else {\n        // Other keys\n        const action = this.actions[keyCode];\n        if (action) {\n          if (this.performAction(action)) {\n            e.preventDefault();\n          }\n        }\n      }\n    });\n\n    document.addEventListener(\"keyup\", (e) => {\n      if (this.paused) {\n        return;\n      }\n\n      const keyCode = this.getKeyCode(e);\n\n      if (this.isEnter(keyCode)) {\n        e.preventDefault();\n        if (this.longPressDetected) {\n          this.longPressDetected = false;\n        } else {\n          console.log(`nav: click on keyup`);\n          this.performAction(\"click\");\n        }\n\n        clearTimeout(this.longPressTimer)\n        this.longPressTimer = null;\n      }\n    });\n  }\n\n  getKeyCode(event) {\n    let keycode\n\n    if (window.event) {\n        keycode = event.keyCode;\n    } else if(event.which) {\n        keycode = event.which;\n    }\n\n    return keycode\n  }\n\n  isEnter(keyCode) {\n    return keyCode == 13 || keyCode == 29443 || keyCode == 117 || keyCode == 65385\n  }\n\n  watchFocusedElement() {\n    if (this.unwatchFocusedElement) {\n      this.unwatchFocusedElement();\n    }\n\n    this.unwatchFocusedElement = watch(\n      this.focusedElementId,\n      (value) => {\n        verbose(`focusedElementId: ${value}`);\n        if (value === null) {\n          this.restoreFocus();\n        }\n      },\n      {\n        immediate: true,\n      }\n    );\n  }\n\n  registerElement(focusElement) {\n    if (!this.started) return;\n\n    this.elements.push(focusElement);\n    if (focusElement.id === this.focusedElementId.value) {\n      verbose(`registerElement: focus: id=${focusElement.id}`);\n      focusElement.focus();\n    }\n  }\n\n  unregisterElement(focusElement) {\n    if (!this.started) return;\n\n    const index = this.elements.indexOf(focusElement);\n    if (index > -1) {\n      const els = this.elements.splice(index, 1);\n      if (els.length) {\n        els[0].destroy();\n      }\n    }\n  }\n\n  unregisterElementById(id) {\n    const element = this.findById(id);\n    if (element) {\n      this.unregisterElement(element);\n    }\n  }\n\n  setFocusedById(id) {\n    this.focusedElementId.value = id;\n    const element = this.findById(id);\n    if (element) {\n      verbose(`setFocusedById: found: id=${id}`);\n      element.focus();\n    } else {\n      verbose(`setFocusedById: not found: id=${id}`);\n    }\n  }\n\n  onFocused(id) {\n    this.focusedElementId.value = id;\n  }\n\n  updateState() {\n    verbose(`updateState`);\n\n    let foundFocused = false;\n    for (let el of this.elements) {\n      if (el.focused) {\n        this.focusedElementId.value = el.id;\n        foundFocused = true;\n        break;\n      }\n    }\n\n    if (!foundFocused) {\n      this.focusedElementId.value = null;\n    }\n  }\n\n  findById(id) {\n    for (let el of this.elements) {\n      if (el.id === id) {\n        return el;\n      }\n    }\n    return null;\n  }\n\n  findFocusedElement() {\n    for (let el of this.elements) {\n      if (el.focused) {\n        return el;\n      }\n    }\n    return null;\n  }\n\n  performAction(action) {\n    verbose(`nav:performAction: action=${action}`)\n    const focusedElement = this.findFocusedElement();\n    if (focusedElement) {\n      focusedElement[action]();\n      return true;\n    }\n\n    if (this.restoreFocus()) {\n      return true;\n    }\n\n    return false;\n  }\n\n  blurAll() {\n    this.focusedElementId.value = null;\n    for (let el of this.elements) {\n      if (el.focused) {\n        el.blur();\n      }\n    }\n  }\n}\n\nclass FocusElement {\n  defaults = {\n    enabled: true,\n    refocusInterval: 0,\n  };\n\n  constructor(navigationService, el, vnode, options) {\n    options = Object.assign({}, this.defaults, options);\n    this.focused = false;\n    this.destroyed = false;\n    this.navigationService = navigationService;\n    this.el = el;\n    this.id = options.id;\n    this.vnode = vnode;\n    this.enabled = options.enabled;\n    this.options = options;\n    this.isDefault =\n      el.dataset.focusDefault === \"\" || el.dataset.focusDefault === \"true\";\n    this.next = {\n      up: el.dataset.focusUp,\n      down: el.dataset.focusDown,\n      left: el.dataset.focusLeft,\n      right: el.dataset.focusRight,\n    };\n\n    if (options.onclick) {\n      this.onclick = options.onclick;\n    }\n    if (options.onLongPress) {\n      this.onLongPress = options.onLongPress;\n    }\n    this.nextFunc = options.nextFunc;\n\n    if (options.focusElementSelector) {\n      this.el = el.querySelector(options.focusElementSelector);\n      if (!this.el) {\n        throw new Error(\n          `focus element not found: id=${this.id} selector=${options.focusElementSelector}`\n        );\n      }\n    } else {\n      this.el = el;\n    }\n  }\n\n  destroy() {\n    this.blur();\n    this.destroyed = true;\n    this.el = null;\n    this.onclick = null;\n  }\n\n  setEnabled(value) {\n    this.enabled = value;\n    if (!this.enabled) {\n      this.blur();\n    }\n  }\n\n  canFocus() {\n    return !this.destroyed && this.enabled && !this.el.disabled;\n  }\n\n  focus() {\n    if (this.destroyed) return;\n    verbose(`focus: id=${this.id} focused=${this.focused}`);\n    if (!this.focused) {\n      this.navigationService.blurAll();\n      this.navigationService.onFocused(this.id);\n      this.focused = true;\n      this.el.classList.add(\"focus\");\n      setTimeout(() => this.el?.focus(), 0);\n\n      // Dirty hack to ensure that the DOM element is focused\n      // Need this to ensure focus on menu item.\n      // Without this hack, the menu item is not focused sometimes, probably\n      // because it's not fully visible at the moment of binding because of animation\n      if (this.options.refocusInterval > 0) {\n        setTimeout(() => {\n          if (document.activeElement !== this.el) {\n            verbose(`refocus: id=${this.id}`);\n            this.el.focus();\n          }\n        }, this.options.refocusInterval);\n      }\n    }\n  }\n\n  blur() {\n    verbose(`blur: id=${this.id} focused=${this.focused}`);\n    if (this.destroyed) return;\n    if (this.focused) {\n      this.focused = false;\n      this.el.blur();\n      this.el.classList.remove(\"focus\");\n      this.navigationService.updateState();\n    }\n  }\n\n  click() {\n    if (this.destroyed) return;\n\n    verbose(`click: ${this.id}`);\n\n    const clickEvent = new Event(\"click\");\n    this.el.dispatchEvent(clickEvent);\n\n    // //TODO: how to make it universal?\n    // if(this.vnode.data?.on?.click) {\n    //     this.vnode.data?.on?.click?.call(null, clickEvent);\n    // } else {\n    //     this.el.__vue__?.$listeners?.click?.call(this.el, clickEvent);\n    // }\n\n    if (this.onclick) {\n      this.onclick.call(null);\n    }\n  }\n\n  longPress() {\n    if (this.destroyed) return;\n\n    verbose(`long-press: ${this.id}`);\n    console.log(`nav:long-press: ${this.id}`)\n\n    if (this.onLongPress) {\n      this.onLongPress.call(null);\n    }\n  }\n\n  getNextElement(id, direction) {\n    const _map = this.navigationService.navigationMap;\n\n    let nextId;\n    let nextDirection;\n    let nextAction;\n    let next = _map[id]?.[direction];\n\n    if (next instanceof Object) {\n      nextId = next.id;\n      nextDirection = next.direction || direction;\n      nextAction = next.action;\n    } else {\n      nextId = next;\n      nextDirection = direction;\n    }\n\n    if (nextAction) {\n      nextId = nextAction.call(null);\n      if (!nextId) {\n        return null;\n      }\n      nextDirection = direction;\n    }\n\n    if (nextId) {\n      const target = this.navigationService.findById(nextId);\n      if (target && target.canFocus()) {\n        return target;\n      } else {\n        return this.getNextElement(nextId, nextDirection);\n      }\n    }\n  }\n\n  move(direction) {\n    let target;\n    if (this.nextFunc) {\n      const targetId = this.nextFunc(direction);\n      target = this.navigationService.findById(targetId);\n    } else if (this.next[direction]) {\n      // use next from element config\n      const targetId = this.next[direction];\n      target = this.navigationService.findById(targetId);\n    } else {\n      // use next from navigation map\n      target = this.getNextElement(this.id, direction);\n    }\n\n    verbose(\n      `move:${direction}: id=${\n        this.id\n      } target=${target} canFocus=${target?.canFocus()}`\n    );\n\n    if (target && target.canFocus()) {\n      verbose(`move:${direction}: ${this.id} -> ${target.id}`);\n      target.focus();\n    } else {\n      verbose(`move:${direction}: skip for ${this.id}`);\n    }\n  }\n\n  moveDown() {\n    this.move(\"down\");\n  }\n\n  moveUp() {\n    this.move(\"up\");\n  }\n\n  moveLeft() {\n    this.move(\"left\");\n  }\n\n  moveRight() {\n    this.move(\"right\");\n  }\n}\n\nexport default FocusPlugin;\n","export function getVideoSizeName($i18n, size) {\n  switch (size) {\n    case VideoSize.SURFACE_BEST_FIT:\n      return $i18n.t('surface_best_fit');\n    case VideoSize.SURFACE_FIT_SCREEN:\n      return $i18n.t('surface_fit_screen');\n    case VideoSize.SURFACE_FILL:\n      return $i18n.t('surface_fill');\n    case VideoSize.SURFACE_16_9:\n      return \"16:9\";\n    case VideoSize.SURFACE_4_3:\n      return \"4:3\";\n    case VideoSize.SURFACE_16_10:\n      return \"16:10\";\n    case VideoSize.SURFACE_2_1:\n      return \"2:1\";\n    case VideoSize.SURFACE_221_1:\n      return \"2.21:1\";\n    case VideoSize.SURFACE_235_1:\n      return \"2.35:1\";\n    case VideoSize.SURFACE_239_1:\n      return \"2.39:1\";\n    case VideoSize.SURFACE_5_4:\n      return \"5:4\";\n    case VideoSize.SURFACE_ORIGINAL:\n      return $i18n.t('surface_original');\n    default:\n      return \"?\";\n  }\n}\n\nexport const VideoSize = {\n  SURFACE_BEST_FIT: 0,\n  SURFACE_FIT_SCREEN: 1,\n  SURFACE_FILL: 2,\n  SURFACE_16_9: 3,\n  SURFACE_4_3: 4,\n  SURFACE_16_10: 5,\n  SURFACE_2_1: 6,\n  SURFACE_221_1: 7,\n  SURFACE_235_1: 8,\n  SURFACE_239_1: 9,\n  SURFACE_5_4: 10,\n  SURFACE_ORIGINAL: 11,\n};\n","import { Player, PlayerOptions, loadImaSdk } from \"@glomex/vast-ima-player\";\n\nexport async function init({ playerContainer, adContainer }) {\n  // in case Google IMA was not loaded before\n  // you can load it with this helper\n  const ima = await loadImaSdk();\n\n  const adsRenderingSettings = new window.google.ima.AdsRenderingSettings();\n  const playerOptions = new PlayerOptions();\n  const imaPlayer = new Player(\n    ima,\n    playerContainer,\n    adContainer,\n    adsRenderingSettings,\n    playerOptions\n  );\n  // global IMA settings can be adjusted like that\n  window.google.ima.settings.setVpaidMode(\n    window.google.ima.ImaSdkSettings.VpaidMode.INSECURE\n  );\n  window.google.ima.settings.setNumRedirects(3);\n\n  return imaPlayer;\n}","const MAX_TRIES = 100;\n\nfunction getHost() {\n    return new Promise((resolve, reject) => {\n        let count = 0;\n\n        const check = () => {\n            if (window.acestreamAppHost) {\n                resolve(window.acestreamAppHost);\n            } else if (count < MAX_TRIES) {\n                ++count;\n                setTimeout(check, 100);\n            } else {\n                reject(new Error('Failed to get host'));\n            }\n        }\n\n        check();\n    })\n}\n\nexport const AceStreamApp = {\n    async isAppInstalled({ packageName }) {\n        const host = await getHost();\n        return host.isAppInstalled(packageName);\n    },\n    async hasMarketApp() {\n        const host = await getHost();\n        return host.hasMarketApp();\n    },\n    async hasBrowser() {\n        const host = await getHost();\n        return host.hasBrowser();\n    },\n    async startActivity({ action, category, data, type }) {\n        const host = await getHost();\n        host.startActivity(action, category, data, type);\n    },\n    async openBrowser({ url }) {\n        const host = await getHost();\n        host.openBrowser(url);\n    },\n    async installFromMarket({ packageId }) {\n        const host = await getHost();\n        host.installFromMarket(packageId);\n    },\n}","// const LOG_DISABLED = -1\nconst LOG_ERROR = 0\n// const LOG_WARN = 1\nconst LOG_INFO = 2\nconst LOG_DEBUG = 3\nconst LOG_VERBOSE = 4\n\n// for testing: TODO: set this during build\nconst LOG_LEVEL = LOG_VERBOSE\nexport const LOG_DEV = false\n\nfunction log(level, tag, msg, vars={}) {\n    if (level <= LOG_LEVEL) {\n        let full = `${tag}:${msg}`\n        if (level === LOG_ERROR) {\n            full = 'ERROR:' + full\n        }\n\n        const varList = []\n        for (const name in vars) {\n            let value\n            if (vars[name] instanceof Error) {\n                value = vars[name].message\n            } else {\n                value = JSON.stringify(vars[name])\n            }\n            varList.push(`${name}=${value}`)\n        }\n\n        if (varList.length > 0) {\n            full += ': ' + varList.join(' ')\n        }\n\n        const method = (level === LOG_ERROR) ? 'error' : 'log'\n\n        console[method](full)\n    }\n}\n\nexport function logerror(tag, msg, vars={}) {\n    if (LOG_LEVEL >= LOG_ERROR) {\n        log(LOG_ERROR, tag, msg, vars)\n    }\n}\n\nexport function loginfo(tag, msg, vars={}) {\n    if (LOG_LEVEL >= LOG_INFO) {\n        log(LOG_INFO, tag, msg, vars)\n    }\n}\n\nexport function logdebug(tag, msg, vars={}) {\n    if (LOG_LEVEL >= LOG_DEBUG) {\n        log(LOG_DEBUG, tag, msg, vars)\n    }\n}\n\nexport function logverbose(tag, msg, vars={}) {\n    if (LOG_LEVEL >= LOG_VERBOSE) {\n        log(LOG_VERBOSE, tag, msg, vars)\n    }\n}\n\nexport function logdev(tag, msg, vars={}) {\n    if (LOG_DEV && LOG_LEVEL >= LOG_VERBOSE) {\n        log(LOG_VERBOSE, tag, msg, vars)\n    }\n}\n","import axios from \"axios\";\n\nimport { AceStreamApp } from \"@/lib/app\";\nimport { logerror, logverbose } from '@/utils/logger'\nimport { useMainStore } from \"@/stores/main\";\n\n\nconst TAG = 'AppNotificationManager'\n\nconst VERBOSE = true\n\nexport class AppNotificationManager {\n    static #instance = null\n\n    static getInstance() {\n        if (AppNotificationManager.#instance === null) {\n            AppNotificationManager.#instance = new AppNotificationManager()\n        }\n\n        return AppNotificationManager.#instance\n    }\n\n    constructor() {\n    }\n\n    async get({ placement, hasPremium, isLive, adsShown, timeout=2000 }) {\n        try {\n            const list = await this.getFromBackend({ placement, hasPremium, isLive, adsShown, timeout })\n            return await this.chooseOne(list)\n        } catch (e) {\n            logerror(TAG, `get:error: ${e.message}`)\n            return null;\n        }\n    }\n\n    async getFromBackend({ placement, hasPremium, isLive, adsShown, timeout=2000 }) {\n        const domains = [\n            'notifications.acestream.media',\n            'android.acestream.net',\n        ];\n        for (const domain of domains) {\n            const result = await this.getFromBackendImpl({ domain, placement, hasPremium, isLive, adsShown, timeout });\n            if (result !== null) {\n                return result;\n            }\n        }\n\n        return null;\n    }\n\n    async getFromBackendImpl({ domain, placement, hasPremium, isLive, adsShown, timeout=2000 }) {\n        try {\n            const mainStore = useMainStore();\n            const params = {\n                type: 'player-fullscreen',\n                appId: mainStore.applicationId,\n                appVersion: mainStore.applicationVersionCode,\n                locale: mainStore.locale,\n                isTv: mainStore.isTv ? 1 : 0,\n                hasBrowser: mainStore.hasBrowser ? 1 : 0,\n                hasMarketApp: mainStore.hasMarketApp ? 1 : 0,\n                hasPremium: hasPremium ? 1 : 0,\n                isLive: isLive ? 1 : 0,\n                a: adsShown ? 1 : 0,\n                placement,\n            }\n            const response = await axios.get(`https://${domain}/api/v1/app-notifications`, { params, timeout });\n            return response.data.notifications;\n        } catch (e) {\n            logerror(TAG, `getAppNotifications:error: ${e.message}`)\n            return null;\n        }\n    }\n\n    /**\n     * Choose which notification to show\n     */\n    async chooseOne(notifications) {\n        for (const notification of notifications) {\n            if (await this.shouldShow(notification)) {\n                return notification;\n            }\n        }\n\n        return null;\n    }\n\n    async shouldShow(notification) {\n        try {\n            return await this.shouldShowUnsafe(notification)\n        } catch (e) {\n            logerror(TAG, `shouldShow:error: ${e.message}`)\n            return false\n        }\n    }\n\n    async shouldShowUnsafe(notification) {\n        if (notification.conditions) {\n            if (!(await this.checkConditions(notification.conditions))) {\n                if (VERBOSE) {\n                    logverbose(TAG, `shouldShowUnsafe: conditions are not met: id=${notification.id} conditions=${JSON.stringify(notification.conditions)}`)\n                }\n                return false\n            } else {\n                if (VERBOSE) {\n                    logverbose(TAG, `shouldShowUnsafe: conditions are met: id=${notification.id} conditions=${JSON.stringify(notification.conditions)}`)\n                }\n            }\n        }\n\n        return true\n    }\n\n    async checkConditions(conditions) {\n        if (conditions.or) {\n            for (const condition of conditions.or) {\n                if (await this.checkSingleCondition(condition)) {\n                    return true\n                }\n            }\n            return false\n        } else if (conditions.and) {\n            for (const condition of conditions.or) {\n                if (!(await this.checkSingleCondition(condition))) {\n                    return false\n                }\n            }\n            return true\n        } else {\n            throw new Error('Unsupported conditions')\n        }\n    }\n\n    async checkSingleCondition(condition) {\n        switch (condition.type) {\n            case 'app-not-installed': {\n                const { result } = await AceStreamApp.isAppInstalled({\n                  packageName: condition.value,\n                });\n                return !result;\n            }\n\n            case 'app-installed': {\n                const { result } = await AceStreamApp.isAppInstalled({\n                  packageName: condition.value,\n                });\n                return result;\n            }\n\n            default:\n                throw new Error(`Unknown condition type: ${condition.type}`)\n        }\n    }\n\n    registerNotificationImpression(where, notification) {\n        this.sendEvent('impression', where, notification)\n    }\n\n    registerNotificationClick(where, notification, action) {\n        this.sendEvent('click', where, notification, action)\n    }\n\n    sendEvent(type, where, notification, action=null) {\n        const urls = [\n            // ...this.getEventUrls(this.#events, type),\n            ...this.getEventUrls(notification.events, type),\n        ]\n\n        for (const url of urls) {\n            let requestUrl = url\n            requestUrl = requestUrl.replace('[where]', where)\n            requestUrl = requestUrl.replace('[unitId]', notification.id)\n            requestUrl = requestUrl.replace('[action]', action ?? '')\n\n            axios.get(requestUrl)\n                .then(() => {\n                    logverbose(TAG, `sendEvent:done: url=${requestUrl}`)\n                })\n                .catch((error) => {\n                    logerror(TAG, `sendEvent:error: ${error}`)\n                })\n        }\n    }\n\n    getEventUrls(events, type) {\n        if (!events) {\n            return [];\n        }\n\n        switch (type) {\n            case 'impression':\n                return events.impression ?? [];\n\n            case 'click':\n                return events.click ?? [];\n\n            default:\n                return [];\n        }\n    }\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"color\":\"primary\",\"size\":\"48\",\"width\":\"1\"}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./BufferingProgress.vue?vue&type=template&id=3c7b6884&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c(_setup.TheButton,{attrs:{\"icon\":!_vm.withBackground,\"color\":_setup.buttonColor,\"width\":_setup.buttonSize,\"height\":_setup.buttonSize,\"disabled\":_vm.disabled,\"fab\":_vm.withBackground},on:{\"click\":function($event){return _setup.emit('click', $event)}}},[(_vm.hint)?_c('div',{staticClass:\"hint\"},[_vm._v(\" \"+_vm._s(_vm.hint)+\" \")]):_vm._e(),_c('v-icon',{attrs:{\"size\":_setup.iconSize}},[_vm._v(\" \"+_vm._s(_vm.icon)+\" \")])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('v-btn',_vm._g(_vm._b({class:{\n    'as-selected': _vm.$attrs.selected,\n    'as-outlined': _vm.withBorder,\n    'as-blue': _vm.blue,\n  }},'v-btn',_vm.$attrs,false),_vm.$listeners),[_vm._t(\"default\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TheButton.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TheButton.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./TheButton.vue?vue&type=template&id=5bc22774&scoped=true&\"\nimport script from \"./TheButton.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./TheButton.vue?vue&type=script&setup=true&lang=js&\"\nimport style0 from \"./TheButton.vue?vue&type=style&index=0&id=5bc22774&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5bc22774\",\n  null\n  \n)\n\nexport default component.exports","<script setup>\nimport { computed } from 'vue';\nimport TheButton from '@/common/src/components/TheButton.vue';\n\nconst ICON_SIZE_RATIO = 1.1;\n\nconst props = defineProps({\n    type: {\n        type: String,\n        default: 'default',\n    },\n    icon: {\n        type: String,\n    },\n    hint: {\n        type: String,\n    },\n    disabled: {\n        type: Boolean,\n        default: false,\n    },\n    withBackground: {\n        type: Boolean,\n        default: false,\n    },\n});\n\nconst buttonSize = computed(() => {\n    if(props.type == 'big') {\n        return Math.round(56 * ICON_SIZE_RATIO);\n    } else if(props.type == 'small') {\n        return Math.round(40 * ICON_SIZE_RATIO);\n    } else {\n        return Math.round(48 * ICON_SIZE_RATIO);\n    }\n});\nconst iconSize = computed(() => {\n    if(props.type == 'big') {\n        return Math.round(34 * ICON_SIZE_RATIO);\n    } else {\n        return Math.round(24 * ICON_SIZE_RATIO);\n    }\n});\nconst buttonColor = computed(() => props.withBackground ? 'rgba(0, 0, 0, 0.3)' : 'inherit');\n\nconst emit = defineEmits(['click']);\n</script>\n\n<template>\n    <the-button\n        :icon=\"!withBackground\"\n        :color=\"buttonColor\"\n        :width=\"buttonSize\"\n        :height=\"buttonSize\"\n        :disabled=\"disabled\"\n        :fab=\"withBackground\"\n        @click=\"emit('click', $event)\">\n        <div class=\"hint\" v-if=\"hint\">\n            {{ hint }}\n        </div>\n        <v-icon :size=\"iconSize\">\n            {{ icon }}\n        </v-icon>\n    </the-button>\n</template>\n\n<style scoped lang=\"scss\">\n.hint {\n    position: absolute;\n    left: 50%;\n    transform: translateX(-50%);\n    bottom: calc(100% + 20px);\n    // width: 100%;\n    text-align: center;\n    font-size: 12px;\n    color: #fff;\n    background-color: rgba(0, 0, 0, 0.3);\n    opacity: 0;\n    transition: opacity 0.2s ease-in-out;\n    background: none;\n\n    .focus & {\n        opacity: 1;\n    }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ControlButton.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ControlButton.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./ControlButton.vue?vue&type=template&id=39b6affa&scoped=true&\"\nimport script from \"./ControlButton.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./ControlButton.vue?vue&type=script&setup=true&lang=js&\"\nimport style0 from \"./ControlButton.vue?vue&type=style&index=0&id=39b6affa&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"39b6affa\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c(_setup.TheButton,{attrs:{\"icon\":!_vm.withBackground,\"color\":_setup.buttonColor,\"width\":_setup.buttonSize,\"height\":_setup.buttonSize,\"disabled\":_vm.disabled,\"fab\":_vm.withBackground},on:{\"click\":function($event){return _setup.emit('click', $event)}}},[_c('div',{staticClass:\"icon\",style:({ width: _setup.iconSize + 'px', height: _setup.iconSize + 'px' })},[(_vm.active)?_c('svg',{attrs:{\"fill\":\"currentColor\",\"viewBox\":\"0 0 60 60\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":\"m8.55 9.38v44.62c0 .39.22.74.57.91.35.16.77.11 1.07-.14l15.02-12.5 15.02 12.5c.18.15.41.23.64.23.14 0 .29-.03.42-.09.36-.17.58-.52.58-.91v-28.48c-.32.11-.65.19-1 .19-.93 0-1.78-.41-2.36-1.14-.85-1.1-2.22-2.05-3.54-2.97-2.99-2.09-6.68-4.67-6.68-10.03 0-1.13.22-2.2.62-3.19h-19.36c-.56 0-1 .45-1 1z\"}}),_c('path',{attrs:{\"d\":\"m45.62 19.96c2.87-2 5.83-4.06 5.83-8.39 0-3.62-2.95-6.57-6.57-6.57-1.48 0-2.87.48-4.01 1.37-1.14-.89-2.54-1.37-4.01-1.37-3.62 0-6.57 2.95-6.57 6.57 0 4.33 2.96 6.39 5.82 8.39 1.45 1.01 2.94 2.05 3.97 3.37.19.24.48.38.79.38s.6-.14.79-.38c1.03-1.32 2.52-2.36 3.96-3.37z\"}})]):_c('svg',{attrs:{\"fill\":\"currentColor\",\"viewBox\":\"0 0 60 60\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":\"m8.55 9.37v44.63c0 .39.22.74.58.91.13.06.28.09.42.09.23 0 .46-.08.64-.23l15.02-12.5 15.02 12.5c.3.25.71.3 1.06.14s.58-.52.58-.91v-24.8c0-.55-.45-1-1-1s-1 .45-1 1v22.67l-14.02-11.67c-.37-.31-.91-.31-1.28 0l-14.02 11.67v-41.5h17c.55 0 1-.45 1-1s-.45-1-1-1h-18c-.55 0-1 .45-1 1z\"}}),_c('path',{attrs:{\"d\":\"m30.3 11.57c0 4.32 2.96 6.39 5.82 8.39 1.44 1.01 2.94 2.05 3.97 3.37.19.24.48.38.79.38s.6-.14.79-.38c1.03-1.32 2.52-2.36 3.97-3.37 2.86-2 5.82-4.06 5.82-8.39-.01-3.62-2.96-6.57-6.58-6.57-1.47 0-2.86.48-4.01 1.37-1.14-.89-2.53-1.37-4-1.37-3.63 0-6.57 2.95-6.57 6.57zm10.57-2.86c.27 0 .53-.11.72-.31.87-.9 2.04-1.4 3.29-1.4 2.52 0 4.57 2.05 4.57 4.57 0 3.28-2.3 4.89-4.97 6.75-1.25.87-2.53 1.76-3.61 2.88-1.08-1.11-2.36-2.01-3.61-2.88-2.66-1.86-4.97-3.47-4.97-6.75.01-2.52 2.06-4.57 4.58-4.57 1.25 0 2.42.5 3.29 1.4.18.2.44.31.71.31z\"}})])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script setup>\nimport { computed } from \"vue\";\nimport TheButton from \"@/common/src/components/TheButton.vue\";\n\nconst ICON_SIZE_RATIO = 1.1;\n\nconst props = defineProps({\n  type: {\n    type: String,\n    default: \"default\",\n  },\n  active: {\n    type: Boolean,\n    default: false,\n  },\n  disabled: {\n    type: Boolean,\n    default: false,\n  },\n  withBackground: {\n    type: Boolean,\n    default: false,\n  },\n});\n\nconst emit = defineEmits([\"click\"]);\n\nconst buttonSize = computed(() => {\n  if (props.type == \"big\") {\n    return Math.round(56 * ICON_SIZE_RATIO);\n  } else if (props.type == \"small\") {\n    return Math.round(40 * ICON_SIZE_RATIO);\n  } else {\n    return Math.round(48 * ICON_SIZE_RATIO);\n  }\n});\n\nconst iconSize = computed(() => {\n  if (props.type == \"big\") {\n    return Math.round(34 * ICON_SIZE_RATIO);\n  } else {\n    return Math.round(24 * ICON_SIZE_RATIO);\n  }\n});\n\nconst buttonColor = computed(() =>\n  props.withBackground ? \"rgba(0, 0, 0, 0.3)\" : \"inherit\"\n);\n</script>\n\n<template>\n  <the-button\n    :icon=\"!withBackground\"\n    :color=\"buttonColor\"\n    :width=\"buttonSize\"\n    :height=\"buttonSize\"\n    :disabled=\"disabled\"\n    :fab=\"withBackground\"\n    @click=\"emit('click', $event)\"\n  >\n    <div class=\"icon\" :style=\"{ width: iconSize + 'px', height: iconSize + 'px' }\">\n      <!-- active = remove from favorites -->\n      <svg\n        v-if=\"active\"\n        fill=\"currentColor\"\n        viewBox=\"0 0 60 60\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path\n          d=\"m8.55 9.38v44.62c0 .39.22.74.57.91.35.16.77.11 1.07-.14l15.02-12.5 15.02 12.5c.18.15.41.23.64.23.14 0 .29-.03.42-.09.36-.17.58-.52.58-.91v-28.48c-.32.11-.65.19-1 .19-.93 0-1.78-.41-2.36-1.14-.85-1.1-2.22-2.05-3.54-2.97-2.99-2.09-6.68-4.67-6.68-10.03 0-1.13.22-2.2.62-3.19h-19.36c-.56 0-1 .45-1 1z\"\n        ></path>\n        <path\n          d=\"m45.62 19.96c2.87-2 5.83-4.06 5.83-8.39 0-3.62-2.95-6.57-6.57-6.57-1.48 0-2.87.48-4.01 1.37-1.14-.89-2.54-1.37-4.01-1.37-3.62 0-6.57 2.95-6.57 6.57 0 4.33 2.96 6.39 5.82 8.39 1.45 1.01 2.94 2.05 3.97 3.37.19.24.48.38.79.38s.6-.14.79-.38c1.03-1.32 2.52-2.36 3.96-3.37z\"\n        ></path>\n      </svg>\n\n      <!-- inactive = add to favorites -->\n      <svg\n        v-else\n        fill=\"currentColor\"\n        viewBox=\"0 0 60 60\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path\n          d=\"m8.55 9.37v44.63c0 .39.22.74.58.91.13.06.28.09.42.09.23 0 .46-.08.64-.23l15.02-12.5 15.02 12.5c.3.25.71.3 1.06.14s.58-.52.58-.91v-24.8c0-.55-.45-1-1-1s-1 .45-1 1v22.67l-14.02-11.67c-.37-.31-.91-.31-1.28 0l-14.02 11.67v-41.5h17c.55 0 1-.45 1-1s-.45-1-1-1h-18c-.55 0-1 .45-1 1z\"\n        ></path>\n        <path\n          d=\"m30.3 11.57c0 4.32 2.96 6.39 5.82 8.39 1.44 1.01 2.94 2.05 3.97 3.37.19.24.48.38.79.38s.6-.14.79-.38c1.03-1.32 2.52-2.36 3.97-3.37 2.86-2 5.82-4.06 5.82-8.39-.01-3.62-2.96-6.57-6.58-6.57-1.47 0-2.86.48-4.01 1.37-1.14-.89-2.53-1.37-4-1.37-3.63 0-6.57 2.95-6.57 6.57zm10.57-2.86c.27 0 .53-.11.72-.31.87-.9 2.04-1.4 3.29-1.4 2.52 0 4.57 2.05 4.57 4.57 0 3.28-2.3 4.89-4.97 6.75-1.25.87-2.53 1.76-3.61 2.88-1.08-1.11-2.36-2.01-3.61-2.88-2.66-1.86-4.97-3.47-4.97-6.75.01-2.52 2.06-4.57 4.58-4.57 1.25 0 2.42.5 3.29 1.4.18.2.44.31.71.31z\"\n        ></path>\n      </svg>\n    </div>\n  </the-button>\n</template>\n\n<style scoped lang=\"scss\">\n.icon {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n</style>\n\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FavoriteToggleButton.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FavoriteToggleButton.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./FavoriteToggleButton.vue?vue&type=template&id=6d47d050&scoped=true&\"\nimport script from \"./FavoriteToggleButton.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./FavoriteToggleButton.vue?vue&type=script&setup=true&lang=js&\"\nimport style0 from \"./FavoriteToggleButton.vue?vue&type=style&index=0&id=6d47d050&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6d47d050\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c(_setup.BottomSheet,_vm._g(_vm._b({scopedSlots:_vm._u([{key:\"default\",fn:function(slot){return _c('div',{staticClass:\"item\",on:{\"click\":function($event){return _setup.itemSelected(slot.item)}}},[_c('div',{staticClass:\"icon-container\"},[(slot.item.id == _vm.selectedItem)?_c('v-icon',[_vm._v(\" mdi-check \")]):_vm._e()],1),_c('span',{staticClass:\"item-name\"},[_vm._v(\" \"+_vm._s(slot.item.name)+\" \")])])}}])},'bottom-sheet',_vm.$attrs,false),_vm.$listeners))\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"bottom-sheet-screen\",style:(`--animation-duration: ${_setup.animationDuration};`)},[_c('div',{staticClass:\"bottom-sheet-overlay\",on:{\"click\":_setup.cancel}}),_c('div',{staticClass:\"bottom-sheet-container\",class:{'bottom-sheet-rounded': _vm.rounded, 'bottom-sheet-visible': _vm.bodyVisible},on:{\"click\":_setup.cancel}},[_c('div',{staticClass:\"bottom-sheet-body\",on:{\"click\":function($event){$event.stopPropagation();}}},[(_vm.title)?_c('div',{staticClass:\"bottom-sheet-title\"},[_vm._v(\" \"+_vm._s(_vm.title)+\" \")]):_vm._e(),_c('div',{staticClass:\"items\"},[_vm._l((_vm.items),function(item){return _vm._t(\"default\",null,{\"item\":item})})],2)])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script setup>\nimport { computed } from 'vue';\n\nconst props = defineProps({\n    title: {\n        type: String,\n    },\n    items: {\n        type: Array,\n    },\n    bodyVisible: {\n        type: Boolean,\n        default: true,\n    },\n    rounded: {\n        type: Boolean,\n        default: false,\n    },\n    animationDuration: {\n        type: Number,\n        default: 200,\n    },\n});\n\nconst emit = defineEmits([\n    'cancel',\n]);\n\nconst animationDuration = computed(() => {\n    return (props.animationDuration / 1000) + 's';\n});\n\nfunction cancel() {\n    emit('cancel');\n}\n</script>\n\n<template>\n    <div class=\"bottom-sheet-screen\" :style=\"`--animation-duration: ${animationDuration};`\">\n        <div class=\"bottom-sheet-overlay\" @click=\"cancel\"></div>\n        <div class=\"bottom-sheet-container\" :class=\"{'bottom-sheet-rounded': rounded, 'bottom-sheet-visible': bodyVisible}\" @click=\"cancel\">\n            <div class=\"bottom-sheet-body\" @click.stop>\n                <div class=\"bottom-sheet-title\" v-if=\"title\">\n                    {{ title  }}\n                </div>\n                <div class=\"items\">\n                    <slot v-for=\"item in items\" :item=\"item\"></slot>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<style scoped lang=\"scss\">\n.bottom-sheet-screen {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n\n    &.v-enter, &.v-leave-to {\n        .bottom-sheet-overlay {\n            opacity: 0;\n        }\n\n        .bottom-sheet-container {\n            transform: translateY(100%) !important;\n        }\n    }\n\n    &.v-enter-active, &.v-leave-active {\n        // This rule is not applied but we need it to make the transition work. Vuetify will read this rule to detect animation duration.\n        transition: opacity var(--animation-duration) ease;\n    }\n\n    .bottom-sheet-overlay {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: black;\n        z-index: 1;\n\n        opacity: 0.5;\n        transition: opacity var(--animation-duration) ease;\n    }\n\n    .bottom-sheet-container {\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        width: 100%;\n        z-index: 1;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n\n        transform: translateY(100%);\n        transition: transform var(--animation-duration) ease;\n\n        &.bottom-sheet-visible {\n            transform: translateY(0);\n            &.bottom-sheet-rounded {\n                transform: translateY(calc(-1 * (var(--inset-padding-bottom) + 8px)));\n            }\n        }\n\n        &.bottom-sheet-rounded {\n            padding: 0 16px;\n            .bottom-sheet-body {\n                border-radius: 16px;\n            }\n        }\n\n        .bottom-sheet-body {\n            background-color: #212121;\n            padding: 8px 16px 0 16px;\n            width: 100%;\n            max-width: 384px;\n            max-height: 85vh;\n            overflow-y: auto;\n\n            .bottom-sheet-title {\n                height: 56px;\n                display: flex;\n                align-items: center;\n                justify-content: flex-start;\n            }\n        }\n    }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BottomSheet.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BottomSheet.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./BottomSheet.vue?vue&type=template&id=2bfc9fe6&scoped=true&\"\nimport script from \"./BottomSheet.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./BottomSheet.vue?vue&type=script&setup=true&lang=js&\"\nimport style0 from \"./BottomSheet.vue?vue&type=style&index=0&id=2bfc9fe6&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2bfc9fe6\",\n  null\n  \n)\n\nexport default component.exports","<script setup>\nimport BottomSheet from '@/components/BottomSheet.vue';\n\ndefineProps({\n    selectedItem: {\n        type: Number,\n        default: -1,\n    },\n});\n\nconst emit = defineEmits([\n    'item-selected',\n]);\n\nfunction itemSelected(item) {\n    emit('item-selected', item);\n}\n</script>\n\n<template>\n    <bottom-sheet\n        v-bind=\"$attrs\"\n        v-on=\"$listeners\"\n        >\n        <div class=\"item\" slot-scope=\"slot\" @click=\"itemSelected(slot.item)\">\n            <div class=\"icon-container\">\n                <v-icon v-if=\"slot.item.id == selectedItem\">\n                    mdi-check\n                </v-icon>\n            </div>\n            <span class=\"item-name\">\n                {{ slot.item.name }}\n            </span>\n        </div>\n    </bottom-sheet>\n</template>\n\n<style scoped lang=\"scss\">\n.item {\n    height: 56px;\n    display: flex;\n    align-items: center;\n    justify-content: flex-start;\n\n    .icon-container {\n        box-sizing: content-box;\n        width: 24px;\n        height: 24px;\n        padding-right: 16px;\n    }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListSelector.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ListSelector.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./ListSelector.vue?vue&type=template&id=61a1b832&scoped=true&\"\nimport script from \"./ListSelector.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./ListSelector.vue?vue&type=script&setup=true&lang=js&\"\nimport style0 from \"./ListSelector.vue?vue&type=style&index=0&id=61a1b832&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"61a1b832\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c(_setup.isTv ? _setup.SidePanel : _setup.BottomSheet,_vm._g(_vm._b({tag:\"component\",attrs:{\"bodyVisible\":_setup.bodyVisible,\"animationDuration\":_vm.animationDuration,\"rounded\":\"\",\"title\":_setup.currentMenu.title,\"items\":_setup.currentMenu.items,\"selectedItemId\":_setup.currentMenu.selectedItem},on:{\"item-clicked\":_setup.menuItemClicked},scopedSlots:_vm._u([{key:\"default\",fn:function(slot){return _c('div',{on:{\"click\":function($event){return _setup.menuItemClicked(slot.item)}}},[(_setup.currentMenu.type == 'menu')?_c('div',{staticClass:\"item\"},[_c('div',{staticClass:\"left-container\"},[(!_setup.isTv)?_c('div',{staticClass:\"icon-container\"},[(slot.item.icon)?_c('v-icon',[_vm._v(\" \"+_vm._s(slot.item.icon)+\" \")]):_vm._e()],1):_vm._e(),_c('span',{staticClass:\"item-name\"},[_vm._v(\" \"+_vm._s(slot.item.title)+\" \"),(_setup.isTv && slot.item.currentValue)?_c('div',{staticClass:\"current-value\"},[_vm._v(\" \"+_vm._s(slot.item.currentValue)+\" \")]):_vm._e()])]),_c('div',{staticClass:\"right-container\"},[(!_setup.isTv && slot.item.currentValue)?_c('div',{staticClass:\"current-value\"},[_vm._v(\" \"+_vm._s(slot.item.currentValue)+\" \")]):_vm._e(),(slot.item.hasSubmenu)?_c('div',{staticClass:\"submenu-marker\"},[_c('v-icon',[_vm._v(\" mdi-chevron-right \")])],1):_vm._e()])]):(_setup.currentMenu.type == 'select')?_c('div',{staticClass:\"item\"},[_c('div',{staticClass:\"left-container\"},[_c('div',{staticClass:\"icon-container\"},[(slot.item.id == _setup.currentMenu.selectedItem)?_c('v-icon',[_vm._v(\" mdi-check \")]):_vm._e()],1),_c('span',{staticClass:\"item-name\"},[_vm._v(\" \"+_vm._s(slot.item.title)+\" \")])])]):(_setup.currentMenu.type == 'delay-selector')?_c('div',{staticClass:\"delay-container\"},[_c('div',{staticClass:\"delay-controls\"},[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _setup.decreaseDelay(slot.item.target)}}},[_c('v-icon',[_vm._v(\" mdi-minus \")])],1),_c('span',{staticClass:\"selector-value\"},[_vm._v(\" \"+_vm._s(_setup.displayDelay(slot.item.target))+\" \")]),_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _setup.increaseDelay(slot.item.target)}}},[_c('v-icon',[_vm._v(\" mdi-plus \")])],1)],1),_c('div',{staticClass:\"delay-actions\"},[_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":function($event){return _setup.resetDelay(slot.item.target)}}},[_vm._v(\" Reset \")])],1)]):_vm._e()])}}])},'component',_vm.$attrs,false),_vm.$listeners))\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"side-panel-screen\",style:(`--animation-duration: ${_setup.animationDuration};`)},[_c('div',{staticClass:\"side-panel-overlay\",class:{ 'overlay-visible': _vm.showOverlay },on:{\"click\":_setup.cancel}}),_c('div',{staticClass:\"side-panel-container\",class:{ 'side-panel-visible': _vm.bodyVisible },on:{\"click\":_setup.cancel}},[(_vm.showContent)?_c('div',{staticClass:\"side-panel-content\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"Content here\")])]):_vm._e(),_c('div',{staticClass:\"side-panel-menu\",on:{\"click\":function($event){$event.stopPropagation();}}},[(_vm.title)?_c('div',{staticClass:\"side-panel-title\"},[_vm._v(\" \"+_vm._s(_vm.title)+\" \")]):_vm._e(),_c('div',{staticClass:\"items\",style:(`transform: translateY(${_setup.itemsContainerOffset}px)`)},_vm._l((_vm.items),function(item,index){return _c('div',{directives:[{name:\"focus\",rawName:\"v-focus\",value:({\n            id: _setup.getItemId(index),\n            enabled: true,\n            onclick: () => _setup.onItemClicked(item),\n          }),expression:\"{\\n            id: getItemId(index),\\n            enabled: true,\\n            onclick: () => onItemClicked(item),\\n          }\"}],key:item.id,staticClass:\"item-container\",class:{ focused: _setup.focusedItem === item.id },attrs:{\"tabindex\":\"0\",\"data-focus-up\":_setup.getItemId(index - 1),\"data-focus-down\":_setup.getItemId(index + 1)},on:{\"focus\":function($event){return _setup.onFocus($event.target, item)}}},[_vm._t(\"default\",null,{\"item\":item})],2)}),0)])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script setup>\nimport { computed, onMounted, onBeforeUnmount, ref, watch, nextTick } from \"vue\";\nimport { navigationService } from \"@/common/src/plugins/focus\";\n\n// const\nconst DEFAULT_OFFSET = 92;\n\n// props\nconst props = defineProps({\n  title: {\n    type: String,\n  },\n  showOverlay: {\n    type: Boolean,\n    default: false,\n  },\n  watchItems: {\n    type: Boolean,\n    default: true,\n  },\n  showContent: {\n    type: Boolean,\n    default: false,\n  },\n  items: {\n    type: Array,\n  },\n  selectedItemId: {\n    type: [String, Number],\n  },\n  bodyVisible: {\n    type: Boolean,\n    default: true,\n  },\n  animationDuration: {\n    type: Number,\n    default: 200,\n  },\n  scrollOnFocus: {\n    type: Boolean,\n    default: true,\n  },\n});\n\n// events\nconst emit = defineEmits([\"item-clicked\", \"cancel\"]);\n\n// refs\nconst focusedItem = ref(null);\nconst itemsContainerOffset = ref(DEFAULT_OFFSET);\n\n// computed\nconst animationDuration = computed(() => {\n  return props.animationDuration / 1000 + \"s\";\n});\n\nfunction onKeyDown(e) {\n  // console.log(`side-panel:keydown: key=${e.key}`);\n  if (e.code === \"Escape\") {\n    cancel();\n  }\n}\n\nfunction onBackPressed() {\n  cancel();\n}\n\nfunction bindEvents() {\n  window.addEventListener(\"keydown\", onKeyDown);\n  window.addEventListener(\"customBackPressed\", onBackPressed);\n\n}\n\nfunction unbindEvents() {\n  window.removeEventListener(\"keydown\", onKeyDown);\n  window.removeEventListener(\"customBackPressed\", onBackPressed);\n}\n\n// lifecycle\nonMounted(() => {\n  setDefaulFocus();\n  bindEvents();\n});\n\nonBeforeUnmount(() => {\n  unbindEvents();\n});\n\n// watch\nwatch(\n  () => props.items,\n  async () => {\n    if (props.watchItems) {\n      await nextTick();\n      setDefaulFocus();\n    }\n  }\n);\n\n// methods\nfunction setDefaulFocus() {\n  const index = getSelectedItemIndex();\n  console.log(\"setDefaultFocus\", index);\n  if (index !== -1) {\n    const element = navigationService.findById(getItemId(index));\n    element?.focus();\n  }\n}\n\nfunction cancel() {\n  emit(\"cancel\");\n}\n\nfunction getSelectedItemIndex() {\n  if (props.selectedItemId) {\n    return props.items.findIndex((item) => item.id == props.selectedItemId);\n  } else if (props.items.length) {\n    return 0;\n  } else {\n    return -1;\n  }\n}\n\nfunction onFocus(element, item) {\n  focusedItem.value = item.id;\n  if (props.scrollOnFocus) {\n    itemsContainerOffset.value = DEFAULT_OFFSET - element.offsetTop;\n  }\n}\n\nfunction getItemId(index) {\n  return `side-panel-item-${index}`;\n}\n\nfunction onItemClicked(item) {\n  emit(\"item-clicked\", item);\n}\n</script>\n\n<template>\n  <div\n    class=\"side-panel-screen\"\n    :style=\"`--animation-duration: ${animationDuration};`\"\n  >\n    <div\n      class=\"side-panel-overlay\"\n      :class=\"{ 'overlay-visible': showOverlay }\"\n      @click=\"cancel\"\n    ></div>\n\n    <div\n      class=\"side-panel-container\"\n      :class=\"{ 'side-panel-visible': bodyVisible }\"\n      @click=\"cancel\"\n    >\n      <div class=\"side-panel-content\" v-if=\"showContent\">\n        <div class=\"title\">Content here</div>\n      </div>\n\n      <div class=\"side-panel-menu\" @click.stop>\n        <div class=\"side-panel-title\" v-if=\"title\">\n          {{ title }}\n        </div>\n        <div\n          class=\"items\"\n          :style=\"`transform: translateY(${itemsContainerOffset}px)`\"\n        >\n          <!-- @click=\"onItemClicked(item)\" -->\n          <div\n            class=\"item-container\"\n            v-for=\"(item, index) in items\"\n            :key=\"item.id\"\n            tabindex=\"0\"\n            v-focus=\"{\n              id: getItemId(index),\n              enabled: true,\n              onclick: () => onItemClicked(item),\n            }\"\n            :data-focus-up=\"getItemId(index - 1)\"\n            :data-focus-down=\"getItemId(index + 1)\"\n            @focus=\"onFocus($event.target, item)\"\n            :class=\"{ focused: focusedItem === item.id }\"\n\n          >\n            <slot :item=\"item\"></slot>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n.side-panel-screen {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100vh;\n  z-index: 100;\n\n  &.v-enter,\n  &.v-leave-to {\n    .side-panel-overlay {\n      opacity: 0;\n    }\n\n    .side-panel-container {\n      transform: translateX(100%) !important;\n    }\n  }\n\n  &.v-enter-active,\n  &.v-leave-active {\n    // This rule is not applied but we need it to make the transition work. Vuetify will read this rule to detect animation duration.\n    transition: opacity var(--animation-duration);\n  }\n\n  .side-panel-overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: transparent;\n    z-index: 1;\n\n    &.overlay-visible {\n      background-color: black;\n      opacity: 0.5;\n      transition: opacity var(--animation-duration);\n    }\n  }\n\n  .side-panel-container {\n    position: absolute;\n    top: 0;\n    right: 0;\n    height: 100%;\n    z-index: 1;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n\n    transform: translateX(100%);\n    transition: transform var(--animation-duration);\n\n    &.side-panel-visible {\n      transform: translateX(0);\n    }\n\n    .side-panel-content {\n      background-color: rgba(0, 0, 0, 0.75);\n      height: 100%;\n      width: 55vw;\n\n      padding: 32px 64px;\n\n      .title {\n        font-size: 48px;\n      }\n    }\n\n    .side-panel-menu {\n      background-color: rgba(0, 0, 0, 0.3);\n      backdrop-filter: blur(1.6em);\n\n      padding: 8px 16px 0 16px;\n      height: 100%;\n      width: 45vw;\n      overflow-y: auto;\n\n      .side-panel-title {\n        //height: 56px;\n        display: flex;\n        align-items: center;\n        justify-content: flex-start;\n      }\n\n      .items {\n        transition: transform var(--animation-duration);\n\n        .item-container {\n          outline: none;\n          //padding: 8px;\n          //padding-left: 16px;\n          //border-radius: 4px;\n\n          margin: 0 22px;\n          border-radius: 2px;\n          padding: 17px 22px;\n\n          color: white;\n\n          &.focused {\n            background-color: white;\n            color: black;\n          }\n        }\n      }\n    }\n  }\n}\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SidePanel.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SidePanel.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./SidePanel.vue?vue&type=template&id=18807bd4&scoped=true&\"\nimport script from \"./SidePanel.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./SidePanel.vue?vue&type=script&setup=true&lang=js&\"\nimport style0 from \"./SidePanel.vue?vue&type=style&index=0&id=18807bd4&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"18807bd4\",\n  null\n  \n)\n\nexport default component.exports","<script setup>\nimport { computed, ref, getCurrentInstance } from 'vue';\nimport { useMainStore } from '@/stores/main';\nimport BottomSheet from '@/components/BottomSheet.vue';\nimport SidePanel from '@/common/src/components/SidePanel.vue';\n\nconst $i18n = getCurrentInstance().proxy.$i18n;\n\nconst emit = defineEmits([\n    'select-audio-track',\n    'select-spu-track',\n    'select-stream',\n    'lock-screen',\n    'set-rate',\n    'set-audio-delay',\n    'set-spu-delay',\n    'cancel',\n]);\n\nconst props = defineProps({\n    animationDuration: {\n        type: Number,\n        default: 200,\n    },\n    playbackSpeed: {\n        type: Number,\n    },\n    audioDelay: {\n        type: Number,\n    },\n    spuDelay: {\n        type: Number,\n    },\n    audioTracks: {\n        type: Array,\n    },\n    selectedAudioTrack: {\n        type: Number,\n    },\n    spuTracks: {\n        type: Array,\n    },\n    selectedSpuTrack: {\n        type: Number,\n    },\n    streams: {\n        type: Array,\n    },\n    selectedStream: {\n        type: Number,\n    },\n});\n\n// stores\nconst mainStore = useMainStore();\n\n// refs\nconst delayModel = ref({\n    audioDelay: {\n        value: 0,\n        defaultValue: 0,\n        step: 100,\n    },\n    spuDelay: {\n        value: 0,\n        defaultValue: 0,\n        step: 100,\n    },\n});\n\nconst bodyVisible = ref(true);\nconst selectedMenu = ref(null);\n\n// computed\nconst isTv = computed(() => mainStore.isTv);\n\nconst currentAudioTrackName = computed(() => {\n    if(props.selectedAudioTrack < 0) {\n        return 'Off';\n    } else {\n        const track = props.audioTracks.find(track => track.id == props.selectedAudioTrack);\n        return track?.name;\n    }\n});\n\nconst currentSpuTrackName = computed(() => {\n    if(props.selectedSpuTrack < 0) {\n        return 'Off';\n    } else {\n        const track = props.spuTracks.find(track => track.id == props.selectedSpuTrack);\n        return track?.name;\n    }\n});\n\nconst currentStreamName = computed(() => {\n    const stream = props.streams.find(stream => stream.index == props.selectedStream);\n    return stream?.name;\n});\n\nconst currentPlaybackSpeedName = computed(() => {\n    if(props.playbackSpeed == 1) {\n        return $i18n.t('playback_speed_normal');\n    } else {\n        return `${props.playbackSpeed}x`;\n    }\n});\n\nconst currentAudioDelayName = computed(() => {\n    return `${props.audioDelay}ms`;\n});\n\nconst currentSpuDelayName = computed(() => {\n    return `${props.spuDelay}ms`;\n});\n\nconst topMenu = {\n    title: null,\n    type: 'menu',\n    items: [\n        {\n            id: 'playback-speed',\n            title: $i18n.t('playback_speed'),\n            icon: 'mdi-play-speed',\n            hasSubmenu: true,\n            currentValue: currentPlaybackSpeedName.value,\n            onclick: item => showMenu(item.id),\n        },\n        {\n            id: 'stream',\n            title: $i18n.t('quality'),\n            visible: props.streams.length > 1,\n            hasSubmenu: true,\n            currentValue: currentStreamName.value,\n            onclick: item => showMenu(item.id),\n        },\n        {\n            id: 'audio',\n            title: $i18n.t('audio'),\n            icon: 'mdi-music-note',\n            hasSubmenu: true,\n            onclick: item => showMenu(item.id),\n            visible: props.audioTracks.length > 0,\n        },\n        {\n            id: 'spu',\n            title: $i18n.t('subtitles'),\n            icon: 'mdi-subtitles',\n            hasSubmenu: true,\n            onclick: item => showMenu(item.id),\n            visible: props.spuTracks.length > 0,\n        },\n        // {\n        //     id: 'sleep-timer',\n        //     title: 'Sleep Timer',\n        //     // icon: 'mdi-play-speed',\n        //     hasSubmenu: true,\n        //     // currentValue: currentPlaybackSpeedName.value,\n        //     onclick: item => showMenu(item.id),\n        // },\n        {\n            id: 'lock-screen',\n            title: $i18n.t('lock_screen'),\n            icon: 'mdi-lock',\n            visible: !isTv.value,\n            onclick: () => {\n                emit('lock-screen');\n                emit('cancel');\n            },\n        }\n    ],\n};\n\nconst menus = {\n    'playback-speed': {\n        title: null,\n        type: 'select',\n        selectedItem: props.playbackSpeed,\n        onclick: item => {\n            console.log(`set playback speed: ${item.id}`);\n            setRate(parseFloat(item.id));\n        },\n        items: [\n            {\n                id: '0.25',\n                title: '0.25x',\n            },\n            {\n                id: '0.5',\n                title: '0.5x',\n            },\n            {\n                id: '0.75',\n                title: '0.75x',\n            },\n            {\n                id: '1',\n                title: 'Normal',\n            },\n            {\n                id: '1.25',\n                title: '1.25x',\n            },\n            {\n                id: '1.5',\n                title: '1.5x',\n            },\n            {\n                id: '1.75',\n                title: '1.75x',\n            },\n            {\n                id: '2',\n                title: '2x',\n            },\n        ],\n    },\n    'stream': {\n        title: null,\n        type: 'select',\n        selectedItem: props.selectedStream,\n        onclick: item => {\n            console.log('click stream', item);\n            emit('select-stream', item);\n        },\n        items: props.streams.map(stream => {\n            return {\n                ...stream,\n                id: stream.index,\n                title: stream.name,\n            };\n        }),\n\n    },\n\n    'audio': {\n        title: 'Audio',\n        type: 'menu',\n        items: [\n            {\n                id: 'audio-track',\n                title: $i18n.t('audio_track'),\n                icon: 'mdi-music-note',\n                hasSubmenu: true,\n                currentValue: currentAudioTrackName.value,\n                onclick: item => showMenu(item.id),\n            },\n            {\n                id: 'audio-delay',\n                title: $i18n.t('audio_delay'),\n                hasSubmenu: true,\n                currentValue: currentAudioDelayName.value,\n                onclick: item => showMenu(item.id),\n            },\n        ],\n\n    },\n    'audio-track': {\n        title: null,\n        type: 'select',\n        selectedItem: props.selectedAudioTrack,\n        onclick: item => {\n            emit('select-audio-track', item);\n        },\n        items: props.audioTracks.map(track => {\n            return {\n                id: track.id,\n                title: track.name,\n            };\n        }),\n    },\n    'audio-delay': {\n        title: $i18n.t('audio_delay'),\n        type: 'select',\n        selectedItem: props.audioDelay,\n        onclick: item => {\n            console.log(`set audio delay: ${item.id}`);\n            setAudioDelay(parseInt(item.id));\n        },\n        items: [\n            {\n                id: '-1000',\n                title: '-1s',\n            },\n            {\n                id: '-500',\n                title: '-500ms',\n            },\n            {\n                id: '-400',\n                title: '-400ms',\n            },\n            {\n                id: '-300',\n                title: '-300ms',\n            },\n            {\n                id: '-200',\n                title: '-200ms',\n            },\n            {\n                id: '-100',\n                title: '-100ms',\n            },\n            {\n                id: '0',\n                title: '0ms',\n            },\n            {\n                id: '100',\n                title: '+100ms',\n            },\n            {\n                id: '200',\n                title: '+200ms',\n            },\n            {\n                id: '300',\n                title: '+300ms',\n            },\n            {\n                id: '400',\n                title: '+400ms',\n            },\n            {\n                id: '500',\n                title: '+500ms',\n            },\n            {\n                id: '1000',\n                title: '+1s',\n            },\n        ],\n    },\n\n    'spu': {\n        title: 'Subtitles',\n        type: 'menu',\n        items: [\n            {\n                id: 'spu-track',\n                title: $i18n.t('spu_track'),\n                icon: 'mdi-subtitles',\n                hasSubmenu: true,\n                currentValue: currentSpuTrackName.value,\n                onclick: item => showMenu(item.id),\n            },\n            {\n                id: 'spu-delay',\n                title: $i18n.t('spu_delay'),\n                hasSubmenu: true,\n                currentValue: currentSpuDelayName.value,\n                onclick: item => showMenu(item.id),\n            },\n        ],\n\n    },\n    'spu-track': {\n        title: null,\n        type: 'select',\n        selectedItem: props.selectedSpuTrack,\n        onclick: item => {\n            emit('select-spu-track', item);\n        },\n        items: props.spuTracks.map(track => {\n            return {\n                id: track.id,\n                title: track.name,\n            };\n        }),\n    \n    },\n    'spu-delay': {\n        title: $i18n.t('spu_delay'),\n        type: 'select',\n        selectedItem: props.spuDelay,\n        onclick: item => {\n            console.log(`set spu delay: ${item.id}`);\n            setSpuDelay(parseInt(item.id));\n        },\n        items: [\n            {\n                id: '-1000',\n                title: '-1s',\n            },\n            {\n                id: '-500',\n                title: '-500ms',\n            },\n            {\n                id: '-400',\n                title: '-400ms',\n            },\n            {\n                id: '-300',\n                title: '-300ms',\n            },\n            {\n                id: '-200',\n                title: '-200ms',\n            },\n            {\n                id: '-100',\n                title: '-100ms',\n            },\n            {\n                id: '0',\n                title: '0ms',\n            },\n            {\n                id: '100',\n                title: '+100ms',\n            },\n            {\n                id: '200',\n                title: '+200ms',\n            },\n            {\n                id: '300',\n                title: '+300ms',\n            },\n            {\n                id: '400',\n                title: '+400ms',\n            },\n            {\n                id: '500',\n                title: '+500ms',\n            },\n            {\n                id: '1000',\n                title: '+1s',\n            },\n        ],\n    },\n\n    // Sleep timer\n    'sleep-timer': {\n        title: null,\n        type: 'select',\n        // selectedItem: props.playbackSpeed,\n        onclick: item => {\n            console.log(`set sleep timer: ${item.id}`);\n            //TODO: implement\n            // setRate(parseFloat(item.id));\n        },\n        items: [\n            {\n                id: '15',\n                title: '15 minutes',\n            },\n            {\n                id: '30',\n                title: '30 minutes',\n            },\n            {\n                id: '45',\n                title: '45 minutes',\n            },\n            {\n                id: '60',\n                title: '1 hour',\n            },\n        ],\n    },\n\n};\n\nconst currentMenu = computed(() => {\n    let menu;\n    if(selectedMenu.value) {\n        menu = menus[selectedMenu.value];\n    } else {\n        menu = topMenu;\n    }\n\n    return Object.assign({}, menu, {\n        items: menu.items.filter(item => item.visible !== false),\n    });\n});\n\n\n// methods\nfunction showMenu(id) {\n    bodyVisible.value = false;\n    setTimeout(() => {\n        selectedMenu.value = id;\n        bodyVisible.value = true;\n    }, props.animationDuration);\n}\n\nfunction menuItemClicked(item) {\n    if(item.onclick) {\n        item.onclick(item);\n    } else if(currentMenu.value?.onclick) {\n        currentMenu.value.onclick(item);\n    }\n}\n\nfunction setRate(rate) {\n    emit('set-rate', rate);\n    emit('cancel');\n}\n\nfunction displayDelay(target) {\n    const item = delayModel.value[target];\n    return `${item.value}ms`\n}\n\nfunction decreaseDelay(target) {\n    updateDelay(target, -1);\n}\n\nfunction increaseDelay(target) {\n    updateDelay(target, 1);\n}\n\nfunction updateDelay(target, factor) {\n    const item= delayModel.value[target];\n    const newValue = item.value + factor * item.step;\n    setDelay(target, newValue);\n}\n\nfunction resetDelay(target) {\n    setDelay(target, delayModel.value[target].defaultValue);\n}\n\nfunction setAudioDelay(value) {\n    console.log(`setAudioDelay: value=${value}`)\n    emit('set-audio-delay', value);\n    emit('cancel');\n}\n\nfunction setSpuDelay(value) {\n    console.log(`setSpuDelay: value=${value}`)\n    emit('set-spu-delay', value);\n    emit('cancel');\n}\n\nfunction setDelay(target, value) {\n    delayModel.value[target].value = value;\n    emit('update-delay', target, value);\n}\n</script>\n\n<template>\n    <component\n        :is=\"isTv ? SidePanel : BottomSheet\"\n        v-bind=\"$attrs\"\n        v-on=\"$listeners\"\n        :bodyVisible=\"bodyVisible\"\n        :animationDuration=\"animationDuration\"\n        rounded\n        :title=\"currentMenu.title\"\n        :items=\"currentMenu.items\"\n        :selectedItemId=\"currentMenu.selectedItem\"\n        @item-clicked=\"menuItemClicked\"\n        >\n        <div slot-scope=\"slot\" @click=\"menuItemClicked(slot.item)\">\n            <!-- just menu item -->\n            <div class=\"item\" v-if=\"currentMenu.type == 'menu'\">\n                <div class=\"left-container\">\n                    <div class=\"icon-container\" v-if=\"!isTv\">\n                        <v-icon v-if=\"slot.item.icon\">\n                            {{ slot.item.icon  }}\n                        </v-icon>\n                    </div>\n                    <span class=\"item-name\">\n                        {{ slot.item.title }}\n                        <div class=\"current-value\" v-if=\"isTv && slot.item.currentValue\">\n                            {{ slot.item.currentValue }}\n                        </div>\n                    </span>\n                </div>\n\n                <div class=\"right-container\">\n                    <div class=\"current-value\" v-if=\"!isTv && slot.item.currentValue\">\n                        {{ slot.item.currentValue }}\n                    </div>\n                    <div class=\"submenu-marker\" v-if=\"slot.item.hasSubmenu\">\n                        <v-icon>\n                            mdi-chevron-right\n                        </v-icon>\n                    </div>\n                </div>\n            </div>\n\n            <!-- single choice list -->\n            <div class=\"item\" v-else-if=\"currentMenu.type == 'select'\">\n                <div class=\"left-container\">\n                    <div class=\"icon-container\">\n                        <v-icon v-if=\"slot.item.id == currentMenu.selectedItem\">\n                            mdi-check\n                        </v-icon>\n                    </div>\n                    <span class=\"item-name\">\n                        {{ slot.item.title }}\n                    </span>\n                </div>\n            </div>\n\n            <!-- delay selector -->\n            <div class=\"delay-container\" v-else-if=\"currentMenu.type == 'delay-selector'\">\n                <div class=\"delay-controls\">\n                    <v-btn icon @click=\"decreaseDelay(slot.item.target)\">\n                        <v-icon>\n                            mdi-minus\n                        </v-icon>\n                    </v-btn>\n\n                    <span class=\"selector-value\">\n                        {{ displayDelay(slot.item.target) }}\n                    </span>\n\n                    <v-btn icon @click=\"increaseDelay(slot.item.target)\">\n                        <v-icon>\n                            mdi-plus\n                        </v-icon>\n                    </v-btn>\n                </div>\n                <div class=\"delay-actions\">\n                    <v-btn text @click=\"resetDelay(slot.item.target)\">\n                        Reset\n                    </v-btn>\n                </div>\n            </div>\n        </div>\n    </component>\n</template>\n\n<style scoped lang=\"scss\">\n.item {\n    height: 56px;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n\n    .left-container, .right-container {\n        display: flex;\n        align-items: center;\n        justify-content: flex-start;\n    }\n\n    .current-value, .submenu-marker .v-icon {\n        color: rgba(255, 255, 255, 0.5);\n    }\n\n    .focused & .current-value, .focused & .v-icon {\n        color: #212121;\n    }\n\n    .icon-container {\n        box-sizing: content-box;\n        width: 24px;\n        height: 24px;\n        padding-right: 16px;\n    }\n}\n\n.delay-container {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n\n    .delay-controls {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n\n        .selector-value {\n            min-width: 128px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n        }\n    }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerMenu.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerMenu.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./PlayerMenu.vue?vue&type=template&id=7a6c15fc&scoped=true&\"\nimport script from \"./PlayerMenu.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./PlayerMenu.vue?vue&type=script&setup=true&lang=js&\"\nimport style0 from \"./PlayerMenu.vue?vue&type=style&index=0&id=7a6c15fc&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7a6c15fc\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return (_setup.isTv)?_c(_setup.TvPlaylist,{staticClass:\"playlist-sheet\",attrs:{\"playlist\":_vm.playlist,\"animationDuration\":_vm.animationDuration},on:{\"item-selected\":_setup.itemSelected,\"cancel\":function($event){return _vm.$emit('cancel')}}}):_c(_setup.BottomSheet,_vm._g(_vm._b({staticClass:\"playlist-sheet\",attrs:{\"title\":_vm.title,\"items\":_setup.items,\"animationDuration\":_vm.animationDuration,\"rounded\":\"\"},on:{\"cancel\":function($event){return _vm.$emit('cancel')}},scopedSlots:_vm._u([{key:\"default\",fn:function({ item }){return [_c('div',{staticClass:\"item\",on:{\"click\":function($event){return _setup.itemSelected(item)}}},[_c('div',{staticClass:\"left-container\"},[_c('div',{staticClass:\"item-title fade-text-right\",class:{'item-selected': item.id == _vm.playlist.position}},[_vm._v(\" \"+_vm._s(item.title)+\" \")])])])]}}])},'BottomSheet',_vm.$attrs,false),_vm.$listeners))\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"tv-playlist-overlay\"},[_c('div',{ref:\"containerRef\",staticClass:\"tv-playlist-container\"},[_c('div',{ref:\"headerRef\",staticClass:\"playlist-header\"},[_c('div',{staticClass:\"search-input-container\"},[_c('div',{directives:[{name:\"focus\",rawName:\"v-focus\",value:({\n                        id: _setup.SEARCH_INPUT_ID,\n                        enabled: true,\n                        onclick: _setup.focusSearchInput\n                    }),expression:\"{\\n                        id: SEARCH_INPUT_ID,\\n                        enabled: true,\\n                        onclick: focusSearchInput\\n                    }\"}],staticClass:\"search-input-focus\",attrs:{\"tabindex\":\"0\",\"role\":\"button\",\"data-focus-up\":_setup.filteredItems.length ? _setup.getItemId(_setup.filteredItems[_setup.filteredItems.length - 1].id) : _setup.SEARCH_INPUT_ID,\"data-focus-down\":_setup.filteredItems.length ? _setup.getItemId(_setup.filteredItems[0].id) : _setup.SEARCH_INPUT_ID,\"data-focus-right\":_setup.SEARCH_CLEAR_ID},on:{\"focus\":_setup.focusSearchInput,\"click\":_setup.focusSearchInput}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_setup.searchQuery),expression:\"searchQuery\"}],ref:\"inputRef\",staticClass:\"search-input\",attrs:{\"placeholder\":\"Search...\"},domProps:{\"value\":(_setup.searchQuery)},on:{\"focus\":_setup.onSearchFocus,\"blur\":_setup.onSearchBlur,\"keydown\":_setup.onSearchKeyDown,\"input\":function($event){if($event.target.composing)return;_setup.searchQuery=$event.target.value}}})]),_c('div',{directives:[{name:\"focus\",rawName:\"v-focus\",value:({\n                    id: _setup.SEARCH_CLEAR_ID,\n                    enabled: true,\n                    onclick: _setup.clearSearch\n                }),expression:\"{\\n                    id: SEARCH_CLEAR_ID,\\n                    enabled: true,\\n                    onclick: clearSearch\\n                }\"}],staticClass:\"search-clear-button\",attrs:{\"tabindex\":\"0\",\"role\":\"button\",\"data-focus-up\":_setup.filteredItems.length ? _setup.getItemId(_setup.filteredItems[_setup.filteredItems.length - 1].id) : _setup.SEARCH_INPUT_ID,\"data-focus-down\":_setup.filteredItems.length ? _setup.getItemId(_setup.filteredItems[0].id) : _setup.SEARCH_INPUT_ID,\"data-focus-left\":_setup.SEARCH_INPUT_ID},on:{\"click\":_setup.clearSearch}},[_c('v-icon',{attrs:{\"size\":\"20\"}},[_vm._v(\"mdi-close\")])],1),_c('div',{staticClass:\"item-divider\"})]),_vm._l((_setup.filteredItems),function(item,index){return _c('div',{directives:[{name:\"focus\",rawName:\"v-focus\",value:({ \n                id: _setup.getItemId(item.id), \n                enabled: true, \n                onclick: () => _setup.onItemClick(item) \n            }),expression:\"{ \\n                id: getItemId(item.id), \\n                enabled: true, \\n                onclick: () => onItemClick(item) \\n            }\"}],key:item.id,staticClass:\"playlist-item\",class:{ \n                'selected': item.id === _setup.props.playlist.position \n            },attrs:{\"tabindex\":\"0\",\"data-focus-up\":_setup.getFocusUpId(index),\"data-focus-down\":_setup.getFocusDownId(index)},on:{\"focus\":function($event){return _setup.onItemFocus($event.target)}}},[(item.state === 'PLAYING' || item.id === _setup.props.playlist.position )?_c('div',{staticClass:\"item-icon-container\"},[_c('v-icon',{attrs:{\"size\":\"20\"}},[_vm._v(\"mdi-play\")])],1):_vm._e(),_c('div',{staticClass:\"item-content\"},[_vm._v(\" \"+_vm._s(item.title)+\" \")]),(index < _setup.filteredItems.length - 1)?_c('div',{staticClass:\"item-divider\"}):_vm._e()])})],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script setup>\nimport { computed, ref, onMounted, onBeforeUnmount, nextTick, watch } from 'vue';\nimport { navigationService } from '@/common/src/plugins/focus';\n\nconst SEARCH_CLEAR_ID = 'tv-playlist-search-clear';\nconst SEARCH_INPUT_ID = 'tv-playlist-search-input';\n\n// props\nconst props = defineProps({\n    playlist: {\n        type: Object,\n        required: true,\n    },\n    animationDuration: {\n        type: Number,\n        default: 100,\n    },\n});\n\n// events\nconst emit = defineEmits([\n    'item-selected',\n    'cancel',\n]);\n\n// refs\nconst containerRef = ref(null);\nconst headerRef = ref(null);\nconst inputRef = ref(null);\nconst searchQuery = ref('');\n\n// computed\nconst baseItems = computed(() => {\n    return props.playlist.items.map((item, index) => {\n        return {\n            id: index,\n            title: item.title,\n            state: item.state,\n            uri: item.url,\n        };\n    });\n});\n\nconst filteredItems = computed(() => {\n    const q = (searchQuery.value || '').trim().toLowerCase();\n    if (!q) {\n        return baseItems.value;\n    }\n    return baseItems.value.filter((item) => (item.title || '').toLowerCase().includes(q));\n});\n\n// methods\nfunction getItemId(itemId) {\n    return `tv-playlist-item-${itemId}`;\n}\n\nfunction getFocusUpId(index) {\n    if (index === 0) {\n        // First visible item -> search input\n        return SEARCH_INPUT_ID;\n    }\n    return getItemId(filteredItems.value[index - 1].id);\n}\n\nfunction getFocusDownId(index) {\n    if (index === filteredItems.value.length - 1) {\n        // Last visible item -> search input\n        return SEARCH_INPUT_ID;\n    }\n    return getItemId(filteredItems.value[index + 1].id);\n}\n\nfunction onItemClick(item) {\n    emit('item-selected', item, item.id);\n}\n\nfunction onItemFocus(element) {\n    if (!containerRef.value || !element) {\n        return;\n    }\n\n    const container = containerRef.value;\n    const headerHeight = headerRef.value?.offsetHeight || 0;\n\n    // Calculate the position of the item relative to the container\n    const itemTop = element.offsetTop;\n    const itemHeight = element.offsetHeight;\n    const containerHeight = container.clientHeight;\n\n    // Center within the visible area excluding the sticky header\n    const visibleHeight = Math.max(0, containerHeight - headerHeight);\n    const targetScrollTop =\n        (itemTop - headerHeight) + (itemHeight / 2) - (visibleHeight / 2);\n\n    // Clamp to valid scroll range\n    const maxScrollTop = container.scrollHeight - containerHeight;\n    const clampedScrollTop = Math.max(0, Math.min(targetScrollTop, maxScrollTop));\n\n    // Scroll with smooth animation\n    container.scrollTo({\n        top: clampedScrollTop,\n        behavior: 'smooth'\n    });\n}\n\nfunction onKeyDown(e) {\n    if (e.code === 'Escape') {\n        cancel();\n    }\n}\n\nfunction onBackPressed() {\n    cancel();\n}\n\nfunction cancel() {\n    emit('cancel');\n}\n\nfunction onSearchFocus() {\n    navigationService.setActive(false);\n    navigationService.pause();\n}\n\nfunction focusSearchInput() {\n    // Transfer focus from navigation focus-target to the real input.\n    // Also blur the focus-target element so it won't keep intercepting key events.\n    navigationService.setActive(false);\n    navigationService.pause();\n    setTimeout(() => {\n        inputRef.value?.focus();\n        navigationService.findById(SEARCH_INPUT_ID)?.blur();\n    }, 0);\n}\n\nfunction ensureOverlayFocus() {\n    const focused = navigationService.findFocusedElement();\n    if (focused) {\n        return;\n    }\n\n    const first = filteredItems.value[0];\n    const firstFocus = first ? navigationService.findById(getItemId(first.id)) : null;\n    if (firstFocus && firstFocus.canFocus()) {\n        firstFocus.focus();\n        return;\n    }\n\n    const inputFocus = navigationService.findById(SEARCH_INPUT_ID);\n    if (inputFocus && inputFocus.canFocus()) {\n        inputFocus.focus();\n        return;\n    }\n\n    const clearFocus = navigationService.findById(SEARCH_CLEAR_ID);\n    if (clearFocus && clearFocus.canFocus()) {\n        clearFocus.focus();\n    }\n}\n\nfunction onSearchBlur() {\n    navigationService.setActive(true);\n    navigationService.resume();\n    nextTick(() => {\n        ensureOverlayFocus();\n    });\n}\n\nfunction onSearchKeyDown(e) {\n    // While editing, allow arrow keys to leave the input and resume TV navigation.\n    if (e.key !== 'ArrowDown' && e.key !== 'ArrowUp' && e.key !== 'ArrowRight' && e.key !== 'ArrowLeft') {\n        return;\n    }\n\n    e.preventDefault();\n\n    let targetId = null;\n    if (e.key === 'ArrowRight') {\n        targetId = SEARCH_CLEAR_ID;\n    } else if (e.key === 'ArrowDown') {\n        targetId = filteredItems.value.length ? getItemId(filteredItems.value[0].id) : SEARCH_CLEAR_ID;\n    } else if (e.key === 'ArrowUp') {\n        targetId = filteredItems.value.length ? getItemId(filteredItems.value[filteredItems.value.length - 1].id) : SEARCH_CLEAR_ID;\n    } else if (e.key === 'ArrowLeft') {\n        targetId = null;\n    }\n\n    inputRef.value?.blur();\n    navigationService.setActive(true);\n    navigationService.resume();\n    nextTick(() => {\n        if (targetId) {\n            navigationService.findById(targetId)?.focus();\n        } else {\n            navigationService.findById(SEARCH_INPUT_ID)?.focus();\n        }\n    });\n}\n\nfunction clearSearch() {\n    searchQuery.value = '';\n    nextTick(() => {\n        inputRef.value?.focus();\n    });\n}\n\nfunction bindEvents() {\n    window.addEventListener('keydown', onKeyDown);\n    window.addEventListener('customBackPressed', onBackPressed);\n}\n\nfunction unbindEvents() {\n    window.removeEventListener('keydown', onKeyDown);\n    window.removeEventListener('customBackPressed', onBackPressed);\n}\n\nfunction setDefaultFocus() {\n    const selectedItemId = getSelectedItemIndex();\n    console.log(`qqq:setDefaultFocus: index=${selectedItemId}`);\n\n    nextTick(() => {\n        let targetId = null;\n\n        if (selectedItemId !== -1) {\n            const visibleIndex = filteredItems.value.findIndex((it) => it.id === selectedItemId);\n            if (visibleIndex !== -1) {\n                targetId = getItemId(filteredItems.value[visibleIndex].id);\n            }\n        }\n\n        if (!targetId && filteredItems.value.length > 0) {\n            targetId = getItemId(filteredItems.value[0].id);\n        }\n\n        if (targetId) {\n            const focusEl = navigationService.findById(targetId);\n            if (focusEl) {\n                onItemFocus(focusEl.el);\n                focusEl.focus();\n            }\n        } else {\n            navigationService.findById(SEARCH_INPUT_ID)?.focus();\n        }\n    });\n}\n\nfunction getSelectedItemIndex() {\n    if (props.playlist.position !== undefined && props.playlist.position !== null) {\n        return props.playlist.position;\n    } else if (filteredItems.value.length > 0) {\n        return 0;\n    } else {\n        return -1;\n    }\n}\n\n// lifecycle\nonMounted(() => {\n    bindEvents();\n    setDefaultFocus();\n});\n\nonBeforeUnmount(() => {\n    unbindEvents();\n});\n\nwatch(searchQuery, () => {\n    if (navigationService.isPaused()) {\n        return;\n    }\n    nextTick(() => {\n        ensureOverlayFocus();\n    });\n});\n</script>\n\n<template>\n    <div class=\"tv-playlist-overlay\">\n        <div ref=\"containerRef\" class=\"tv-playlist-container\">\n            <div ref=\"headerRef\" class=\"playlist-header\">\n                <div class=\"search-input-container\">\n                    <div\n                        class=\"search-input-focus\"\n                        tabindex=\"0\"\n                        role=\"button\"\n                        :data-focus-up=\"filteredItems.length ? getItemId(filteredItems[filteredItems.length - 1].id) : SEARCH_INPUT_ID\"\n                        :data-focus-down=\"filteredItems.length ? getItemId(filteredItems[0].id) : SEARCH_INPUT_ID\"\n                        :data-focus-right=\"SEARCH_CLEAR_ID\"\n                        v-focus=\"{\n                            id: SEARCH_INPUT_ID,\n                            enabled: true,\n                            onclick: focusSearchInput\n                        }\"\n                        @focus=\"focusSearchInput\"\n                        @click=\"focusSearchInput\"\n                    ></div>\n                    <input\n                        ref=\"inputRef\"\n                        class=\"search-input\"\n                        v-model=\"searchQuery\"\n                        placeholder=\"Search...\"\n                        @focus=\"onSearchFocus\"\n                        @blur=\"onSearchBlur\"\n                        @keydown=\"onSearchKeyDown\"\n                    />\n                </div>\n                <div\n                    class=\"search-clear-button\"\n                    tabindex=\"0\"\n                    role=\"button\"\n                    :data-focus-up=\"filteredItems.length ? getItemId(filteredItems[filteredItems.length - 1].id) : SEARCH_INPUT_ID\"\n                    :data-focus-down=\"filteredItems.length ? getItemId(filteredItems[0].id) : SEARCH_INPUT_ID\"\n                    :data-focus-left=\"SEARCH_INPUT_ID\"\n                    v-focus=\"{\n                        id: SEARCH_CLEAR_ID,\n                        enabled: true,\n                        onclick: clearSearch\n                    }\"\n                    @click=\"clearSearch\"\n                >\n                    <v-icon size=\"20\">mdi-close</v-icon>\n                </div>\n                <div class=\"item-divider\"></div>\n            </div>\n            <div \n                v-for=\"(item, index) in filteredItems\" \n                :key=\"item.id\"\n                class=\"playlist-item\"\n                tabindex=\"0\"\n                :class=\"{ \n                    'selected': item.id === props.playlist.position \n                }\"\n                v-focus=\"{ \n                    id: getItemId(item.id), \n                    enabled: true, \n                    onclick: () => onItemClick(item) \n                }\"\n                :data-focus-up=\"getFocusUpId(index)\"\n                :data-focus-down=\"getFocusDownId(index)\"\n                @focus=\"onItemFocus($event.target)\"\n            >\n                <div class=\"item-icon-container\" v-if=\"item.state === 'PLAYING' || item.id === props.playlist.position \">\n                    <v-icon size=\"20\">mdi-play</v-icon>\n                </div>\n                <div class=\"item-content\">\n                    {{ item.title }}\n                </div>\n                <div class=\"item-divider\" v-if=\"index < filteredItems.length - 1\"></div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<style scoped lang=\"scss\">\n.tv-playlist-overlay {\n    position: fixed;\n    top: 10%;\n    left: 10%;\n    width: 80%;\n    height: 80%;\n    z-index: 100;\n    background-color: rgba(0, 0, 0, 0.6);\n}\n\n.tv-playlist-container {\n    width: 100%;\n    max-width: 100%;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    overflow-y: auto;\n    overflow-x: hidden;\n}\n\n.playlist-header {\n    position: sticky;\n    top: 0;\n    z-index: 1;\n    width: 100%;\n    min-height: 64px;\n    display: flex;\n    align-items: center;\n    padding: 16px 24px;\n    background-color: rgba(0, 0, 0, 0.6);\n    color: rgba(255, 255, 255, 0.6);\n    box-sizing: border-box;\n\n    .search-input-container {\n        position: relative;\n        width: 100%;\n    }\n\n    .search-input-focus {\n        position: absolute;\n        inset: 0;\n        border-radius: 6px;\n        outline: none;\n    }\n\n    .search-input {\n        width: 100%;\n        height: 32px;\n        padding: 4px 10px;\n        border-radius: 6px;\n        border: 1px solid rgba(255, 255, 255, 0.25);\n        background: rgba(0, 0, 0, 0.35);\n        color: rgba(255, 255, 255, 0.95);\n        outline: none;\n        font-size: 16px;\n\n        &::placeholder {\n            color: rgba(255, 255, 255, 0.45);\n        }\n\n        &:focus {\n            border-color: rgba(255, 255, 255, 0.6);\n        }\n    }\n\n    .search-input-focus.focus + .search-input {\n        border-color: rgba(255, 255, 255, 0.6);\n    }\n\n    .search-clear-button {\n        margin-left: 12px;\n        width: 40px;\n        height: 40px;\n        flex-shrink: 0;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 8px;\n        outline: none;\n        cursor: pointer;\n\n        &.focus {\n            background-color: #ffffff;\n            color: #212121;\n\n            .v-icon {\n                color: black !important;\n            }\n        }\n    }\n\n    .item-divider {\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        height: 1px;\n        background-color: rgba(255, 255, 255, 0.3);\n    }\n}\n\n.playlist-item {\n    position: relative;\n    width: 100%;\n    min-height: 64px;\n    display: flex;\n    align-items: center;\n    padding: 16px 24px;\n    outline: none;\n    cursor: pointer;\n    background-color: transparent;\n    color: rgba(255, 255, 255, 0.6);\n\n    &.focus {\n        background-color: #ffffff;\n        color: #212121;\n\n        .item-icon-container {\n            .v-icon {\n                color: black !important;\n            }\n        }\n    }\n\n    &.selected:not(.focus) {\n        color: rgba(255, 255, 255, 1);\n    }\n\n    .item-icon-container {\n        flex-shrink: 0;\n        width: 24px;\n        height: 24px;\n        margin-right: 12px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n\n        .v-icon {\n            color: white !important;\n        }\n    }\n\n    .item-content {\n        width: 100%;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        font-size: 18px;\n    }\n\n    .item-divider {\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        height: 1px;\n        background-color: rgba(255, 255, 255, 0.3);\n    }\n}\n</style>\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TvPlaylist.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TvPlaylist.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./TvPlaylist.vue?vue&type=template&id=9f381968&scoped=true&\"\nimport script from \"./TvPlaylist.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./TvPlaylist.vue?vue&type=script&setup=true&lang=js&\"\nimport style0 from \"./TvPlaylist.vue?vue&type=style&index=0&id=9f381968&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9f381968\",\n  null\n  \n)\n\nexport default component.exports","<script setup>\nimport { computed, onMounted } from 'vue';\nimport { useMainStore } from '@/stores/main';\nimport BottomSheet from '@/components/BottomSheet.vue';\nimport TvPlaylist from '@/components/TvPlaylist.vue';\n\n// props\nconst props = defineProps({\n    title: {\n        type: String,\n    },\n    playlist: {\n        type: Object,\n    },\n    animationDuration: {\n        type: Number,\n        default: 200,\n    },\n});\n\n// events\nconst emit = defineEmits([\n    'item-selected',\n    'cancel',\n]);\n\n// stores\nconst mainStore = useMainStore();\n\n// computed\nconst isTv = computed(() => mainStore.isTv);\n\nconst items = computed(() => {\n    return props.playlist.items.map((item, index) => {\n        return {\n            id: index,\n            title: item.title,\n        };\n    });\n\n});\n\n// lifecycle\nonMounted(() => {\n    if(!isTv.value) {\n        // Ensure that current playlist item is visible on smartphone.\n        // On TV navigation service is responsible for this.\n        const selectedItem = document.querySelector('.playlist-sheet .item .item-selected');\n        if(selectedItem) {\n            selectedItem.scrollIntoView();\n        }\n    }\n});\n\n// methods\nfunction itemSelected(item) {\n    emit('item-selected', item, item.id);\n}\n</script>\n\n<template>\n    <TvPlaylist\n        v-if=\"isTv\"\n        class=\"playlist-sheet\"\n        :playlist=\"playlist\"\n        :animationDuration=\"animationDuration\"\n        @item-selected=\"itemSelected\"\n        @cancel=\"$emit('cancel')\"\n    />\n    <BottomSheet\n        v-else\n        class=\"playlist-sheet\"\n        v-bind=\"$attrs\"\n        v-on=\"$listeners\"\n        :title=\"title\"\n        :items=\"items\"\n        :animationDuration=\"animationDuration\"\n        rounded\n        @cancel=\"$emit('cancel')\"\n    >\n        <template #default=\"{ item }\">\n            <div class=\"item\" @click=\"itemSelected(item)\">\n                <div class=\"left-container\">\n                    <div class=\"item-title fade-text-right\" :class=\"{'item-selected': item.id == playlist.position}\">\n                        {{ item.title }}\n                    </div>\n                </div>\n            </div>\n        </template>\n    </BottomSheet>\n</template>\n\n<style scoped lang=\"scss\">\n.item {\n    height: 56px;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    width: 100%;\n    overflow: hidden;\n\n    .left-container, .right-container {\n        width: 100%;\n        display: flex;\n        align-items: center;\n        justify-content: flex-start;\n    }\n\n    .item-title {\n        width: 100%;\n        white-space: nowrap;\n        color: rgba(255, 255, 255, 0.5);\n\n        .focused & {\n            color: #212121 !important;\n        }\n        \n        &.item-selected {\n            color: rgba(255, 255, 255, 1);\n        }\n    }\n\n    .icon-container {\n        box-sizing: content-box;\n        width: 24px;\n        height: 24px;\n        padding-right: 16px;\n    }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaylistSheet.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaylistSheet.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./PlaylistSheet.vue?vue&type=template&id=2b2549a2&scoped=true&\"\nimport script from \"./PlaylistSheet.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./PlaylistSheet.vue?vue&type=script&setup=true&lang=js&\"\nimport style0 from \"./PlaylistSheet.vue?vue&type=style&index=0&id=2b2549a2&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2b2549a2\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c(_setup.isTv ? _setup.SidePanel : _setup.BottomSheet,_vm._g(_vm._b({tag:\"component\",staticClass:\"resize-video-sheet\",attrs:{\"rounded\":\"\",\"items\":_setup.menuItems,\"selectedItemId\":_vm.currentVideoSize},on:{\"item-clicked\":_setup.menuItemClicked},scopedSlots:_vm._u([{key:\"default\",fn:function(slot){return _c('div',{staticClass:\"item\",class:`item-${slot.item.type}`,on:{\"click\":function($event){return _setup.menuItemClicked(slot.item)}}},[(slot.item.type == 'displayUnderNotch')?[_c('div',{staticClass:\"icon-container\"},[(_vm.displayUnderNotch)?_c('v-icon',[_vm._v(\" mdi-check \")]):_vm._e()],1),_c('span',{staticClass:\"item-name\"},[_vm._v(\" \"+_vm._s(slot.item.name)+\" \")])]:(slot.item.type == 'groupTitle')?[_vm._v(\" \"+_vm._s(slot.item.name)+\" \")]:(slot.item.type == 'videoSize')?[_c('div',{staticClass:\"icon-container\",class:{'item-selected': slot.item.id == _vm.currentVideoSize}},[(slot.item.id == _vm.currentVideoSize)?_c('v-icon',[_vm._v(\" mdi-check \")]):_vm._e()],1),_c('span',{staticClass:\"item-name\"},[_vm._v(\" \"+_vm._s(slot.item.name)+\" \")])]:_vm._e()],2)}}])},'component',_vm.$attrs,false),_vm.$listeners))\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script setup>\nimport { computed, getCurrentInstance, onMounted } from 'vue';\nimport { useMainStore } from '@/stores/main';\nimport BottomSheet from '@/components/BottomSheet.vue';\nimport SidePanel from '@/common/src/components/SidePanel.vue';\nimport { getVideoSizeName, VideoSize } from '@/pages/player/video-size';\n\n// i18n\nconst $i18n = getCurrentInstance().proxy.$i18n;\n\n// props\nconst props = defineProps({\n    currentVideoSize: {\n        type: Number,\n        default: -1,\n    },\n    displayUnderNotch: {\n        type: Boolean,\n        default: true,\n    },\n    hasNotch: {\n        type: Boolean,\n        default: false,\n    },\n});\n\n// stores\nconst mainStore = useMainStore();\n\n// computed\nconst isTv = computed(() => mainStore.isTv);\nconst menuItems = computed(() => {\n    const items = Object.values(VideoSize).map(videoSize => {\n        return {\n            id: videoSize,\n            type: 'videoSize',\n            name: getVideoSizeName($i18n, videoSize),\n        }\n    });\n\n    items.unshift({\n        type: 'groupTitle',\n        name: $i18n.t('aspect_ratio'),\n    });\n\n    if(props.hasNotch) {\n        items.unshift({\n            type: 'displayUnderNotch',\n            name: $i18n.t('player_under_notch'),\n        });\n\n        items.unshift({\n            type: 'groupTitle',\n            name: $i18n.t('notch'),\n        });\n    }\n\n    return items;\n});\n\n// events\nconst emit = defineEmits([\n    'on-video-size',\n    'on-display-under-notch',\n]);\n\n// lifecycle\nonMounted(() => {\n    if(!isTv.value) {\n        // Ensure that current selected item is visible on smartphone.\n        // On TV navigation service is responsible for this.\n\n        //NOTE: disabled for now because it scrolls even when the selected item is already visible\n        // const selectedItem = document.querySelector('.resize-video-sheet .item .item-selected');\n        // if(selectedItem) {\n        //     selectedItem.scrollIntoView();\n        // }\n    }\n});\n\n// methods\nfunction menuItemClicked(item) {\n    console.log('menuItemClicked', item);\n    if(item.type == 'videoSize') {\n        emit('on-video-size', item.id);\n        emit('cancel');\n    } else if(item.type == 'displayUnderNotch') {\n        emit('on-display-under-notch', !props.displayUnderNotch);\n        emit('cancel');\n    }\n}\n</script>\n\n<template>\n    <component\n        class=\"resize-video-sheet\"\n        :is=\"isTv ? SidePanel : BottomSheet\"\n        v-bind=\"$attrs\"\n        v-on=\"$listeners\"\n        rounded\n        :items=\"menuItems\"\n        :selectedItemId=\"currentVideoSize\"\n        @item-clicked=\"menuItemClicked\"\n        >\n        <div\n            class=\"item\"\n            :class=\"`item-${slot.item.type}`\"\n            slot-scope=\"slot\" @click=\"menuItemClicked(slot.item)\"\n            >\n            <template v-if=\"slot.item.type == 'displayUnderNotch'\">\n                <div class=\"icon-container\">\n                    <v-icon v-if=\"displayUnderNotch\">\n                        mdi-check\n                    </v-icon>\n                </div>\n                <span class=\"item-name\">\n                    {{ slot.item.name }}\n                </span>\n            </template>\n            <template v-else-if=\"slot.item.type == 'groupTitle'\">\n                {{ slot.item.name }}\n            </template>\n            <template v-else-if=\"slot.item.type == 'videoSize'\">\n                <div class=\"icon-container\" :class=\"{'item-selected': slot.item.id == currentVideoSize}\">\n                    <v-icon v-if=\"slot.item.id == currentVideoSize\">\n                        mdi-check\n                    </v-icon>\n                </div>\n                <span class=\"item-name\">\n                    {{ slot.item.name }}\n                </span>\n            </template>\n        </div>\n    </component>\n</template>\n\n<style scoped lang=\"scss\">\n$mutedColor: rgba(255, 255, 255, 0.5);\n\n.item {\n    height: 40px;\n    display: flex;\n    align-items: center;\n    justify-content: flex-start;\n    cursor: default;\n\n    .icon-container {\n        box-sizing: content-box;\n        width: 24px;\n        height: 24px;\n        padding-right: 16px;\n    }\n\n    &.item-divider {\n        height: 1px;\n        border-bottom: 1px solid $mutedColor;\n    }\n\n    &.item-groupTitle {\n        color: $mutedColor;\n    }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResizeVideoMenu.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResizeVideoMenu.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./ResizeVideoMenu.vue?vue&type=template&id=1dca102b&scoped=true&\"\nimport script from \"./ResizeVideoMenu.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./ResizeVideoMenu.vue?vue&type=script&setup=true&lang=js&\"\nimport style0 from \"./ResizeVideoMenu.vue?vue&type=style&index=0&id=1dca102b&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1dca102b\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"external-page-container fill-height\"},[_c('iframe',{ref:\"iframeRef\",attrs:{\"src\":_vm.url}})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script setup>\nimport { computed, onBeforeUnmount, onMounted, ref } from 'vue';\nimport { AceStreamApp } from \"@/lib/app\";\nimport { navigationService } from \"@/common/src/plugins/focus\";\n\nconst props = defineProps(['url', 'closeOnBack']);\nconst emit = defineEmits([\"close\"]);\n\n// refs\nconst iframeRef = ref(null);\n\n// computed\nconst targetOrigin = computed(() => {\n    const urlObject = new URL(props.url);\n    return urlObject.origin;\n});\n\n// lifecycle\nonMounted(() => {\n    bindEvents();\n    navigationService.pause();\n});\n\nonBeforeUnmount(() => {\n    unbindEvents();\n    navigationService.resume();\n});\n\n// methods\nasync function frameEventListener(event) {\n    // security check\n    if (event.origin !== targetOrigin.value) {\n        console.error(`iframe-event: block event from unknown origin: ${event.origin}`)\n        return;\n    }\n\n    // for testing\n    console.log(`iframe-event: ${JSON.stringify(event.data)}`);\n\n    if (!event.data.type) {\n        console.error(`iframe-event: missing event type`)\n        return;\n    }\n\n    switch (event.data.type) {\n        case 'ready':\n            break\n\n        case 'close':\n            close()\n            break\n\n        case 'openIntent': {\n            const data = event.data.data;\n            AceStreamApp.startActivity({\n                action: data.action,\n                category: data.category,\n                data: data.data,\n                type: data.type,\n            });\n            break;\n        }\n\n        case 'openBrowser': {\n            const data = event.data.data;\n            AceStreamApp.openBrowser({\n                url: data.url,\n            });\n            break;\n        }\n\n        case 'installFromMarket': {\n            const data = event.data.data;\n            AceStreamApp.installFromMarket({\n                packageId: data.packageId,\n            });\n            break;\n        }\n\n        default:\n            console.error(`iframe-event: unknown event: ${event.data.type}`)\n            break\n    }\n}\n\nfunction keyboardEventListener(event) {\n    sendFrameMessage({\n        type: event.type,\n        key: event.key,\n        code: event.code,\n    })\n}\n\nfunction sendFrameMessage(msg) {\n    if (!iframeRef.value) {\n        console.error(`sendFrameMessage: missing iframe`);\n        return\n    }\n\n    iframeRef.value.contentWindow.postMessage(msg, targetOrigin.value);\n}\n\nfunction bindEvents() {\n    window.addEventListener('message', frameEventListener);\n    window.addEventListener('keydown', keyboardEventListener);\n    window.addEventListener('keyup', keyboardEventListener);\n}\n\nfunction unbindEvents() {\n    window.removeEventListener('message', frameEventListener);\n    window.removeEventListener('keydown', keyboardEventListener);\n    window.removeEventListener('keyup', keyboardEventListener);\n}\n\nfunction close() {\n    emit('close');\n}\n</script>\n\n<template>\n    <div class=\"external-page-container fill-height\">\n        <iframe :src=\"url\" ref=\"iframeRef\"></iframe>\n    </div>\n</template>\n\n<style scoped lang=\"scss\">\n.external-page-container {\n    position: fixed;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 100;\n    background-color: black;\n\n    iframe {\n        width: 100%;\n        height: 100%;\n        border: 0;\n    }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExternalPage.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExternalPage.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./ExternalPage.vue?vue&type=template&id=e9bc123a&scoped=true&\"\nimport script from \"./ExternalPage.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./ExternalPage.vue?vue&type=script&setup=true&lang=js&\"\nimport style0 from \"./ExternalPage.vue?vue&type=style&index=0&id=e9bc123a&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e9bc123a\",\n  null\n  \n)\n\nexport default component.exports","import { loadImaSdk } from \"@glomex/vast-ima-player\";\n\nconst listeners = {};\nlet adsManagers = {};\n\n//TODO: move all global variables to the state\nconst STATE = {};\n\nlet videoElement;\nlet adContainer;\nlet adDisplayContainer;\nlet sizeReferenceContainer;\nlet adsLoader;\nlet adsManager;\nlet imaInitialized = false;\n\nfunction hideLoader() {\n  const loader = document.getElementById(\"loader\");\n  if (loader) {\n    loader.style.display = \"none\";\n  }\n}\n\n// function showLoader() {\n//   const loader = document.getElementById('loader')\n//   if (loader) {\n//     loader.style.display = 'block'\n//   }\n// }\n\nasync function notifyRequestCompleted(requestId) {\n  try {\n    console.log(`notifyRequestCompleted`);\n    fireEvent(\"ima_sdk_request_completed\", { requestId });\n  } catch (e) {\n    console.log(`notifyRequestCompleted:failed: ${e.message}`);\n  }\n}\n\nasync function notifyRequestFailed(requestId, errorMessage) {\n  try {\n    console.log(`notifyRequestFailed`);\n    fireEvent(\"ima_sdk_request_failed\", { requestId, errorMessage });\n  } catch (e) {\n    console.log(`notifyRequestFailed:failed: ${e.message}`);\n  }\n}\n\nasync function notifyEvent(requestId, adsManager, eventName) {\n  try {\n    console.log(`notifyEvent: name=${eventName}`);\n    if (eventName === \"STARTED\") {\n      hideLoader();\n      if (STATE.activity?.paused()) {\n        adsManager.pause();\n      }\n    } else if (eventName === 'PAUSED') {\n      if (!STATE.activity?.paused()) {\n        console.log(`AS/ISW: force unpause`)\n        adsManager.resume()\n      }\n    }\n    fireEvent(\"ima_sdk_ad_event\", { requestId, eventName });\n  } catch (e) {\n    console.log(`notifyEvent:failed: ${e.message}`);\n  }\n}\n\nasync function notifyError(requestId, errorMessage) {\n  try {\n    console.log(`notifyError: ${errorMessage}`);\n    fireEvent(\"ima_sdk_ad_error\", { requestId, errorMessage });\n  } catch (e) {\n    console.log(`notifyError:failed: ${e.message}`);\n  }\n}\n\nasync function initializeIMA(videoPlayerElement, adContainerElement) {\n  await loadImaSdk();\n\n  videoElement = videoPlayerElement;\n  adContainer = adContainerElement;\n\n  console.log(\n    `initializing IMA: video=${videoElement} adContainer=${adContainer}`\n  );\n\n  if (!videoElement || !adContainer) {\n    console.log(\"ima: no ad container\");\n    return;\n  }\n\n  if (!window.google) {\n    console.log(\"ima: failed to init sdk\");\n    return;\n  }\n\n  adDisplayContainer = new window.google.ima.AdDisplayContainer(\n    adContainer,\n    videoElement\n  );\n  adsLoader = new window.google.ima.AdsLoader(adDisplayContainer);\n  adsLoader.getSettings().setAutoPlayAdBreaks(false);\n  // Should we call this here?\n  adDisplayContainer.initialize();\n\n  adsLoader.addEventListener(\n    window.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,\n    onAdsManagerLoaded,\n    false\n  );\n  adsLoader.addEventListener(\n    window.google.ima.AdErrorEvent.Type.AD_ERROR,\n    onAdLoaderError,\n    false\n  );\n\n  imaInitialized = true;\n}\n\nfunction setupImaSdkEventListeners(requestId, adsManager) {\n  adsManager.addEventListener(\n    window.google.ima.AdErrorEvent.Type.AD_ERROR,\n    (event) => onAdManagerError(requestId, event)\n  );\n\n  const events = {\n    STARTED: window.google.ima.AdEvent.Type.STARTED,\n    IMPRESSION: window.google.ima.AdEvent.Type.IMPRESSION,\n    PAUSED: window.google.ima.AdEvent.Type.PAUSED,\n    RESUMED: window.google.ima.AdEvent.Type.RESUMED,\n    COMPLETE: window.google.ima.AdEvent.Type.COMPLETE,\n    USER_CLOSE: window.google.ima.AdEvent.Type.USER_CLOSE,\n    LOADED: window.google.ima.AdEvent.Type.LOADED,\n    ALL_ADS_COMPLETED: window.google.ima.AdEvent.Type.ALL_ADS_COMPLETED,\n    AD_BREAK_FETCH_ERROR: window.google.ima.AdEvent.Type.AD_BREAK_FETCH_ERROR,\n    AD_BREAK_READY: window.google.ima.AdEvent.Type.AD_BREAK_READY,\n    LOG: window.google.ima.AdEvent.Type.LOG,\n    SKIPPED: window.google.ima.AdEvent.Type.SKIPPED,\n    CONTENT_PAUSE_REQUESTED:\n      window.google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,\n    CONTENT_RESUME_REQUESTED:\n      window.google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,\n  };\n\n  for (const [eventName, eventId] of Object.entries(events)) {\n    adsManager.addEventListener(eventId, () =>\n      notifyEvent(requestId, adsManager, eventName)\n    );\n  }\n}\n\nasync function onAdsManagerLoaded(adsManagerLoadedEvent) {\n  const context = adsManagerLoadedEvent.getUserRequestContext();\n  console.log(`ima:onAdsManagerLoaded: requestId=${context.requestId}`);\n\n  // Instantiate the AdsManager from the adsLoader response and pass it the video element\n  adsManager = adsManagerLoadedEvent.getAdsManager(videoElement);\n  adsManagers[context.requestId] = adsManager;\n\n  setupImaSdkEventListeners(context.requestId, adsManager);\n  notifyRequestCompleted(context.requestId);\n}\n\nfunction onAdLoaderError(adErrorEvent) {\n  const context = adErrorEvent.getUserRequestContext();\n  notifyRequestFailed(\n    context.requestId,\n    \"ima:error: \" + adErrorEvent.getError()\n  );\n}\n\nfunction onAdManagerError(requestId, adErrorEvent) {\n  notifyError(requestId, \"ima:error: \" + adErrorEvent.getError());\n  removeAdManager(requestId);\n}\n\n// eslint-disable-next-line no-unused-vars\nfunction requestAds(requestId, adTagUrl, vastLoadTimeout) {\n  try {\n    if (!imaInitialized) {\n      throw new Error(\"ima: sdk is not initialized\");\n    }\n\n    const adsRequest = new window.google.ima.AdsRequest();\n    adsRequest.adTagUrl = adTagUrl;\n\n    // Pass the request to the adsLoader to request ads\n    adsLoader.requestAds(adsRequest, { requestId });\n  } catch (e) {\n    notifyError(requestId, `requestAds:error: ${e.message}`);\n  }\n}\n\nfunction initAdsManager(requestId) {\n  const width = sizeReferenceContainer?.clientWidth || window.innerWidth;\n  const height = sizeReferenceContainer?.clientHeight || window.innerHeight;\n\n  console.log(\n    `ima:initAdsManager: requestId=${requestId} width=${width} height=${height}`\n  );\n\n  // Initialize the container. Must be done via a user action on mobile devices.\n  // adDisplayContainer.initialize();\n  try {\n    adsManager.init(width, height, window.google.ima.ViewMode.NORMAL);\n  } catch (adError) {\n    // Play the video without ads, if an error occurs\n    notifyError(requestId, \"ima:AdsManager could not be started\");\n  }\n}\n\nfunction startAdsManager(requestId) {\n  console.log(`ima:startAdsManager: requestId=${requestId}`);\n  adsManager.start();\n}\n\nfunction addListener(event, listener) {\n  if (listeners[event] === undefined) {\n    listeners[event] = [];\n  }\n  listeners[event].push(listener);\n}\n\nfunction fireEvent(event, params) {\n  if (listeners[event]) {\n    for (const listener of listeners[event]) {\n      listener.call(null, params);\n    }\n  }\n}\n\nasync function init(\n  activity,\n  videoPlayerElement,\n  adContainerElement,\n  sizeReferenceContainerElement\n) {\n  STATE.activity = activity;\n  sizeReferenceContainer = sizeReferenceContainerElement;\n  await initializeIMA(videoPlayerElement, adContainerElement);\n  window.addEventListener(\"resize\", () => {\n    if (adsManager) {\n      const width = sizeReferenceContainer?.clientWidth || window.innerWidth;\n      const height = sizeReferenceContainer?.clientHeight || window.innerHeight;\n      adsManager.resize(width, height, window.google.ima.ViewMode.NORMAL);\n    }\n  });\n}\n\nfunction removeAllAdManagers() {\n  for (const manager of Object.values(adsManagers)) {\n    manager.destroy();\n  }\n  adsManagers = {};\n}\n\nfunction removeAdManager(requestId) {\n  const manager = adsManagers[requestId];\n  delete adsManagers[requestId];\n  if (manager) {\n    manager.destroy();\n  }\n}\n\nexport const ImaSdkWrapper = {\n  init,\n  requestAds,\n  initAdsManager,\n  startAdsManager,\n  addListener,\n  removeAllAdManagers,\n};\n","import { VideoPlayer } from \"@/external/@acestream/capacitor-video-player\";\nimport { ImaSdkWrapper } from \"@/lib/ima-sdk-wrapper\";\n\nconst USE_OFFSET_TO_HIDE_PLAYER = false;\n\nconst AD_REQUEST_SAFE_TIMEOUT = 10000;\nconst AD_START_SAFE_TIMEOUT = 12000;\nconst AD_FINISH_SAFE_TIMEOUT = 35000;\n\nconst STATUS_PENDING = 0;\nconst STATUS_SUCCESS = 1;\nconst STATUS_FAILED = 2;\n\nconst EVENT_ALL_ADS_COMPLETED = 0;\nconst EVENT_AD_BREAK_FETCH_ERROR = 1;\nconst EVENT_COMPLETED = 3;\nconst EVENT_AD_BREAK_READY = 9;\n// const EVENT_CONTENT_PAUSE_REQUESTED = 5;\n// const EVENT_CONTENT_RESUME_REQUESTED = 6;\nconst EVENT_SKIPPED = 14;\nconst EVENT_STARTED = 15;\nconst EVENT_LOADED = 20;\n\n// eslint-disable-next-line no-unused-vars\nfunction sleep(delay) {\n  return new Promise((resolve) => setTimeout(resolve, delay));\n}\n\nfunction eventIdFromName(name) {\n  switch (name) {\n    case \"STARTED\":\n      return EVENT_STARTED;\n    case \"LOADED\":\n      return EVENT_LOADED;\n    case \"ALL_ADS_COMPLETED\":\n      return EVENT_ALL_ADS_COMPLETED;\n    case \"AD_BREAK_FETCH_ERROR\":\n      return EVENT_AD_BREAK_FETCH_ERROR;\n    case \"AD_BREAK_READY\":\n      return EVENT_AD_BREAK_READY;\n    default:\n      return -1;\n  }\n}\n\nexport default class ImaSdkAdPlayer {\n  constructor({\n    videoPlayer,\n    adContainer,\n    sizeReferenceContainer,\n    inAppMode,\n    activity,\n  }) {\n    console.log(`ima-sdk-player: init: inAppMode=${inAppMode}`);\n    this.inAppMode = inAppMode;\n    this.verboseEnabled = true;\n    this.lastRequestId = -1;\n    this.requests = {};\n    this.currentRequest = -1;\n    this.activity = activity;\n    this.lastRequestStartedAt = 0;\n    this.listeners = {};\n    this.videoPlayer = videoPlayer;\n    this.adContainer = adContainer;\n    this.sizeReferenceContainer = sizeReferenceContainer;\n    this.reset();\n  }\n\n  async init() {\n    if (!this.inAppMode) {\n      await this.initWrapper(\n        this.activity,\n        this.videoPlayer,\n        this.adContainer,\n        this.sizeReferenceContainer\n      );\n    }\n  }\n\n  async initWrapper(activity, videoPlayer, adContainer, sizeReferenceContainer) {\n    await ImaSdkWrapper.init(activity, videoPlayer, adContainer, sizeReferenceContainer);\n\n    ImaSdkWrapper.addListener(\"ima_sdk_request_completed\", (event) => {\n      console.log(`ima_sdk_request_completed: event=${JSON.stringify(event)}`);\n      this.onRequestCompleted(event.requestId);\n    });\n\n    ImaSdkWrapper.addListener(\"ima_sdk_request_failed\", (event) => {\n      console.log(`ima_sdk_request_failed: event=${JSON.stringify(event)}`);\n      this.onRequestFailed(\n        event.requestId,\n        event.errorCode,\n        event.errorMessage\n      );\n    });\n\n    ImaSdkWrapper.addListener(\"ima_sdk_ad_event\", (event) => {\n      this.onAdEvent(event.requestId, eventIdFromName(event.eventName));\n    });\n\n    ImaSdkWrapper.addListener(\"ima_sdk_ad_error\", (event) => {\n      this.onAdError(event.requestId, event.errorCode, event.errorMessage);\n    });\n  }\n\n  newRequest(tag) {\n    this.lastRequestId += 1;\n    const requestId = this.lastRequestId;\n    this.requests[requestId] = {\n      status: STATUS_PENDING,\n      tag,\n    };\n    return requestId;\n  }\n\n  reset() {\n    this.preload = false;\n    this.adsReady = false;\n    this.countStartedAds = 0;\n    this.finishedCallback = null;\n\n    // flags for safe timeouts\n    this.requestCompleted = false;\n    this.adStarted = false;\n    this.adFinished = false;\n\n    // safe timeout timers\n    if (this.requestCompletedTimer) {\n      clearTimeout(this.requestCompletedTimer);\n    }\n    this.requestCompletedTimer = null;\n\n    if (this.adStartedTimer) {\n      clearTimeout(this.adStartedTimer);\n    }\n    this.adStartedTimer = null;\n\n    if (this.adFinishedTimer) {\n      clearTimeout(this.adFinishedTimer);\n    }\n    this.adFinishedTimer = null;\n  }\n\n  async clearRequests() {\n    this.requests = {};\n    this.removeAllAdManagers();\n  }\n\n  logRequestStarted() {\n    this.lastRequestStartedAt = Date.now();\n  }\n\n  logNoAds({ placement }) {\n    const time = Date.now() - this.lastRequestStartedAt;\n    VideoPlayer.sendAnalyticsEvent({\n      eventName: \"as_ima_no_ads\",\n      time,\n      placement,\n    });\n  }\n\n  logGotAds({ placement }) {\n    const time = Date.now() - this.lastRequestStartedAt;\n    VideoPlayer.sendAnalyticsEvent({\n      eventName: \"as_ima_got_ads\",\n      time,\n      placement,\n    });\n  }\n\n  async showAds({ tags, maxAds, placement, preload = false, vmap = true }) {\n    try {\n      console.log(\n        `showAds: countTags=${tags.length} maxAds=${maxAds} preload=${preload} placement=${placement} vmap=${vmap}`\n      );\n      this.reset();\n      this.clearRequests();\n      this.logRequestStarted();\n      this.placement = placement;\n      this.preload = preload;\n      this.vmap = vmap\n\n      if (tags.length == 0) {\n        if (!preload) {\n          await VideoPlayer.setPlayingAds({ value: false });\n        }\n        return;\n      }\n\n      if (!preload) {\n        await this.showAdsContainer();\n      }\n\n      // for testing - in VMAP_MODE we always use only one tag\n      tags = tags.slice(0, 1);\n\n      for (const tag of tags) {\n        this.newRequest(tag);\n      }\n\n      for (const [requestId, request] of Object.entries(this.requests)) {\n        await this.requestAds(parseInt(requestId), request.tag, -1);\n      }\n\n      if (!preload) {\n        // safe timeout - skip to content if request if not completed withint 10 seconds\n        this.requestCompletedTimer = setTimeout(() => {\n          if (!this.requestCompleted) {\n            this.verbose(`ad request took too long`);\n            this.failed();\n          }\n        }, AD_REQUEST_SAFE_TIMEOUT);\n      }\n    } catch (e) {\n      console.log(`showAds:error: ${e.message}`);\n      this.failed();\n    }\n  }\n\n  /**\n   * Start ads if they are successfuly preloaded.\n   *\n   * @return True if ads were started\n   */\n  async startIfPreloaded(finishedCallback) {\n    try {\n      this.verbose(\n        `startIfPreloaded: adsReady=${this.adsReady} lastRequestId=${this.lastRequestId}`\n      );\n      if (this.adsReady) {\n        this.adsReady = false;\n        this.finishedCallback = finishedCallback;\n        await this.startAdsManager(this.lastRequestId);\n        await VideoPlayer.setPlayingAds({ value: true });\n        await this.showAdsContainer();\n        return true;\n      } else {\n        return false;\n      }\n    } catch (e) {\n      this.verbose(`startIfPreloaded:error: ${e.message}`);\n      await VideoPlayer.setPlayingAds({ value: false });\n      await this.hideAdsContainer();\n      return false;\n    }\n  }\n\n  onRequestCompleted(requestId) {\n    try {\n      console.log(`onRequestCompleted: requestId=${requestId}`);\n      if (!this.vmap) {\n        this.notifyAdsReady(true)\n      }\n      this.validateRequest(requestId);\n      this.requests[requestId].status = STATUS_SUCCESS;\n      this.startIfAllCompleted();\n    } catch (e) {\n      console.log(`onRequestCompleted:error: ${e.message}`);\n    }\n  }\n\n  onRequestFailed(requestId, errorCode, errorMessage) {\n    try {\n      console.log(\n        `onRequestFailed: requestId=${requestId} errorCode=${errorCode} errorMessage=${errorMessage}`\n      );\n      this.notifyAdsReady(false)\n      this.validateRequest(requestId);\n      this.requests[requestId].status = STATUS_FAILED;\n      this.startIfAllCompleted();\n    } catch (e) {\n      console.log(`onRequestCompleted:error: ${e.message}`);\n    }\n  }\n\n  startAdFinishedSafeTimer() {\n    this.adFinished = false;\n    if (this.adFinishedTimer) {\n      clearTimeout(this.adFinishedTimer);\n    }\n\n    this.adFinishedTimer = setTimeout(() => {\n      if (!this.adFinished) {\n        this.verbose(\"ad took too long to finish\");\n        this.failed();\n      }\n    }, AD_FINISH_SAFE_TIMEOUT);\n  }\n\n  notifyAdFinished() {\n    this.verbose(\"notifyAdFinished\");\n    this.adFinished = true;\n  }\n\n  async onAdEvent(requestId, eventId) {\n    try {\n      this.validateRequest(requestId);\n      if (eventId != 21) {\n        this.verbose(`onAdEvent: requestId=${requestId} eventId=${eventId}`);\n      }\n\n      if (eventId === EVENT_LOADED) {\n        if (!this.preload) {\n          await this.startAdsManager(requestId);\n        }\n      } else if (eventId === EVENT_STARTED) {\n        this.adStarted = true;\n        this.countStartedAds += 1;\n        this.startAdFinishedSafeTimer();\n      } else if (eventId === EVENT_COMPLETED) {\n        this.notifyAdFinished();\n      } else if (eventId === EVENT_SKIPPED) {\n        this.notifyAdFinished();\n      } else if (eventId === EVENT_AD_BREAK_FETCH_ERROR) {\n        if (this.vmap) {\n          this.notifyAdsReady(false);\n          this.logNoAds({ placement: this.placement });\n        }\n      } else if (eventId === EVENT_AD_BREAK_READY) {\n        this.adsReady = true;\n        if (this.vmap) {\n          this.notifyAdsReady(true);\n          this.logGotAds({ placement: this.placement });\n        }\n      } else if (eventId === EVENT_ALL_ADS_COMPLETED) {\n        if (this.vmap) {\n          await this.finished();\n        } else {\n          await this.startNextAd(requestId);\n        }\n      }\n    } catch (e) {\n      console.log(`onAdEvent:error: ${e.message}`);\n    }\n  }\n\n  async startNextAd(requestId) {\n    let nextRequestId = requestId + 1;\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n      if (this.isValidRequestId(nextRequestId)) {\n        if (this.requests[nextRequestId].status === STATUS_SUCCESS) {\n          await this.startAd(nextRequestId);\n          break;\n        } else {\n          nextRequestId += 1;\n        }\n      } else {\n        await this.finished();\n        break;\n      }\n    }\n  }\n\n  onAdError(requestId, errorCode, errorMessage) {\n    console.log(\n      `onAdError: requestId=${requestId} errorCode=${errorCode} errorMessage=${errorMessage}`\n    );\n    this.finished();\n  }\n\n  onImaSdkStuck() {\n    console.log(`onImaSdkStuck`);\n    if (this.currentRequest != -1) {\n      setTimeout(() => {\n        this.startAd(this.currentRequest + 1);\n      }, 1000);\n    }\n  }\n\n  isValidRequestId(requestId) {\n    return this.requests[requestId] !== undefined;\n  }\n\n  validateRequest(requestId) {\n    if (!this.isValidRequestId(requestId)) {\n      throw new Error(`Unknown request id: ${requestId}`);\n    }\n  }\n\n  startIfAllCompleted() {\n    let allCompleted = true;\n    let firstSuccessful = -1;\n\n    for (const [requestId, request] of Object.entries(this.requests)) {\n      if (request.status === STATUS_PENDING) {\n        allCompleted = false;\n        break;\n      }\n\n      if (request.status === STATUS_SUCCESS && firstSuccessful === -1) {\n        firstSuccessful = requestId;\n      }\n    }\n\n    this.verbose(\n      `startIfAllCompleted: allCompleted=${allCompleted} firstSuccessful=${firstSuccessful}`\n    );\n    if (this.verboseEnabled) {\n      this.dumpRequests();\n    }\n\n    if (allCompleted) {\n      if (firstSuccessful !== -1) {\n        this.verbose(`startIfAllCompleted: start first ad`);\n        this.startAd(firstSuccessful);\n        if (!this.vmap) {\n          this.logGotAds({ placement: this.placement });\n        }\n      } else {\n        this.verbose(`startIfAllCompleted: no ads, continue playback`);\n        if (!this.vmap) {\n          this.logNoAds();\n        }\n        this.finished();\n      }\n    }\n  }\n\n  notifyAdsReady(success) {\n    this.verbose(`ads ready: success=${success}`);\n    this.requestCompleted = true;\n  }\n\n  verbose() {\n    if (this.verboseEnabled) {\n      if (arguments.length > 0) {\n        arguments[0] = \"adplayer:\" + arguments[0];\n      }\n      console.log.apply(console, arguments);\n    }\n  }\n\n  dumpRequests() {\n    for (const [requestId, request] of Object.entries(this.requests)) {\n      console.log(\n        `dumpRequests: id=${requestId} request=${JSON.stringify(request)}`\n      );\n    }\n  }\n\n  async startAd(requestId) {\n    try {\n      requestId = parseInt(requestId);\n      this.verbose(`startAd: requestId=${requestId}`);\n      this.currentRequest = requestId;\n      this.initAdsManager(requestId);\n\n      if (!this.preload) {\n        this.adStartedTimer = setTimeout(() => {\n          if (!this.adStarted) {\n            this.verbose(`ad took too long to start`);\n            this.failed();\n          }\n        }, AD_START_SAFE_TIMEOUT);\n      }\n    } catch (e) {\n      console.log(`startAd:error: ${e.message}`);\n      this.failed();\n    }\n  }\n\n  /**\n   * Called when ads finished playing.\n   */\n  async finished() {\n    this.verbose(`finished: startedAds=${this.countStartedAds}`);\n    this.fireEvent(this.countStartedAds > 0 ? \"finished\" : \"failed\");\n    await this.resumeContent();\n  }\n\n  /**\n   * Called on any error (including \"no ads\")\n   */\n  async failed() {\n    this.verbose(\"failed\");\n    this.fireEvent(\"failed\");\n    this.clearRequests();\n    await this.resumeContent();\n  }\n\n  async resumeContent() {\n    try {\n      this.verbose(`resumeContent`);\n      if (this.finishedCallback) {\n        await VideoPlayer.setPlayingAds({\n          value: false,\n          resumePlayback: false,\n        });\n        this.finishedCallback.call(null);\n      } else {\n        await VideoPlayer.setPlayingAds({ value: false });\n      }\n      await this.hideAdsContainer();\n      this.fireEvent(\"resumeContent\");\n      this.reset();\n    } catch (e) {\n      console.log(`resumeContent:error: ${e.message}`);\n    }\n  }\n\n  addListener(event, listener) {\n    if (this.listeners[event] === undefined) {\n      this.listeners[event] = [];\n    }\n    this.listeners[event].push(listener);\n  }\n\n  fireEvent(event, params) {\n    if (this.listeners[event]) {\n      const eventObject = {\n        event,\n        params,\n      };\n      for (const listener of this.listeners[event]) {\n        listener.call(null, eventObject);\n      }\n    }\n  }\n\n  async requestAds(requestId, adTagUrl, vastLoadTimeout) {\n    if (this.inAppMode) {\n      await VideoPlayer.imaSdkRequestAds({\n        requestId,\n        adTagUrl,\n        vastLoadTimeout,\n      });\n    } else {\n      ImaSdkWrapper.requestAds(requestId, adTagUrl, vastLoadTimeout);\n    }\n  }\n\n  async startAdsManager(requestId) {\n    if (this.inAppMode) {\n      await VideoPlayer.imaSdkAdsManagerStart({ requestId });\n    } else {\n      ImaSdkWrapper.startAdsManager(requestId);\n    }\n  }\n\n  async initAdsManager(requestId) {\n    if (this.inAppMode) {\n      await VideoPlayer.imaSdkAdsManagerInit({ requestId });\n    } else {\n      ImaSdkWrapper.initAdsManager(requestId);\n    }\n  }\n\n  async removeAllAdManagers() {\n    if (this.inAppMode) {\n      await VideoPlayer.imaSdkRemoveAllAdsManagers();\n    } else {\n      ImaSdkWrapper.removeAllAdManagers();\n    }\n  }\n\n  async showAdsContainer() {\n    if (this.inAppMode) {\n      await VideoPlayer.imaSdkAdsContainerShow({\n        useOffset: USE_OFFSET_TO_HIDE_PLAYER,\n      });\n    } else {\n      this.activity.showAdsContainer();\n    }\n  }\n\n  async hideAdsContainer() {\n    if (this.inAppMode) {\n      await VideoPlayer.imaSdkAdsContainerHide({\n        useOffset: USE_OFFSET_TO_HIDE_PLAYER,\n      });\n    } else {\n      this.activity.hideAdsContainer();\n    }\n  }\n}\n","<script setup>\nimport {\n  getCurrentInstance,\n  computed,\n  ref,\n  onMounted,\n  watch,\n  onBeforeUnmount,\n  nextTick,\n} from \"vue\";\nimport { useMainStore } from \"@/stores/main\";\nimport { VideoPlayer } from \"@/external/@acestream/capacitor-video-player\";\nimport { useScreenOrientation } from \"@vueuse/core\";\nimport { vOnLongPress } from \"@vueuse/components\";\nimport { navigationService } from \"@/common/src/plugins/focus\";\nimport { getVideoSizeName } from \"./player/video-size\";\nimport { init as initAds } from \"@/lib/ad-player\";\nimport { App as CapacitorApp } from \"@capacitor/app\";\nimport { AppNotificationManager } from \"@/lib/AppNotificationManager\";\n\n// components\nimport BufferingProgress from \"@/components/BufferingProgress.vue\";\n// import DebugState from \"@/components/DebugState.vue\";\nimport ControlButton from \"@/components/ControlButton.vue\";\nimport FavoriteToggleButton from \"@/components/FavoriteToggleButton.vue\";\nimport ListSelector from \"@/components/ListSelector.vue\";\nimport PlayerMenu from \"@/components/PlayerMenu.vue\";\nimport PlaylistSheet from \"@/components/PlaylistSheet.vue\";\nimport ResizeVideoMenu from \"@/components/ResizeVideoMenu.vue\";\nimport ExternalPage from \"@/components/ExternalPage.vue\";\nimport TheButton from \"@/common/src/components/TheButton.vue\";\nimport ImaSdkAdPlayer from \"@/lib/ima-sdk-ad-player\";\n\n// router\nconst $router = getCurrentInstance().proxy.$root.$router;\n\n// screen orientation\nconst screenOrientation = useScreenOrientation();\nconst isLandscapeOrientation = computed(() =>\n  screenOrientation.orientation.value.startsWith(\"landscape\")\n);\nconst isLandscapeMode = computed(\n  () => isLandscapeOrientation.value && isLocalPlayback.value\n);\n\n// enums\nconst DialogType = {\n  AUDIO_TRACK: 0,\n  SPU_TRACK: 1,\n  PLAYLIST: 2,\n  STREAM: 3,\n  MENU: 4,\n  VIDEO_SIZE: 5,\n};\n\n// PlaybackStateCompat\nconst PlaybackState = {\n  NONE: 0,\n  STOPPED: 1,\n  PAUSED: 2,\n  PLAYING: 3,\n  BUFFERING: 6,\n  ERROR: 7,\n};\n\n// Vue plugins\nconst $i18n = getCurrentInstance().proxy.$i18n;\n\n// constants\nconst TARGET_IDLE = 0;\nconst TARGET_LOCAL = 1;\nconst TARGET_ACECAST = 2;\nconst TARGET_CHROMECAST = 3;\n\nconst VLC_EVENT_BUFFERING = 259;\nconst VLC_EVENT_PLAYING = 260;\nconst VLC_EVENT_PAUSED = 261;\nconst VLC_EVENT_STOPPED = 262;\nconst VLC_EVENT_END_REACHED = 265;\nconst VLC_EVENT_ERROR = 266;\n\nconst MAX_ADS = 2;\nconst AD_TRANSPORT_IMA_SDK_WEBVIEW = 1;\nconst AD_TRANSPORT_IMA_SDK_APP = 2;\nconst AD_TRANSPORT_WEB = 3;\n\n// flags\nconst DEVELOPER_MODE = false;\n\n// local vars\nlet adPlayer = null;\nlet midrollTags = null;\nlet midrollVmapMode = false;\nlet canRequestAdsDeferred = null;\n\n// stores\nconst mainStore = useMainStore();\n\nconst MODE_NONE = \"none\";\nconst MODE_IDLE = \"idle\";\nconst MODE_LOCAL = \"local\";\nconst MODE_ACECAST = \"acecast\";\nconst MODE_CHROMECAST = \"chromecast\";\n\n// refs\nconst progressKey = ref(0);\nconst centerBox = ref(null);\nconst overlayVisible = ref(false);\nconst playbackMode = ref(MODE_NONE);\nconst currentDialog = ref(null);\nconst draggingProgress = ref(false);\nconst draggingValue = ref(0);\nconst freezeProgress = ref(null);\nconst onScreenMessage = ref(null);\nconst playerBuffering = ref(false);\nconst unlockButtonVisible = ref(false);\nconst playPauseAnimationIcon = ref(null);\nconst playPauseAnimation = ref(null);\nconst playPauseAnimationVisible = ref(false);\nconst showOverlayWhenNotPlaying = ref(true);\nconst draggingVolume = ref(false);\nconst freezeVolume = ref(null);\nconst volume = ref(0);\nconst showingInformation = ref(false);\nconst loadingAds = ref(false);\nconst playingAds = ref(false);\nconst activityPaused = ref(false);\nconst externalPageVisible = ref(false);\nconst externalPageUrl = ref(null);\nconst skipProgressClick = ref(false);\nconst m3uPlaylistState = ref(null);\nconst m3uPlaylistItems = ref([]);\nconst renderingDisabled = ref(false);\n\n// Swipe refs\nconst swipeFeedbackVisible = ref(false);\nconst swipeFeedbackDirection = ref(null); // 'next' or 'prev'\nconst swipeFeedbackItem = ref(null);\nconst touchStartTime = ref(null);\nconst touchStartY = ref(null);\nconst touchStartX = ref(null);\nconst overlayShowTimer = ref(null);\nconst swipeDetected = ref(false); // Track if a swipe was detected in current touch sequence\nconst swipeInProgress = ref(false); // Track if swipe is currently in progress\nconst currentTouchY = ref(null); // Absolute Y (unused in rendering after refactor)\nconst swipeOffset = ref(0); // Distance from edge for current swipe\nconst swipeTriggered = ref(false); // Action already triggered in current swipe\nconst screenHeight = ref(0); // Screen height for threshold calculation\nconst swipeHintVisible = ref(false); // Track swipe hint overlay visibility\nconst swipeHintShown = ref(false); // Persisted flag to avoid showing hint again\nconst swipeHintDownArrowEl = ref(null);\nconst swipeHintOkButtonEl = ref(null);\nconst swipeHintOkMidY = ref(null);\n\n// Swipe config\nconst SWIPE_MOVEMENT_THRESHOLD = 10; // Minimum movement to show feedback\nconst SWIPE_TRIGGER_THRESHOLD = 100; // Fixed amount of movement in pixels required to trigger action\nconst SWIPE_ARROW_SPEED_RATIO = 2; // How much faster arrow moves than finger\nconst SWIPE_HINT_STORAGE_KEY = \"acestream_swipe_hint_shown\";\n// Keep legacy swipe-hint dismiss schema (tap/swipe) in code, but disable by default.\nconst SWIPE_HINT_DISMISS_BY_TAP = false;\n\nconst swipeHintOkContainerStyle = computed(() => {\n  return {};\n  // if (swipeHintOkMidY.value === null) {\n  //   return {};\n  // }\n  // return {\n  //   top: `${swipeHintOkMidY.value}px`,\n  //   bottom: \"auto\",\n  // };\n});\n\n// computed\nconst isSliderDisabled = computed(() => isLocked.value || !isPlayingOrPaused.value || externalPageVisible.value || renderingDisabled.value);\nconst isTv = computed(() => mainStore.isTv);\nconst showBox = computed(() => !isLocalPlayback.value);\nconst isDialogVisible = computed(() => currentDialog.value !== null);\nconst preventFocus = computed(() => isDialogVisible.value);\nconst hasNotch = computed(() => mainStore.playerState?.hasNotch);\nconst currentVideoSize = computed(() => mainStore.playerState?.videoSize);\nconst currentDisplayUnderNotch = computed(\n  () => mainStore.playerState?.displayUnderNotch\n);\n\nconst currentTarget = computed(() => {\n  switch (playbackMode.value) {\n    case MODE_LOCAL:\n      return TARGET_LOCAL;\n    case MODE_ACECAST:\n      return TARGET_ACECAST;\n    case MODE_CHROMECAST:\n      return TARGET_CHROMECAST;\n    default:\n      return TARGET_IDLE;\n  }\n});\n\nconst showControls = computed(() => {\n  return playerState.value && !isInPiP.value && playbackMode.value != MODE_NONE && !renderingDisabled.value;\n});\n\nconst displayProgress = computed(() => {\n  if (draggingProgress.value) {\n    return draggingValue.value;\n  } else if (freezeProgress.value !== null) {\n    return freezeProgress.value;\n  } else {\n    return playerState.value.time;\n  }\n});\n\nconst displayVolume = computed(() => {\n  if (draggingVolume.value) {\n    return volume.value;\n  } else if (freezeVolume.value !== null) {\n    return freezeVolume.value;\n  } else {\n    return playerState.value.volume;\n  }\n});\n\n//TODO: loop over all dialogs\nconst dialog = computed(() => {\n  switch (currentDialog.value) {\n    case DialogType.AUDIO_TRACK:\n      return {\n        visible: true,\n        type: \"list-selector\",\n        title: \"audio_track\",\n        items: audioTracks.value,\n        selectedItem: currentAudioTrack.value,\n        onselected: onAudioTrackSelected,\n      };\n    case DialogType.SPU_TRACK:\n      return {\n        visible: true,\n        type: \"list-selector\",\n        title: \"spu_track\",\n        items: spuTracks.value,\n        selectedItem: currentSpuTrack.value,\n        onselected: onSpuTrackSelected,\n      };\n    case DialogType.STREAM:\n      return {\n        visible: true,\n        type: \"list-selector\",\n        title: \"select_stream\",\n        items: streams.value,\n        selectedItem: currentStream.value?.id,\n        onselected: onStreamSelected,\n      };\n    case DialogType.PLAYLIST:\n      return {\n        visible: true,\n        type: \"playlist\",\n        onselected: () => {},\n      };\n    case DialogType.MENU:\n      return {\n        visible: true,\n        type: \"player-menu\",\n        onselected: () => {},\n      };\n    case DialogType.VIDEO_SIZE:\n      return {\n        visible: true,\n        type: \"resize-video-menu\",\n        onselected: () => {},\n      };\n    default:\n      return {\n        visible: false,\n        onselected: () => {},\n      };\n  }\n});\n\nconst isFastSeekEnabled = computed(\n  () =>\n    !isIdle.value &&\n    !isLocked.value &&\n    isVod.value &&\n    isPlayingOrPaused.value &&\n    !isChromecastPlayback.value\n);\nconst isTaskRoot = computed(() => mainStore.playerState?.isTaskRoot);\nconst hasPip = computed(() => mainStore.playerState?.hasPip);\nconst homeButtonVisible = computed(() => !isTaskRoot.value || !isVideo.value);\nconst isLocalPlayback = computed(() => playbackMode.value == MODE_LOCAL);\nconst isChromecastPlayback = computed(\n  () => playbackMode.value == MODE_CHROMECAST\n);\nconst isAceCastPlayback = computed(() => playbackMode.value == MODE_ACECAST);\nconst playerState = computed(() => {\n  if (playbackMode.value == MODE_LOCAL) {\n    return mainStore.playerState.local;\n  } else if (playbackMode.value == MODE_ACECAST) {\n    return mainStore.playerState.acecast;\n  } else if (playbackMode.value == MODE_CHROMECAST) {\n    return mainStore.playerState.chromecast;\n  } else if (playbackMode.value == MODE_IDLE) {\n    return mainStore.playerState.local;\n  } else if (playbackMode.value == MODE_NONE) {\n    return null;\n  } else {\n    throw `Unknown playback mode: ${playbackMode.value}`;\n  }\n});\n\nconst m3uPlaylist = computed(() => {\n  if (hasM3uPlaylist.value) {\n    const position = m3uPlaylistState.value.position;\n    const items = m3uPlaylistItems.value;\n    if (items[position]) {\n      items[position].state = m3uPlaylistState.value.playbackState;\n    }\n    return {\n      items,\n      position,\n    };\n  } else {\n    return null;\n  }\n});\n\nconst playlist = computed(() => {\n  const state = playerState.value;\n  const mode = playbackMode.value;\n  const local = state?.localInternalPlaylistState;\n  const remote = state?.remoteInternalPlaylistState;\n  if (!state) {\n    return null;\n  } else if (mode == MODE_ACECAST) {\n    if (state.playlistState?.size > 0 && state.playlistState?.mediaItem) {\n      return state.playlistState;\n    } else {\n      return remote;\n    }\n  } else if (mode == MODE_LOCAL) {\n    if (state.playlistState?.size > 0 && state.playlistState?.mediaItem) {\n      return state.playlistState;\n    } else {\n      return local;\n    }\n  } else if (mode == MODE_CHROMECAST) {\n    // use local playlist for chromecast because it uses local engine session\n    return local;\n  } else if (mode == MODE_IDLE) {\n    // use the latest playlist when in idle state\n    if (local?.size > 0 && remote?.size > 0) {\n      if (local.createdAt > remote.createdAt) {\n        return local;\n      } else {\n        return remote;\n      }\n    } else if (local?.size > 0) {\n      return local;\n    } else if (remote?.size > 0) {\n      return remote;\n    } else {\n      return null;\n    }\n  } else {\n    throw `Unknown playback mode: ${mode}`;\n  }\n});\nconst mediaItem = computed(() => playlist.value?.mediaItem);\nconst isPlaying = computed(\n  () => playerState.value?.playbackState == PlaybackState.PLAYING\n);\nconst isPaused = computed(\n  () => playerState.value?.playbackState == PlaybackState.PAUSED\n);\nconst isPlayingOrPaused = computed(() => isPlaying.value || isPaused.value);\nconst isLocked = computed(\n  () => isLocalPlayback.value && playerState.value.locked\n);\nconst isMuted = computed(() => playerState.value?.muted);\nconst isInPiP = computed(() => mainStore.playerState?.local?.isInPiP);\nconst spuTracks = computed(() => playerState.value?.spuTracks);\nconst audioTracks = computed(() => playerState.value?.audioTracks);\nconst currentAudioTrack = computed(() => playerState.value?.audioTrack);\nconst currentSpuTrack = computed(() => playerState.value?.spuTrack);\nconst hasStreams = computed(() => streams.value?.length > 0);\nconst hasAudioTracks = computed(() => audioTracks.value?.length > 0);\nconst hasSpuTracks = computed(() => spuTracks.value?.length > 0);\nconst isVideo = computed(() => mediaItem.value?.type == \"VIDEO\");\nconst isAudio = computed(\n  () =>\n    mediaItem.value?.type == \"AUDIO\" ||\n    (mediaItem.value?.type == \"VIDEO\" && mediaItem.value?.videoDisabled)\n);\nconst isLive = computed(() => mediaItem.value?.live === 1);\nconst isVod = computed(() => mediaItem.value?.live === 0);\nconst isP2P = computed(() => mediaItem.value?.p2p);\nconst mediaTitle = computed(() => {\n  const title = mediaItem.value?.title;\n  if (!title) return null;\n\n  // Detect if title is a file path (contains slashes and ends with file extension)\n  const hasFileExtension = /\\.(mp4|mkv|avi|mov|wmv|flv|webm|m4v|3gp|ts|mts|m2ts|mp3|flac|wav|aac|ogg|m4a|wma|vob|iso|bin|dat|mpg|mpeg|divx|xvid|rm|rmvb|asf|f4v|m3u8|pls|wpl|m3u)$/i.test(title);\n\n  if (title.includes('/') && hasFileExtension) {\n    const segments = title.split('/');\n    const lastSegment = segments[segments.length - 1];\n    if (lastSegment && lastSegment.length > 10) {\n      return lastSegment.replace(\".\", \".<wbr>\");\n    }\n  }\n\n  // Default behavior: replace \".\" with \".<wbr>\"\n  return title.replace(\".\", \".<wbr>\");\n});\nconst mediaTitleClass = computed(() => {\n  const len = mediaTitle.value?.length ?? 0;\n  const category = Math.max(3, Math.round(len / 20));\n  return `media-title-size-${category}`;\n});\nconst hasPlaylist = computed(() => playlist.value?.size > 1 || hasM3uPlaylist.value);\nconst hasM3uPlaylist = computed(() => m3uPlaylistState.value?.hasPlaylist || false);\nconst hasNext = computed(() => {\n  if (hasM3uPlaylist.value) {\n    return m3uPlaylistItems.value.length > 1;\n  }\n  return playlist.value?.hasNext;\n});\nconst hasPrev = computed(() => {\n  if (hasM3uPlaylist.value) {\n    return m3uPlaylistItems.value.length > 1;\n  }\n  return playlist.value?.hasPrev;\n});\nconst isIdle = computed(() => playbackMode.value == MODE_IDLE);\nconst playbackSpeed = computed(() => playerState.value?.rate);\nconst audioDelay = computed(() => playerState.value?.audioDelay);\nconst spuDelay = computed(() => playerState.value?.spuDelay);\nconst canTogglePip = computed(() => hasPip.value && isLocalPlayback.value && isVideo.value && !isAudio.value && isPlayingOrPaused.value);\n\n// Favorites (native WebView host bridge: window.acestreamAppHost)\nconst canAddToFavorites = computed(() => mediaItem.value && !mediaItem.value.isLocalMediaFile);\nconst favoriteUri = computed(() => mediaItem.value?.uri || null);\nconst favoriteTitleRaw = computed(() => mediaItem.value?.title || null);\nconst isFavorite = ref(false);\n\nfunction canUseFavoritesBridge() {\n  return (\n    typeof window !== \"undefined\" &&\n    window.acestreamAppHost &&\n    typeof window.acestreamAppHost.isFavorite === \"function\" &&\n    typeof window.acestreamAppHost.addFavorite === \"function\" &&\n    typeof window.acestreamAppHost.removeFavorite === \"function\"\n  );\n}\n\nasync function refreshFavoriteState() {\n  try {\n    const uri = favoriteUri.value;\n    if (!uri || !canUseFavoritesBridge()) {\n      // for testing\n      console.log(`qqq:refreshFavoriteState: missing uri or bridge: uri=${uri}`);\n      isFavorite.value = false;\n      return;\n    }\n    isFavorite.value = !!window.acestreamAppHost.isFavorite(uri);\n    // for testing\n    console.log(`qqq:refreshFavoriteState: favorite=${isFavorite.value} uri=${uri}`);\n  } catch (e) {\n    // for testing\n    console.log(`qqq:refreshFavoriteState:error: ${e.message}`);\n    isFavorite.value = false;\n  }\n}\n\nasync function toggleFavorite() {\n  const uri = favoriteUri.value;\n  if (!uri || !canUseFavoritesBridge()) {\n    return;\n  }\n\n  let title;\n  if (isP2P.value && playlist.value?.size > 1) {\n    // We're in torrent playlist - use torrent name for favorites because the whole torrent is added,\n    // not a single file from torrent\n    title = playlist.value?.title || uri;\n  } else {\n    title = favoriteTitleRaw.value || uri;\n  }\n\n  if (isFavorite.value) {\n    window.acestreamAppHost.removeFavorite(uri);\n  } else {\n    window.acestreamAppHost.addFavorite(title, uri);\n  }\n  await refreshFavoriteState();\n}\n\nwatch(\n  () => favoriteUri.value,\n  async () => {\n    await refreshFavoriteState();\n  }\n);\n\nconst canSwipePlaylist = computed(() => {\n  const canSwipe = (\n    hasM3uPlaylist.value &&\n    !isDialogVisible.value &&\n    !isLocked.value &&\n    (!isOverlayVisible.value || !isVideo.value) &&\n    m3uPlaylistItems.value.length > 1\n  );\n  return canSwipe;\n});\n\nconst canUseSwipe = computed(() => {\n  return (\n    hasM3uPlaylist.value &&\n    m3uPlaylistItems.value.length > 1\n  );\n});\n\nconst contentTypeIcon = computed(() => {\n  if (isLive.value) {\n    return \"mdi-web\";\n  } else if (\n    mediaItem.value?.type == \"AUDIO\" ||\n    mediaItem.value?.mime?.startsWith(\"audio\")\n  ) {\n    return \"mdi-volume-low\";\n  } else {\n    return \"mdi-video\";\n  }\n});\n\nconst streams = computed(() => {\n  return (\n    playerState.value.engineStatus?.streams?.map((item) => {\n      return {\n        ...item,\n        id: item.index,\n        title: item.name,\n      };\n    }) || []\n  );\n});\nconst currentStream = computed(() => {\n  const currentIndex = playerState.value.engineStatus?.currentStreamIndex;\n  for (let i = 0; i < streams.value.length; i++) {\n    if (streams.value[i].id == currentIndex) {\n      return streams.value[i];\n    }\n  }\n  return null;\n});\n\nconst outputFormat = computed(() => {\n  if (playerState.value.engineSession) {\n    return playerState.value.engineSession.playbackData.outputFormat.format;\n  } else {\n    return playerState.value.engineStatus?.outputFormat;\n  }\n});\n\nconst engineStatus = computed(() => {\n  return playerState.value.engineStatus || { status: \"idle\" };\n});\n\nconst gotEngineSession = computed(() => {\n  return !engineStatus.value || engineStatus.value.status != \"idle\";\n});\n\nconst engineStatusMessage = computed(() => {\n  let message = null;\n  switch (engineStatus.value.status) {\n    case \"engine_unpacking\":\n      message = $i18n.t(\"engine_status.unpacking\");\n      break;\n    case \"engine_starting\":\n      message = $i18n.t(\"engine_status.starting\");\n      break;\n    case \"engine_failed\":\n      message = $i18n.t(\"engine_status.failed\");\n      break;\n    case \"loading\":\n      message = $i18n.t(\"engine_status.loading\");\n      break;\n    case \"starting\":\n      message = $i18n.t(\"engine_status.starting\");\n      break;\n    case \"check\":\n      message = $i18n.t(\"engine_status.checking\", {\n        progress: engineStatus.value.progress,\n      });\n      break;\n    case \"error\":\n      message = engineStatus.value.errorMessage;\n      break;\n    case \"prebuf\":\n    case \"dl\":\n      //TODO: deal with \"channel-not-available\"\n      if (\n        engineStatus.value.status == \"prebuf\" &&\n        !isPlaying.value &&\n        !gotPreloaderImage.value\n      ) {\n        message = $i18n.t(\"engine_status.prebuffering\", {\n          progress: engineStatus.value.progress,\n        });\n      }\n  }\n  return message;\n});\n\nconst isPrebuffering = computed(\n  () => engineStatus.value.status == \"prebuf\" && !isPlaying.value\n);\nconst prebufferingProgress = computed(() => engineStatus.value.progress);\nconst backdropUrl = computed(() => {\n  const path = playerState.value?.movieMetadata?.backdropPath;\n  if (!path) {\n    return null;\n  }\n\n  //TODO: detect desired width\n  const width = 1280;\n\n  return `https://image.tmdb.org/t/p/w${width}${path}`;\n});\n\n//TODO: check that image exists (request image URL)\nconst gotPreloaderImage = computed(() => !!preloaderImageUrl.value);\nconst preloaderImageUrl = computed(() => {\n  const id = playerState.value?.movieMetadata?.imdbId;\n  if (id) {\n    return `https://images.metahub.space/logo/medium/${id}/img`;\n  } else {\n    return null;\n  }\n});\n\nconst overlayMessage = computed(() => {\n  if (onScreenMessage.value) {\n    return onScreenMessage.value;\n  } else if (isP2P.value) {\n    return engineStatusMessage.value;\n  } else {\n    return null;\n  }\n});\n\nconst isPlayerBuffering = computed(() => {\n  if (isPrebuffering.value) {\n    return false;\n  } else if (playerState.value.playbackState == PlaybackState.BUFFERING) {\n    return true;\n  } else if (playlist.value?.prebuffering && !gotPreloaderImage.value) {\n    return true;\n  } else {\n    return (\n      playerBuffering.value &&\n      playerState.value.playbackState != PlaybackState.NONE\n    );\n  }\n});\n\nconst liveProgress = computed(() => {\n  const livePos = playerState.value.engineStatus?.livePos;\n  if (livePos && outputFormat.value === \"http\") {\n    const duration = livePos.lastTimestamp - livePos.firstTimestamp;\n    const pieces = livePos.last - livePos.first;\n    const offset = livePos.pos - livePos.first;\n    return { duration, pieces, offset, live: livePos.isLive };\n  } else {\n    return null;\n  }\n});\n\nconst displayLiveProgress = computed(() => {\n  if (draggingProgress.value) {\n    return draggingValue.value;\n  } else if (freezeProgress.value !== null) {\n    return freezeProgress.value;\n  } else {\n    return liveProgress.value?.offset;\n  }\n});\n\nconst progressValue = computed(() => {\n  if (liveProgress.value) {\n    return displayLiveProgress.value;\n  } else {\n    return displayProgress.value;\n  }\n});\n\nconst progressMax = computed(() => {\n  if (liveProgress.value) {\n    return liveProgress.value.pieces;\n  } else {\n    return playerState.value.duration;\n  }\n});\n\nconst progressStep = computed(() => {\n  return Math.round(progressMax.value / 100);\n});\n\nconst displayTime = computed(() => {\n  if (liveProgress.value) {\n    return -1000 * liveProgress.value.duration;\n  } else {\n    return playerState.value.time;\n  }\n});\n\nconst displayDuration = computed(() => {\n  if (liveProgress.value) {\n    return 0;\n  } else {\n    return playerState.value.duration;\n  }\n});\n\nconst canChangeVolume = computed(() => {\n  return playerState.value?.hasVolume;\n});\n\nconst isOurPlayer = computed(() => {\n  return playerState.value.device?.selectedPlayer?.type === 3;\n});\n\nconst showSimpleControls = computed(\n  () => isAceCastPlayback.value && !isOurPlayer.value\n);\n\n// local state\nlet overlayHideTimer = null;\nlet freezeProgressTimer = null;\nlet onScreenTimer = null;\nlet freezeVolumeTimer = null;\nlet setVolumeTimer = null;\nlet unlockButtonTimer = null;\nlet playPauseAnimationTimer = null;\nlet imaSdkAdPlayer = null;\n\n// event listeners\nfunction onActivityPause() {\n  console.log(`onActivityPause: pip=${isInPiP.value}`);\n  activityPaused.value = true;\n  if (adPlayer) {\n    adPlayer.pause();\n  }\n}\nfunction onActivityResume() {\n  activityPaused.value = false;\n  if (adPlayer) {\n    adPlayer.play();\n  }\n}\n\nCapacitorApp.addListener(\"pause\", onActivityPause);\nCapacitorApp.addListener(\"resume\", onActivityResume);\n\n// Handle back button\nCapacitorApp.addListener(\"backButton\", onBackButton);\n\nasync function onBackButton({ canGoBack }) {\n  const mainStore = useMainStore();\n\n  const onclose = async (showMainActivity=false) => {\n    if (!isTv.value && canTogglePip.value) {\n      togglePiP();\n    } else if (showMainActivity) {\n      await VideoPlayer.showMainActivity();\n    } else {\n      closePlayer();\n    }\n  };\n\n  console.log(`back: dialogVisible=${mainStore.dialogVisible}`);\n\n  //NOTE: we always close app when back is pressed on the main screen\n  if (mainStore.dialogVisible) {\n    mainStore.cancelDialog();\n  } else if (mainStore.overlayVisible && mainStore.canHideOverlay) {\n    mainStore.hideOverlay();\n  } else if (canGoBack && $router.currentRoute.name !== \"main\") {\n    $router.back();\n  } else {\n    try {\n      console.log(`showAds:prepare`);\n      const response = await VideoPlayer.showInterstitial({\n        placement: \"close\",\n      });\n      console.log(`showAds:done: response=${JSON.stringify(response)}`);\n      if (response.adShown) {\n        onclose(true);\n      } else {\n        const callback = async () => {\n          console.log(`video ads finished callback`);\n          onclose();\n        };\n        if (!(await imaSdkAdPlayer.startIfPreloaded(callback))) {\n          onclose();\n        }\n      }\n    } catch (e) {\n      console.error(`showAds:error: ${e}`);\n      onclose();\n    }\n  }\n}\n\nfunction closePlayer() {\n  mainStore.freezeState();\n  CapacitorApp.exitApp();\n}\n\nVideoPlayer.addListener(\"screen_lock_changed\", async (event) => {\n  console.log(`screen_lock_changed: event=${JSON.stringify(event)}`);\n  if (event.locked) {\n    await VideoPlayer.hideSystemStatusBar();\n    hideOverlay();\n  } else {\n    showOverlay(true);\n  }\n});\n\nVideoPlayer.addListener(\"video_size_changed\", async (event) => {\n  console.log(`video_size_changed: event=${JSON.stringify(event)}`);\n  showVideoSizeInfo(event.size);\n});\n\nVideoPlayer.addListener(\"ima_sdk_request_completed\", (event) => {\n  console.log(`ima_sdk_request_completed: event=${JSON.stringify(event)}`);\n  imaSdkAdPlayer.onRequestCompleted(event.requestId);\n});\n\nVideoPlayer.addListener(\"ima_sdk_request_failed\", (event) => {\n  console.log(`ima_sdk_request_failed: event=${JSON.stringify(event)}`);\n  imaSdkAdPlayer.onRequestFailed(\n    event.requestId,\n    event.errorCode,\n    event.errorMessage\n  );\n});\n\nVideoPlayer.addListener(\"ima_sdk_ad_event\", (event) => {\n  if (event.eventId != 21) {\n    console.log(`ima_sdk_ad_event: event=${JSON.stringify(event)}`);\n  }\n  imaSdkAdPlayer.onAdEvent(event.requestId, event.eventId);\n});\n\nVideoPlayer.addListener(\"ima_sdk_ad_error\", (event) => {\n  console.log(`ima_sdk_ad_error: event=${JSON.stringify(event)}`);\n  imaSdkAdPlayer.onAdError(\n    event.requestId,\n    event.errorCode,\n    event.errorMessage\n  );\n});\n\nVideoPlayer.addListener(\"ima_sdk_stuck\", (event) => {\n  console.log(`ima_sdk_stuck: event=${JSON.stringify(event)}`);\n  imaSdkAdPlayer.onImaSdkStuck();\n});\n\n// On AceCast receiver we preload/play midroll ads upon receiving pause/play\n// commands from the remote control.\nVideoPlayer.addListener(\"acecast_command_received\", (event) => {\n  console.log(`acecast_command_received: event=${JSON.stringify(event)}`);\n  if (event.command === \"pause\") {\n    requestMidrollAds();\n  } else if (event.command === \"play\") {\n    playMidrollAds();\n  }\n});\n\nasync function getVastTagsFromEvent(event) {\n  let vastTagsJson;\n  if (event.vastTagsRequested) {\n    vastTagsJson = event.vastTags;\n  } else {\n    const mediaItemState = JSON.parse(event.mediaItemState);\n    const response = await VideoPlayer.requestVideoAds({\n      placement: \"preroll\",\n      infohash: mediaItemState.infohash,\n      isLive: mediaItemState.live,\n      forceAds: false,\n      debugOptions: null,\n    });\n    vastTagsJson = response.vastTags;\n  }\n\n  if (!vastTagsJson) {\n    return [];\n  }\n\n  try {\n    const vastTags = JSON.parse(vastTagsJson);\n\n    if (vastTags?.length > 0) {\n      return vastTags.map((item) => item.url);\n    } else {\n      return [];\n    }\n  } catch (e) {\n    console.error(`Failed to parse VAST tags: ${e}`);\n    return [];\n  }\n}\n\nfunction deferred() {\n    let resolve, reject;\n    const p = new Promise((res, rej) => { resolve = res; reject = rej; });\n    return { promise: p, resolve, reject };\n}\n\nfunction listenP2PSession() {\n  VideoPlayer.addListener(\"playback_starting\", async (event) => {\n    console.log(`playback_starting: event=${JSON.stringify(event)}`)\n\n    if (canRequestAdsDeferred) {\n      canRequestAdsDeferred.resolve(false);\n    }\n    canRequestAdsDeferred = deferred();\n\n    const started = await showFullscreenNotificationIfNeeded({\n      placement: 'preroll',\n      hasPremium: event.hasPremium,\n      adsShown: !!event.tokena,\n    });\n\n    if (!started) {\n      canRequestAdsDeferred.resolve(true);\n    }\n  });\n\n  VideoPlayer.addListener(\"direct_playback_started\", async (event) => {\n    console.log(`direct_playback_started: event=${JSON.stringify(event)}`);\n  });\n\n  VideoPlayer.addListener(\"p2p_session_started\", async (event) => {\n    const interstitialAge = playerState.value?.lastInterstitialAge;\n\n    console.log(`p2p_session_started: event=${JSON.stringify(event)}`);\n\n    //NOTE: when \"tokena\" is not empty it means that ads were already played in the ContentStartActivity\n    // and we don't need to show ads here\n    if (!event.tokena) {\n\n      let canRequestAds = true;\n\n      if (canRequestAdsDeferred) {\n        const t = Date.now();\n        canRequestAds = await canRequestAdsDeferred.promise;\n        console.log(`p2p_session_started:canRequestAds: result=${canRequestAds} time=${Date.now() - t}`);\n      }\n\n      if (canRequestAds && !(await imaSdkAdPlayer.startIfPreloaded())) {\n        const tags = await getVastTagsFromEvent(event);\n        console.log(\n          `p2p_session_started: tokena=${\n            event.tokena\n          } interstitialAge=${interstitialAge} tags=${JSON.stringify(tags)}`\n        );\n        await showAds(tags);\n      }\n    } else {\n      console.log(`ads-preload: preload on session start`);\n      requestMidrollAds();\n    }\n  });\n}\n\nVideoPlayer.addListener(\"updateInsets\", async (event) => {\n  const playerRoot = document.querySelector(\".player-root\");\n  const ratio = window.devicePixelRatio || 1;\n\n  console.log(`player:updateInsets: tv=${isTv.value} landscape=${isLandscapeOrientation.value} pixelRatio=${ratio} event=${JSON.stringify(event)}`);\n\n  // Skip on \"undefined\" and \"true\"\n  if (isTv.value !== false) {\n    return;\n  }\n\n  if (playerRoot) {\n    const top = Math.round(event.top / ratio);\n    const bottom = Math.round(event.bottom / ratio);\n    const left = Math.round(event.left / ratio);\n    const right = Math.round(event.right / ratio);\n\n    const rules = [\n      `--inset-padding-top: ${top}px`,\n      `--inset-padding-bottom: ${bottom}px`,\n      `--inset-padding-left: ${left}px`,\n      `--inset-padding-right: ${right}px`,\n    ];\n    playerRoot.style = rules.join(';');\n  }\n});\n\nVideoPlayer.addListener(\"m3u_playlist_state_updated\", async (event) => {\n  //console.log(`qqq:m3u-playlist-state-updated: ${JSON.stringify(event.state)}`)\n  m3uPlaylistState.value = JSON.parse(event.state);\n});\n\nVideoPlayer.addListener(\"m3u_playlist_items_updated\", async (event) => {\n  //console.log(`qqq:m3u-playlist-items-updated: ${JSON.stringify(event.state)}`)\n  const itemsState = JSON.parse(event.state);\n  if (itemsState && itemsState.items && itemsState.items.length > 0) {\n    m3uPlaylistItems.value = itemsState.items;\n  } else {\n    m3uPlaylistItems.value = [];\n  }\n});\n\nVideoPlayer.addListener(\"change_rendering_state\", (event) => {\n  // for testing\n  console.log(`qqq:change_rendering_state: event=${JSON.stringify(event)}`);\n  renderingDisabled.value = !event.enabled;\n});\n\n\n// eslint-disable-next-line no-unused-vars\nVideoPlayer.addListener(\"media_player_event\", async (event) => {\n  if (event.type == VLC_EVENT_BUFFERING) {\n    playerBuffering.value = event.value != 100;\n  }\n\n  switch (event.type) {\n    case VLC_EVENT_BUFFERING:\n      playerBuffering.value = event.value != 100;\n      break;\n    case VLC_EVENT_PLAYING:\n    case VLC_EVENT_PAUSED:\n    case VLC_EVENT_STOPPED:\n    case VLC_EVENT_END_REACHED:\n    case VLC_EVENT_ERROR:\n      playerBuffering.value = false;\n      break;\n  }\n\n  /*\n  switch (event.type) {\n    case MediaPlayer.Event.Playing:\n      setBuffering(false);\n      onPlaying();\n      break;\n    case MediaPlayer.Event.ESAdded:\n        if (event.getEsChangedType() == Media.Track.Type.Audio) {\n            setESTrackLists();\n        } else if (event.getEsChangedType() == Media.Track.Type.Text) {\n            setESTrackLists();\n        }\n    case MediaPlayer.Event.ESDeleted:\n        invalidateESTracks(event.getEsChangedType());\n        break;\n    case MediaPlayer.Event.Buffering:\n        if (playerState.isPlaying()) {\n            setBuffering(event.getBuffering() != 100f);\n        }\n        break;\n  }\n  */\n});\n\n// methods\nasync function showFullscreenNotificationIfNeeded({ placement, hasPremium, adsShown }) {\n  const manager = AppNotificationManager.getInstance();\n  const notification = await manager.get({\n    placement,\n    hasPremium,\n    isLive: isLive.value,\n    adsShown,\n  });\n\n  console.log(`showFullscreenNotificationIfNeeded: placement=${placement} hasPremium=${hasPremium} adsShown=${adsShown} notification=${JSON.stringify(notification)}`)\n\n  if (notification && notification.url) {\n    await VideoPlayer.setPlayingAds({ value: true });\n    openExternalPage({\n      url: notification.url,\n    });\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction openExternalPage({ url }) {\n  console.log(`openExternalPage`);\n  externalPageUrl.value = url;\n  externalPageVisible.value = true;\n}\n\nasync function closeExternalPage() {\n  console.log(`closeExternalPage`);\n  await VideoPlayer.setPlayingAds({ value: false });\n  externalPageVisible.value = false;\n  externalPageUrl.value = null;\n  canRequestAdsDeferred?.resolve(true);\n}\n\nasync function initImaSdkAdPlayer(\n  inAppMode,\n  videoPlayer,\n  adContainer,\n  sizeReferenceContainer\n) {\n  // IMA SDK ad player\n  imaSdkAdPlayer = new ImaSdkAdPlayer({\n    videoPlayer,\n    adContainer,\n    sizeReferenceContainer,\n    inAppMode,\n    activity: {\n      paused() {\n        return activityPaused.value;\n      },\n      showAdsContainer() {\n        console.log(`ads: showAdsContainer`);\n        playingAds.value = true;\n      },\n      hideAdsContainer() {\n        console.log(`ads: hideAdsContainer`);\n        playingAds.value = false;\n      },\n    },\n  });\n  await imaSdkAdPlayer.init();\n\n  imaSdkAdPlayer.addListener(\"finished\", () => {\n    console.log(`ads-preload: preload after previous ads`);\n    setTimeout(requestMidrollAds, 2000);\n  });\n}\n\nfunction toggleInformation() {\n  showingInformation.value = !showingInformation.value;\n}\n\nfunction showPlayPauseAnimation(type) {\n  playPauseAnimationIcon.value = type == \"play\" ? \"mdi-play\" : \"mdi-pause\";\n  if (playPauseAnimationTimer) {\n    clearTimeout(playPauseAnimationTimer);\n  }\n\n  // const el = playPauseAnimation.value;\n\n  console.log(`play-pause-animation: show: type=${type}`);\n  playPauseAnimationVisible.value = true;\n  playPauseAnimationTimer = setTimeout(() => {\n    console.log(`play-pause-animation: hide: type=${type}`);\n    playPauseAnimationVisible.value = false;\n  }, 2500);\n}\n\nfunction showVideoSizeInfo(size) {\n  let msg = getVideoSizeName($i18n, size);\n  if (!isTv.value) {\n    msg += '<div class=\"as-small-text\">' + $i18n.t(\"resize_tip\") + \"</div>\";\n  }\n  showInfo(msg, 5000);\n}\n\nfunction showInfo(message, duration) {\n  onScreenMessage.value = message;\n  if (onScreenTimer) {\n    clearTimeout(onScreenTimer);\n  }\n  onScreenTimer = setTimeout(() => (onScreenMessage.value = null), duration);\n}\n\nasync function togglePause() {\n  try {\n    if (isPlaying.value) {\n      await pause();\n      await VideoPlayer.showInterstitial({ placement: \"pause\" });\n    } else {\n      await play();\n    }\n  } catch (e) {\n    console.error(`togglePause:error: ${e}`);\n  }\n}\n\n/** Add \"target\" param to the given params */\nfunction setTarget(params) {\n  return { ...params, target: currentTarget.value };\n}\n\nasync function play() {\n  showPlayPauseAnimation(\"play\");\n\n  // AceCast - just play (we don't show video ads in RC)\n  // Chromecast - resume playback on the remote device and show video ads in RC\n  // Local - show video ads and the resume playback\n\n  if (isAceCastPlayback.value) {\n    await VideoPlayer.play(setTarget({}));\n  } else if (isChromecastPlayback.value) {\n    await VideoPlayer.play(setTarget({}));\n    playMidrollAds();\n  } else if (!(await playMidrollAds())) {\n    await VideoPlayer.play(setTarget({}));\n  }\n}\n\nfunction requestMidrollAds() {\n  if (imaSdkAdPlayer.adsReady) {\n    console.log(`ads-preload: already preloaded`);\n    return;\n  }\n\n  midrollTags = null;\n\n  console.log(\n    `requestMidrollAds: p2p=${isP2P.value} isLive=${\n      isLive.value\n    } media=${JSON.stringify(mediaItem.value)}`\n  );\n\n  VideoPlayer.requestVideoAds({\n    placement: \"unpause\",\n    infohash: mediaItem.value?.infohash,\n    isLive: isLive.value ? 1 : 0,\n    forceAds: false,\n    debugOptions: \"use_vmap\",\n  })\n    .then((response) => {\n      console.log(\n        `requestMidrollAds: got midroll ads: response=${JSON.stringify(response)}`\n      );\n      if (response?.vastTags) {\n        const data = JSON.parse(response.vastTags);\n        midrollTags = data.map((item) => item.url);\n        console.log(\n          `requestMidrollAds: got midroll ads: tags=${JSON.stringify(midrollTags)}`\n        );\n\n        if (midrollTags.length > 0) {\n          midrollVmapMode = shouldUseVmap(midrollTags[0])\n          console.log(`requestMidrollAds: useVmap=${midrollVmapMode}`);\n\n          if (midrollVmapMode) {\n            // preload tags\n            imaSdkAdPlayer.showAds({\n              tags: midrollTags,\n              maxAds: 2,\n              preload: true,\n              placement: \"midroll\",\n              vmap: midrollVmapMode,\n            });\n          }\n        }\n      }\n    })\n    .catch((e) => {\n      console.log(`Failed to load ads on pause: ${e}`);\n    });\n}\n\nasync function playMidrollAds() {\n  if (isAceCastPlayback.value) {\n    return false;\n  }\n\n  console.log(`playMidrollAds: useVmap=${midrollVmapMode}`);\n\n  if (midrollVmapMode) {\n    return await imaSdkAdPlayer.startIfPreloaded();\n  } else {\n    if (midrollTags?.length > 0) {\n      const tags = midrollTags;\n      midrollTags = null;\n      showAds(tags);\n    } else {\n      return false;\n    }\n  }\n}\n\nasync function pause() {\n  showPlayPauseAnimation(\"pause\");\n  if (!isAceCastPlayback.value) {\n    requestMidrollAds();\n  }\n  await VideoPlayer.pause(setTarget({}));\n}\n\nfunction showAdUi() {\n  const container = document.querySelector(\".ad-container > div > iframe\");\n  if (container) {\n    container.style.display = \"block\";\n  }\n}\n\nfunction hideAdUi() {\n  const container = document.querySelector(\".ad-container > div > iframe\");\n  if (container) {\n    container.style.display = \"none\";\n  }\n}\n\nasync function stop() {\n  if (isAceCastPlayback.value) {\n    await stopPlayer();\n    await showInterstitial(\"stop\");\n  } else if (isChromecastPlayback.value) {\n    await stopPlayer();\n    await showInterstitial(\"stop\");\n    await imaSdkAdPlayer.startIfPreloaded();\n  } else {\n    await VideoPlayer.pause(setTarget({}));\n    await showInterstitial(\"stop\");\n    const callback = async () => {\n      console.log(`video ads finished callback`);\n      await stopPlayer();\n    };\n    if (!(await imaSdkAdPlayer.startIfPreloaded(callback))) {\n      await stopPlayer();\n    }\n  }\n}\n\nasync function stopPlayer() {\n  await VideoPlayer.stop(setTarget({}));\n}\n\nasync function showInterstitial(placement) {\n  await VideoPlayer.showInterstitial({ placement });\n}\n\nasync function stopEngineSession() {\n  //NOTE: target is not used actually, you can use any value for now\n  await VideoPlayer.stopEngineSession({ target: TARGET_LOCAL });\n}\n\nasync function skipNext() {\n  if (hasM3uPlaylist.value) {\n    await VideoPlayer.m3uPlaylistNext();\n  } else {\n    await VideoPlayer.next(setTarget({}));\n  }\n}\n\nasync function skipPrev() {\n  if (hasM3uPlaylist.value) {\n    await VideoPlayer.m3uPlaylistPrev();\n  } else {\n    await VideoPlayer.prev(setTarget({}));\n  }\n}\n\nasync function togglePiP() {\n  await VideoPlayer.togglePiP();\n}\n\nasync function restart() {\n  await showResolver();\n}\n\nasync function showResolver() {\n  await VideoPlayer.showResolver(setTarget({}));\n}\n\nasync function goHome() {\n  await VideoPlayer.goHome();\n}\n\nasync function resizeVideo() {\n  await VideoPlayer.resizeVideo(setTarget({}));\n}\n\nasync function setVideoSize(size) {\n  await VideoPlayer.setVideoSize(setTarget({ size }));\n}\n\nasync function setDisplayUnderNotch(enabled) {\n  await VideoPlayer.setDisplayUnderNotch(setTarget({ enabled }));\n\n  // redraw to apply new settings\n  await VideoPlayer.hideSystemStatusBar();\n  await VideoPlayer.showSystemStatusBar();\n}\n\nfunction onResizeVideoLongPress() {\n  openDialog(DialogType.VIDEO_SIZE);\n}\n\nasync function goLive() {\n  await VideoPlayer.goLive(setTarget({}));\n}\n\nasync function seekBy(value) {\n  const newTime = playerState.value.time + value * 1000;\n  await VideoPlayer.seekTo(setTarget({ time: newTime }));\n\n  const sign = value > 0 ? \"+\" : \"-\";\n  const displayValue = Math.abs(value);\n  showInfo(`${sign}${formatTime(displayValue * 1000)}`, 2500);\n}\n\nasync function lockScreen() {\n  await VideoPlayer.lockScreen();\n}\n\nasync function unlockScreen() {\n  unlockButtonVisible.value = false;\n  await VideoPlayer.unlockScreen();\n}\n\n// async function toggleLock() {\n//     await VideoPlayer.toggleLock();\n// }\n\nasync function showOverlay(forceShowSystemBar = false) {\n  if (!isLocked.value || forceShowSystemBar) {\n    await VideoPlayer.showSystemStatusBar();\n  }\n\n  if (isLocked.value) {\n    showUnlockButton();\n  } else {\n    overlayVisible.value = true;\n    showOverlayWhenNotPlaying.value = true;\n    hideOverlayDelayed();\n  }\n}\n\nfunction showUnlockButton() {\n  if (unlockButtonTimer) {\n    clearTimeout(unlockButtonTimer);\n  }\n  unlockButtonVisible.value = true;\n  unlockButtonTimer = setTimeout(\n    () => (unlockButtonVisible.value = false),\n    5000\n  );\n}\n\nasync function hideOverlayDelayed() {\n  if (overlayHideTimer) {\n    clearTimeout(overlayHideTimer);\n  }\n  overlayHideTimer = setTimeout(hideOverlay, mainStore.overlayHideTimeout);\n}\n\nconst needFocus = computed(() => {\n  return isOverlayVisible.value || unlockButtonVisible.value || dialog.value.visible;\n});\n\nconst isOverlayVisible = computed(() => {\n  if (isLocked.value) {\n    return false;\n  }\n\n  if (isInPiP.value) {\n    return false;\n  }\n\n  // Hide controls when TV playlist is shown\n  if (isTv.value && dialog.value.visible && dialog.value.type === 'playlist') {\n    return false;\n  }\n\n  if (swipeHintVisible.value) {\n    return false;\n  }\n\n  return (\n    overlayVisible.value ||\n    !isLocalPlayback.value ||\n    (!isPlaying.value && (!isPrebuffering.value || !isTv.value) && showOverlayWhenNotPlaying.value) ||\n    dialog.value.visible ||\n    (!isVideo.value && !isTv.value) ||\n    draggingProgress.value ||\n    draggingVolume.value\n  );\n});\n\nconst canHideOverlay = computed(() => {\n  return (\n    isLocalPlayback.value &&\n    isVideo.value &&\n    !dialog.value.visible &&\n    mainStore.isTv\n  );\n});\n\nfunction hideOverlay({ force = false } = {}) {\n  overlayVisible.value = false;\n  if (force) {\n    // Overlay is forced to hide when \"back\" is pressed\n    showOverlayWhenNotPlaying.value = false;\n    draggingProgress.value = false;\n    draggingVolume.value = false;\n  }\n}\n\nfunction isInteractiveElement(target) {\n  if (!target) {\n    return false;\n  }\n\n  let element = target;\n\n  // Check element and all its parents up to the player-screen container\n  while (element && element !== document.body) {\n    // Check if element is a button\n    if (\n      element.tagName === \"BUTTON\" ||\n      element.classList?.contains(\"v-btn\") ||\n      element.classList?.contains(\"control-button\") ||\n      element.getAttribute(\"role\") === \"button\"\n    ) {\n      return true;\n    }\n\n    // Check if element is a slider\n    if (\n      element.classList?.contains(\"v-slider\") ||\n      element.classList?.contains(\"v-slider__thumb-container\") ||\n      element.closest?.(\".v-slider\")\n    ) {\n      return true;\n    }\n\n    // Check if element has click handler (Vue adds __vueParentComponent or similar)\n    // Also check for common interactive elements\n    if (\n      element.onclick ||\n      element.getAttribute(\"onclick\") ||\n      element.getAttribute(\"@click\") ||\n      element.tagName === \"A\" ||\n      element.tagName === \"INPUT\" ||\n      element.tagName === \"SELECT\" ||\n      element.tagName === \"TEXTAREA\"\n    ) {\n      return true;\n    }\n\n    // Check if element is inside a clickable container\n    const clickableParent = element.closest?.(\n      'button, .v-btn, .control-button, a, [role=\"button\"], .v-slider, [onclick]'\n    );\n    if (clickableParent) {\n      return true;\n    }\n\n    // Stop at player-screen container\n    if (element.classList?.contains(\"player-screen\")) {\n      break;\n    }\n\n    element = element.parentElement;\n  }\n\n  return false;\n}\n\nasync function toggleAudioMode() {\n  console.log(`switchToAudio: isVideo=${isVideo.value} isAudio=${isAudio.value}`);\n  if (isVideo.value) {\n    if (isAudio.value) {\n      await VideoPlayer.switchToVideo();\n    } else {\n      await VideoPlayer.switchToAudio();\n    }\n  }\n}\n\nfunction onTouchStart(event) {\n  // Block all interactions when swipe hint is visible (dismiss ONLY by OK button)\n  if (swipeHintVisible.value) {\n    return;\n  }\n\n  // Reset swipe detection flag for new touch sequence\n  swipeDetected.value = false;\n  swipeInProgress.value = false;\n  swipeTriggered.value = false;\n  currentTouchY.value = null;\n  swipeOffset.value = 0;\n  \n  // Store screen height for threshold calculation (update each touch to handle rotation)\n  screenHeight.value = window.innerHeight;\n  \n  // Store touch start info for swipe detection\n  if (event.touches && event.touches.length > 0) {\n    touchStartTime.value = Date.now();\n    touchStartY.value = event.touches[0].clientY;\n    touchStartX.value = event.touches[0].clientX;\n  }\n  \n  // Delay showing overlay to allow swipe detection\n  // Clear any existing timer\n  if (overlayShowTimer.value) {\n    clearTimeout(overlayShowTimer.value);\n    overlayShowTimer.value = null;\n  }\n  \n  // Only show overlay if it's not already visible\n  // We'll check swipeDetected in the timer callback\n  if (!isOverlayVisible.value) {\n    overlayShowTimer.value = setTimeout(() => {\n      // Only show overlay if we haven't detected a swipe\n      if (!swipeDetected.value) {\n        showOverlay();\n      }\n      overlayShowTimer.value = null;\n    }, 300); // 300ms delay to allow swipe detection to complete\n  }\n}\n\nfunction onTouchMove(event) {\n  // Block all interactions when swipe hint is visible (dismiss ONLY by OK button)\n  if (swipeHintVisible.value) {\n    return;\n  }\n\n  // Don't allow swipe when overlay is visible and isVideo is true\n  if (isOverlayVisible.value && isVideo.value) {\n    return;\n  }\n  \n  if (!canSwipePlaylist.value || !touchStartY.value || !event.touches || event.touches.length === 0) {\n    return;\n  }\n  \n  const currentY = event.touches[0].clientY;\n  const currentX = event.touches[0].clientX;\n  const deltaY = currentY - touchStartY.value;\n  const deltaX = currentX - touchStartX.value;\n  const distanceY = Math.abs(deltaY);\n  const distanceX = Math.abs(deltaX);\n  \n  // Cancel overlay timer if vertical movement detected\n  if (overlayShowTimer.value && distanceY > SWIPE_MOVEMENT_THRESHOLD && distanceY > distanceX) {\n    clearTimeout(overlayShowTimer.value);\n    overlayShowTimer.value = null;\n  }\n  \n  // Check if it's a vertical swipe (vertical movement is greater than horizontal)\n  if (distanceY > distanceX && distanceY > SWIPE_MOVEMENT_THRESHOLD) {\n    // Mark swipe in progress\n    if (!swipeInProgress.value) {\n      swipeInProgress.value = true;\n      swipeDetected.value = true;\n      // Legacy behavior: hide swipe hint when user starts performing a swipe\n      if (SWIPE_HINT_DISMISS_BY_TAP) {\n        swipeHintVisible.value = false;\n      }\n      \n      // Determine direction and get target item\n      const isSwipeDown = deltaY > 0;\n      const items = m3uPlaylistItems.value;\n      \n      if (items.length > 1) {\n        let targetIndex;\n        let targetItem;\n        let direction;\n        \n        if (isSwipeDown) {\n          // Swipe down = previous item\n          direction = 'prev';\n          targetIndex = getPrevIndex();\n          targetItem = items[targetIndex];\n        } else {\n          // Swipe up = next item\n          direction = 'next';\n          targetIndex = getNextIndex();\n          targetItem = items[targetIndex];\n        }\n        \n        if (targetItem) {\n          // Show feedback (arrow); position will be driven by swipeOffset\n          showSwipeFeedback(direction, targetItem);\n\n          const offset = isSwipeDown\n            ? Math.max(0, currentY - touchStartY.value)\n            : Math.max(0, touchStartY.value - currentY);\n\n          swipeOffset.value = offset;\n\n          // Track if threshold reached (action will be triggered on touch end)\n          // Revert if user moves back below threshold\n          const threshold = SWIPE_TRIGGER_THRESHOLD;\n\n          if (offset >= threshold) {\n            swipeTriggered.value = true;\n          } else if (swipeTriggered.value && offset < threshold) {\n            // User moved back below threshold, revert the action\n            swipeTriggered.value = false;\n          }\n        }\n      }\n    } else {\n      // Update current touch position for feedback positioning\n      const isSwipeDown = swipeFeedbackDirection.value === 'prev';\n      const offset = isSwipeDown\n        ? Math.max(0, currentY - touchStartY.value)\n        : Math.max(0, touchStartY.value - currentY);\n\n      swipeOffset.value = offset;\n\n      // Track if threshold reached (action will be triggered on touch end)\n      // Revert if user moves back below threshold\n      const threshold = SWIPE_TRIGGER_THRESHOLD;\n\n      if (offset >= threshold) {\n        swipeTriggered.value = true;\n      } else if (swipeTriggered.value && offset < threshold) {\n        // User moved back below threshold, revert the action\n        swipeTriggered.value = false;\n      }\n    }\n  }\n}\n\nfunction onTouchEnd(event) {\n  // Block all interactions when swipe hint is visible (dismiss ONLY by OK button)\n  if (swipeHintVisible.value) {\n    return;\n  }\n\n  // Always cancel overlay timer on touch end - we'll show overlay only if no swipe detected\n  if (overlayShowTimer.value) {\n    clearTimeout(overlayShowTimer.value);\n    overlayShowTimer.value = null;\n  }\n\n  if (!canSwipePlaylist.value) {\n    // If we can't swipe, handle tap behavior\n    if (isOverlayVisible.value && !isTv.value && !swipeDetected.value && !isDialogVisible.value && !draggingProgress.value && !draggingVolume.value) {\n      // Check if tap was on empty space (non-interactive element)\n      const touch = event.changedTouches?.[0];\n      if (touch) {\n        const target = document.elementFromPoint(touch.clientX, touch.clientY);\n        if (!isInteractiveElement(target)) {\n          // Tap on empty space - hide overlay\n          hideOverlay({ force: true });\n        }\n      }\n    } else if (!isOverlayVisible.value && !swipeDetected.value) {\n      // Show overlay on simple tap when it's not visible\n      showOverlay();\n    }\n    // Reset touch tracking\n    touchStartTime.value = null;\n    touchStartY.value = null;\n    touchStartX.value = null;\n    swipeDetected.value = false;\n    return;\n  }\n  \n  if (!touchStartTime.value || !touchStartY.value || !touchStartX.value) {\n    // Reset touch tracking\n    touchStartTime.value = null;\n    touchStartY.value = null;\n    touchStartX.value = null;\n    swipeDetected.value = false;\n    return;\n  }\n  \n  if (!event.changedTouches || event.changedTouches.length === 0) {\n    // Reset touch tracking\n    touchStartTime.value = null;\n    touchStartY.value = null;\n    touchStartX.value = null;\n    swipeDetected.value = false;\n    return;\n  }\n  \n  // Trigger action if threshold was reached during swipe\n  if (swipeInProgress.value && swipeTriggered.value) {\n    const isSwipeDown = swipeFeedbackDirection.value === 'prev';\n    if (isSwipeDown) {\n      onSwipeDown();\n    } else {\n      onSwipeUp();\n    }\n  } else if (swipeInProgress.value && !swipeTriggered.value) {\n    hideSwipeFeedback();\n  } else if (!swipeInProgress.value && !swipeDetected.value) {\n    // Legacy behavior: hide swipe hint on single tap\n    if (SWIPE_HINT_DISMISS_BY_TAP) {\n      swipeHintVisible.value = false;\n    }\n\n    if (isOverlayVisible.value && !isTv.value && !isDialogVisible.value && !draggingProgress.value && !draggingVolume.value) {\n      // Overlay is visible - check if tap was on empty space\n      const touch = event.changedTouches?.[0];\n      if (touch) {\n        const target = document.elementFromPoint(touch.clientX, touch.clientY);\n        if (!isInteractiveElement(target)) {\n          // Tap on empty space - hide overlay\n          hideOverlay({ force: true });\n        }\n      }\n    } else if (!isOverlayVisible.value) {\n      // Not a swipe - show overlay on tap\n      showOverlay();\n    }\n  }\n  \n  // Reset touch tracking\n  touchStartTime.value = null;\n  touchStartY.value = null;\n  touchStartX.value = null;\n  swipeDetected.value = false;\n  swipeInProgress.value = false;\n  swipeTriggered.value = false;\n  swipeOffset.value = 0;\n  currentTouchY.value = null;\n}\n\nfunction dismissSwipeHint() {\n  swipeHintVisible.value = false;\n}\n\nfunction updateSwipeHintOkPosition() {\n  try {\n    const arrowEl = swipeHintDownArrowEl.value;\n    const okEl = swipeHintOkButtonEl.value;\n    if (!arrowEl || !okEl) {\n      console.log(`qqq: 1`);\n      swipeHintOkMidY.value = null;\n      return;\n    }\n\n    const arrowRect = arrowEl.getBoundingClientRect();\n    const okRect = okEl.getBoundingClientRect();\n    const viewportHeight = window.innerHeight || document.documentElement.clientHeight;\n\n    const arrowBottom = arrowRect.bottom;\n    const mid = (arrowBottom + viewportHeight) / 2;\n\n    // Clamp to stay within visible viewport with a small margin.\n    const margin = 8;\n    const halfBtn = okRect.height * 0.25;\n    const minY = arrowBottom + halfBtn + margin;\n    const maxY = viewportHeight - halfBtn - margin;\n\n    swipeHintOkMidY.value = Math.min(Math.max(mid, minY), maxY);\n  } catch (e) {\n    console.log(`qqq: 2`, e);\n    swipeHintOkMidY.value = null;\n  }\n}\n\nfunction showSwipeFeedback(direction, item) {\n  swipeFeedbackDirection.value = direction;\n  swipeFeedbackItem.value = item;\n  swipeFeedbackVisible.value = true;\n  // Don't set currentTouchY here - it will be set in onTouchMove\n  // This ensures the initial render happens with the edge value\n}\n\nfunction hideSwipeFeedback() {\n  swipeFeedbackVisible.value = false;\n  swipeFeedbackDirection.value = null;\n  swipeFeedbackItem.value = null;\n  currentTouchY.value = null;\n  swipeInProgress.value = false;\n}\n\n\nfunction getNextIndex() {\n  const currentPos = m3uPlaylistState.value?.position ?? -1;\n  const items = m3uPlaylistItems.value;\n  const ALLOW_WRAP = true;\n  \n  if (currentPos < 0) {\n    return 0;\n  } else if (currentPos < items.length - 1) {\n    return currentPos + 1;\n  } else {\n    // At last item\n    if (ALLOW_WRAP && items.length > 1) {\n      return 0; // Wrap to first item\n    } else {\n      return items.length - 1; // Stay at last\n    }\n  }\n}\n\nfunction getPrevIndex() {\n  const currentPos = m3uPlaylistState.value?.position ?? -1;\n  const items = m3uPlaylistItems.value;\n  const ALLOW_WRAP = true;\n  \n  if (currentPos <= 0) {\n    // At first item or invalid position\n    if (ALLOW_WRAP && items.length > 1) {\n      return items.length - 1; // Wrap to last item\n    } else {\n      return 0; // Stay at first\n    }\n  } else {\n    return currentPos - 1;\n  }\n}\n\nasync function onSwipeUp() {\n  if (!canSwipePlaylist.value) {\n    return;\n  }\n  \n  const items = m3uPlaylistItems.value;\n  if (items.length <= 1) {\n    return;\n  }\n  \n  // Execute navigation\n  await skipNext();\n  \n  // Keep feedback visible for a moment after navigation, then hide\n  setTimeout(() => {\n    hideSwipeFeedback();\n  }, 500);\n}\n\nasync function onSwipeDown() {\n  if (!canSwipePlaylist.value) {\n    return;\n  }\n  \n  const items = m3uPlaylistItems.value;\n  if (items.length <= 1) {\n    return;\n  }\n  \n  // Execute navigation\n  await skipPrev();\n  \n  // Keep feedback visible for a moment after navigation, then hide\n  setTimeout(() => {\n    hideSwipeFeedback();\n  }, 500);\n}\n\nfunction onKeyUp(event) {\n  // console.log(`onKeyUp: key=${event.key} overlay=${isOverlayVisible.value} dialog=${isDialogVisible.value} navPaused=${navigationService.isPaused()}`);\n  if (navigationService.isPaused()) {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n}\n\nfunction onKeyDown(event) {\n  //console.log(`onKeyDown: key=${event.key} overlay=${isOverlayVisible.value} dialog=${isDialogVisible.value} navPaused=${navigationService.isPaused()}`);\n\n  if (navigationService.isPaused()) {\n    event.preventDefault();\n    event.stopPropagation();\n    return;\n  }\n\n  switch (event.key) {\n    case \"ArrowLeft\":\n      if (!isOverlayVisible.value && isFastSeekEnabled.value) {\n        seekBy(-10);\n      }\n      break;\n\n    case \"ArrowRight\":\n      if (!isOverlayVisible.value && isFastSeekEnabled.value) {\n        seekBy(10);\n      } else if (!isOverlayVisible.value && !isDialogVisible.value) {\n        showMenu();\n      }\n      break;\n\n    case \"ArrowUp\":\n    case \"KeyW\":\n      // On TV, when overlay is hidden and M3U playlist is active, switch to previous item\n      if (!isOverlayVisible.value && !isDialogVisible.value && isTv && hasM3uPlaylist.value) {\n        skipPrev();\n        event.preventDefault();\n        event.stopPropagation();\n      } else {\n        showOverlay();\n      }\n      break;\n\n    case \"ArrowDown\":\n    case \"KeyS\":\n      // On TV, when overlay is hidden and M3U playlist is active, switch to next item\n      if (!isOverlayVisible.value && !isDialogVisible.value && isTv && hasM3uPlaylist.value) {\n        skipNext();\n        event.preventDefault();\n        event.stopPropagation();\n      } else {\n        showOverlay();\n      }\n      break;\n\n    default:\n      if (isOverlayVisible.value) {\n        skipProgressClick.value = false;\n      } else if (isLive.value) {\n        skipProgressClick.value = true;\n        setTimeout(() => skipProgressClick.value = false, 750);\n      }\n      showOverlay();\n  }\n}\n\n// async function switchToLocalPlayer() {\n//   playbackMode.value = MODE_LOCAL;\n// }\n\n// async function switchToAcecast() {\n//   playbackMode.value = MODE_ACECAST;\n// }\n\n// async function switchToChromecast() {\n//   playbackMode.value = MODE_CHROMECAST;\n// }\n\nfunction playbackModeFromState(store) {\n  if (store.hasLocalPlayback) {\n    return MODE_LOCAL;\n  } else if (store.hasAcecastPlayback) {\n    return MODE_ACECAST;\n  } else if (store.hasChromecastPlayback) {\n    return MODE_CHROMECAST;\n  } else {\n    return MODE_IDLE;\n  }\n}\n\nfunction showMenu() {\n  openDialog(DialogType.MENU);\n}\n\n// audio track selector\nasync function selectAudioTrack() {\n  openDialog(DialogType.AUDIO_TRACK);\n}\n\nasync function onAudioTrackSelected(track) {\n  closeDialog();\n  await VideoPlayer.setAudioTrack(setTarget({ trackId: track.id }));\n}\n\n// Generic dialog functions\nfunction openDialog(dialogType) {\n  currentDialog.value = dialogType;\n  onDialogOpened();\n}\n\nfunction closeDialog() {\n  currentDialog.value = null;\n  onDialogClosed();\n}\n\nfunction onDialogOpened() {\n  // We need to register close callback in the main store to  allow closing dialog on back button press\n  mainStore.currentDialog = {\n    cancel: closeDialog,\n  };\n}\n\nasync function onDialogClosed() {\n  // This should be called every time dialog is closed\n  hideOverlayDelayed();\n  mainStore.currentDialog = null;\n}\n\n// spu track selector\nasync function selectSpuTrack() {\n  openDialog(DialogType.SPU_TRACK);\n}\n\nasync function onSpuTrackSelected(track) {\n  closeDialog();\n  await VideoPlayer.setSpuTrack(setTarget({ trackId: track.id }));\n}\n\nasync function toggleSubtitles() {\n  let newTrack;\n\n  //TODO: implement\n  if (currentSpuTrack.value < 0) {\n    newTrack = 1;\n  } else {\n    newTrack = -1;\n  }\n\n  mainStore.playerState.local.spuTrack = newTrack;\n  await VideoPlayer.setSpuTrack(setTarget({ trackId: newTrack }));\n}\n\n// playlist toggle\nasync function showPlaylist() {\n  if (isTv.value) {\n    // Hide player overlay immediately on TV before showing the native playlist overlay.\n    hideOverlay({ force: true });\n    await VideoPlayer.showNativeTvPlaylist();\n  } else if (hasM3uPlaylist.value) {\n    await VideoPlayer.showM3uPlaylist();\n  } else {\n    openDialog(DialogType.PLAYLIST);\n  }\n}\n\nasync function onPlaylistItemSelected(item, index) {\n  console.log(\n    `playlist item selected: index=${index} item=${JSON.stringify(item)}`\n  );\n  closeDialog();\n  if (hasM3uPlaylist.value) {\n    VideoPlayer.m3uPlaylistPlayIndex({ index });\n  } else {\n    await VideoPlayer.playIndex(setTarget({ index }));\n  }\n}\n\n// stream selector\nasync function selectStream() {\n  openDialog(DialogType.STREAM);\n}\n\nasync function onStreamSelected(stream) {\n  closeDialog();\n  await VideoPlayer.switchStream(\n    setTarget({ index: stream.index, type: stream.streamType })\n  );\n}\n\n// progress slider\nfunction onProgressClick() {\n  console.log(\n    `onProgressClick: dragging=${draggingProgress.value} value=${draggingValue.value} overlayVisible=${overlayVisible.value} skipProgressClick=${skipProgressClick.value}`\n  );\n  if (skipProgressClick.value) {\n    return;\n  }\n\n  if (draggingProgress.value) {\n    // user moved slider to the new position using keyboard/d-pad and pressed \"enter\"\n    applyProgressChange(draggingValue.value);\n  } else {\n    // user pressed \"enter\" without moving slider\n    togglePause();\n  }\n}\n\nasync function onSliderStart(value) {\n  console.log(\"onSliderStart\", value);\n  draggingValue.value = value;\n  draggingProgress.value = true;\n}\n\nasync function seekTo(value) {\n  value = parseInt(value);\n  if (isLive.value) {\n    const livePos = playerState.value.engineStatus?.livePos;\n    if (livePos) {\n      let seekTo = livePos.first + value;\n      const len = livePos.last - livePos.first;\n      if (len > 0) {\n        let skipSeek = false;\n        const percentToCurrent = Math.abs(seekTo - livePos.pos) / len;\n        const percentToLive = Math.abs(seekTo - livePos.last) / len;\n\n        if (percentToCurrent < 0.05) {\n          skipSeek = true;\n        }\n\n        if (percentToLive < 0.05) {\n          seekTo = -1;\n        }\n\n        console.log(\n          `liveSeek: value=${value} seekTo=${seekTo} percentToCurrent=${percentToCurrent} percentToLive=${percentToLive}`\n        );\n\n        if (!skipSeek) {\n          await VideoPlayer.liveSeek(setTarget({ position: seekTo }));\n        }\n      }\n    }\n  } else {\n    await VideoPlayer.seekTo(setTarget({ time: value }));\n  }\n}\n\nfunction onSliderEnd(value) {\n  console.log(\"onSliderEnd\", value);\n  applyProgressChange(value);\n}\n\nfunction applyProgressChange(value) {\n  const freezeFor = isLive.value ? 5000 : 2000;\n  draggingProgress.value = false;\n  draggingValue.value = 0;\n  freezeProgress.value = value;\n  if (freezeProgressTimer) {\n    clearTimeout(freezeProgressTimer);\n  }\n  freezeProgressTimer = setTimeout(\n    () => (freezeProgress.value = null),\n    freezeFor\n  );\n  seekTo(value);\n  hideOverlayDelayed();\n}\n\nfunction onSliderChange(value) {\n  console.log(\"onSliderChange\", value);\n  // If value === freezeProgress.value then we this is onSliderChange after onSliderEnd and we do nothing\n  // Otherwise this a change caused by keyboard navigation.\n  if (value !== freezeProgress.value) {\n    draggingValue.value = value;\n    draggingProgress.value = true;\n  }\n}\n\nfunction onSliderInput(value) {\n  //console.log(\"onSliderInput\", value);\n  // Need to use setTimeout because onSliderInput is called right before onSliderBlur\n  // when the user navigates away from the slider with keyboard/d-pad (by pressing \"up\")\n  setTimeout(() => {\n    if (draggingProgress.value) {\n      showSeekInfo(value);\n    }\n  }, 0);\n}\n\nfunction showSeekInfo(targetValue) {\n  let sign;\n  let delta;\n  if (liveProgress.value) {\n    delta =\n      -1000 *\n      liveProgress.value.duration *\n      (1 - targetValue / liveProgress.value.pieces);\n    sign = delta > 0 ? \"+\" : \"-\";\n    delta = Math.abs(delta);\n  } else {\n    // delta = targetValue - playerState.value.time;\n    delta = targetValue;\n    sign = \"\";\n  }\n\n  showInfo(`${sign}${formatTime(delta)}`, 2500);\n}\n\nasync function onSliderBlur() {\n  console.log(`onSliderBlur`);\n\n  // Need this to force slider render to restore value:\n  // - the user changes slider value with keyboard/d-pad\n  // - the user nagigates away from the slider without pressing \"Enter\"\n  // - slider loses focus\n  // - the value will not restore automatically\n  const forceRender = false;\n\n  draggingProgress.value = false;\n  draggingValue.value = 0;\n\n  if (forceRender) {\n    // full re-render of the slider component\n    forceSliderRender();\n  } else {\n    // reset current value of the slider\n    forceSliderReset();\n  }\n}\n\nfunction forceSliderRender() {\n  progressKey.value += 1;\n}\n\nasync function forceSliderReset() {\n  freezeProgress.value = 0;\n  await nextTick();\n  freezeProgress.value = null;\n}\n\nasync function onVolumeUpdate(value) {\n  // console.log(`onVolumeUpdate: value=${value} dragging=${draggingVolume.value}`);\n  if (draggingVolume.value) {\n    volume.value = value;\n    showInfo(`Volume ${value}%`, 1000);\n    if (setVolumeTimer) {\n      clearTimeout(setVolumeTimer);\n    }\n    setVolumeTimer = setTimeout(async () => {\n      await VideoPlayer.setVolume(setTarget({ volume: value }));\n      setVolumeTimer = null;\n    }, 100);\n  }\n}\n\nasync function onVolumeSliderStart(value) {\n  // console.log(`onVolumeSliderStart: value=${value}`);\n  volume.value = value;\n  draggingVolume.value = true;\n}\n\nasync function onVolumeSliderEnd(value) {\n  // console.log(`onVolumeSliderEnd: value=${value}`);\n  draggingVolume.value = false;\n  freezeVolume.value = value;\n  if (freezeVolumeTimer) {\n    clearTimeout(freezeVolumeTimer);\n  }\n  freezeVolumeTimer = setTimeout(() => (freezeVolume.value = null), 2000);\n  await VideoPlayer.setVolume(setTarget({ volume: value }));\n  hideOverlayDelayed();\n}\n\nasync function toggleMute() {\n  await VideoPlayer.mute(setTarget({ muted: !isMuted.value }));\n}\n\nfunction formatTime(time) {\n  if (renderingDisabled.value) {\n    return '00:00';\n  }\n\n  let prefix = \"\";\n  if (time < 0) {\n    time *= -1;\n    prefix = \"-\";\n  }\n  time = Math.floor(time / 1000);\n  const hours = Math.floor(time / 3600);\n  const minutes = Math.floor((time - hours * 3600) / 60);\n  const seconds = Math.floor(time - hours * 3600 - minutes * 60);\n\n  if (hours > 0) {\n    return `${prefix}${hours}:${minutes.toString().padStart(2, \"0\")}:${seconds\n      .toString()\n      .padStart(2, \"0\")}`;\n  } else {\n    return `${prefix}${minutes}:${seconds.toString().padStart(2, \"0\")}`;\n  }\n}\n\nasync function fixBoxSize() {\n  if (centerBox.value) {\n    if (isLandscapeOrientation.value) {\n      centerBox.value.style.height = \"\";\n    } else {\n      centerBox.value.style.height = centerBox.value.clientWidth + \"px\";\n    }\n  }\n}\n\nasync function setRate(rate) {\n  showInfo(`${rate}x`, 2500);\n  await VideoPlayer.setRate(setTarget({ rate }));\n}\n\nasync function setAudioDelay(value) {\n  showInfo(`${value}ms`, 2500);\n  await VideoPlayer.setAudioDelay(setTarget({ value }));\n}\n\nasync function setSpuDelay(value) {\n  showInfo(`${value}ms`, 2500);\n  await VideoPlayer.setSpuDelay(setTarget({ value }));\n}\n\nfunction setPlaybackMode(mode) {\n  playbackMode.value = mode;\n  showOverlay();\n\n  const remoteControl = mode != MODE_LOCAL;\n  VideoPlayer.updateScreenOrientation({ remoteControl });\n}\n\n// watch\nfunction watchPlaybackMode() {\n  playbackMode.value = playbackModeFromState(mainStore);\n  watch(\n    () => [\n      mainStore.hasLocalPlayback,\n      mainStore.hasAcecastPlayback,\n      mainStore.hasChromecastPlayback,\n      isInPiP.value,\n    ],\n    () => {\n      //TODO: why this is called about every second?\n      // console.log(`check playback mode: current=${playbackMode.value} local=${mainStore.hasLocalPlayback} acecast=${mainStore.hasAcecastPlayback} chromecast=${mainStore.hasChromecastPlayback} pip=${isInPiP.value}`);\n      let newPlaybackMode = playbackModeFromState(mainStore);\n      let forceModeUpdate = false;\n\n      if (playbackMode.value != MODE_LOCAL && isInPiP.value) {\n        newPlaybackMode = MODE_LOCAL;\n        forceModeUpdate = true;\n      } else if (\n        playbackMode.value == MODE_IDLE &&\n        newPlaybackMode != MODE_IDLE\n      ) {\n        forceModeUpdate = true;\n      } else if (\n        playbackMode.value == MODE_LOCAL &&\n        !mainStore.hasLocalPlayback\n      ) {\n        forceModeUpdate = true;\n      } else if (\n        playbackMode.value == MODE_ACECAST &&\n        !mainStore.hasAcecastPlayback\n      ) {\n        forceModeUpdate = true;\n      } else if (\n        playbackMode.value == MODE_CHROMECAST &&\n        !mainStore.hasChromecastPlayback\n      ) {\n        forceModeUpdate = true;\n      }\n\n      if (forceModeUpdate) {\n        console.log(\n          `check playback mode: force update: ${playbackMode.value}->${newPlaybackMode}`\n        );\n        setPlaybackMode(newPlaybackMode);\n      }\n\n      if (playingAds.value) {\n        if (isInPiP.value) {\n          hideAdUi();\n        } else {\n          showAdUi();\n        }\n      }\n    }\n  );\n}\n\nwatch(\n  isOverlayVisible,\n  async (value) => {\n    if (!value) {\n      await VideoPlayer.hideSystemStatusBar();\n    }\n    mainStore.overlayVisible = value;\n  },\n  { immediate: true }\n);\n\nwatch(\n  canHideOverlay,\n  async (value) => {\n    mainStore.canHideOverlay = value;\n    if (value) {\n      mainStore.hideOverlayFunc = () => hideOverlay({ force: true });\n    } else {\n      mainStore.hideOverlayFunc = null;\n    }\n  },\n  { immediate: true }\n);\n\nwatch(currentDialog, (value) => {\n  mainStore.isPanelVisible = value !== null;\n});\n\nwatch(preventFocus, (value) => {\n  if (!value) {\n    navigationService.restoreFocus();\n  }\n});\n\nwatch(\n  needFocus,\n  (value) => {\n    navigationService.setActive(value);\n  },\n  { immediate: true }\n);\n\nfunction initSwipeHint() {\n  // Watch for playback start to show swipe hint\n  watch(\n    [isPlaying, canUseSwipe],\n    ([playing, canSwipe]) => {\n      if (playing && canSwipe && !swipeHintShown.value && !isTv.value) {\n        // Show hint when playback starts and swipe is active\n        swipeHintVisible.value = true;\n        swipeHintShown.value = true;\n        try {\n          localStorage.setItem(SWIPE_HINT_STORAGE_KEY, \"1\");\n        } catch (e) {\n          // ignore storage errors\n        }\n      } else if (!playing) {\n        // Reset hint when playback stops\n        swipeHintVisible.value = false;\n      }\n    }\n  );\n}\n\nwatch(\n  swipeHintVisible,\n  async (visible) => {\n    if (visible) {\n      await nextTick();\n      updateSwipeHintOkPosition();\n      window.addEventListener(\"resize\", updateSwipeHintOkPosition);\n      window.addEventListener(\"orientationchange\", updateSwipeHintOkPosition);\n    } else {\n      window.removeEventListener(\"resize\", updateSwipeHintOkPosition);\n      window.removeEventListener(\"orientationchange\", updateSwipeHintOkPosition);\n      swipeHintOkMidY.value = null;\n    }\n  },\n  { immediate: true }\n);\nasync function enterAdsMode() {\n  playingAds.value = true;\n  await VideoPlayer.setPlayingAds({ value: true });\n}\n\nasync function leaveAdsMode() {\n  playingAds.value = false;\n  await VideoPlayer.setPlayingAds({ value: false });\n}\n\nfunction parseTagParams(tag) {\n  try {\n    const searchParams = new URL(tag).searchParams;\n\n    const params = {};\n    const paramMap = {\n      transport: \"_a\",\n    };\n\n    for (const name of Object.keys(paramMap)) {\n      params[name] = searchParams.get(paramMap[name]);\n    }\n\n    params.transport = parseInt(params.transport);\n    if (isNaN(params.transport)) {\n      params.transport = AD_TRANSPORT_IMA_SDK_APP;\n    }\n\n    return params;\n  } catch (e) {\n    return {};\n  }\n}\n\nfunction shouldUseVmap(tag) {\n  return tag && tag.indexOf('/vmap') !== -1;\n}\n\nfunction replaceMacros(tag) {\n  const macros = {\n    \"[X_AS_UI_APP_VERSION]\": mainStore.appVersion,\n  };\n\n  let result = tag;\n  for (const macroId of Object.keys(macros)) {\n    const macroValue = macros[macroId];\n    result = result.replace(macroId, macroValue);\n  }\n\n  return result;\n}\n\nasync function showAds(tags) {\n  if (tags?.length > 0) {\n    // For now we use first tag to parse params\n    const params = parseTagParams(tags[0]);\n    // const useVmap = shouldUseVmap(tags[0]);\n\n    // if (!useVmap) {\n    //   // force this transport to support non-vmap mode\n    //   params.transport = AD_TRANSPORT_IMA_SDK_WEBVIEW;\n    // }\n\n    // console.log(`showAds: useVmap=${useVmap} transport=${params.transport}`);\n\n    const newTags = [];\n    for (const tag of tags) {\n      newTags.push(replaceMacros(tag));\n    }\n\n    //TDOO: allow mixing different transports for different tags.\n    // I'm not sure that we ever need it.\n    // For now we handle all tags with the same transport.\n\n    //NOTE: we set \"playing ads\" flag here but it's responsibility of other \"showAdsXXX\" to clear this flag\n    await VideoPlayer.setPlayingAds({ value: true });\n\n    try {\n      if (params.transport === AD_TRANSPORT_IMA_SDK_APP) {\n        await showAdsImaSdk(newTags);\n      } else if (params.transport === AD_TRANSPORT_IMA_SDK_WEBVIEW) {\n        //TODO: implement promise\n        await showAdsInline(newTags);\n      } else if (params.transport === AD_TRANSPORT_WEB) {\n        await showAdsWeb(newTags);\n      } else {\n        throw new Error(`unknown transport: ${params.transport}`);\n      }\n    } catch (e) {\n      await VideoPlayer.setPlayingAds({ value: false });\n      console.log(`showAds:error: ${e.message}`);\n    }\n  }\n}\n\nasync function showAdsWeb(tags) {\n  throw new Error(`showAdsWeb: not implemented: tags=${tags.length}`);\n  // try {\n  //   const url = 'https://tv.acestream.org/staging/p/?q=debug&verbose=1&transport=webview&muted=1&tag=sampleSkippable';\n  //   const response = await VideoPlayer.showWebAds({ url });\n  //   console.log(`showAdsWeb: response=${JSON.stringify(response)}`)\n  // } catch (e) {\n  //   console.log(`showAdsWeb:error: ${e.message}`);\n  // }\n}\n\nasync function showAdsInline(tags) {\n  let currentTagIndex = -1;\n  let startedAds = 0;\n\n  console.log(`showAdsInline`);\n\n  function playNextAd() {\n    currentTagIndex += 1;\n    loadingAds.value = false;\n    console.log(\n      `adevent:playNextAd: index=${currentTagIndex} counter=${startedAds}/${MAX_ADS} activityPaused=${activityPaused.value}`\n    );\n    if (\n      !activityPaused.value &&\n      currentTagIndex < tags.length &&\n      startedAds < MAX_ADS\n    ) {\n      const playAdsRequest = new window.google.ima.AdsRequest();\n      playAdsRequest.adTagUrl = tags[currentTagIndex];\n      console.log(`adevent:playNextAd: tag=${playAdsRequest.adTagUrl}`);\n      // Without forced resetting second ad doesn't respond for clicks (e.g. you cannot skip).\n      // The reason is that \"div.videoAdUiClickElement\" is missing for the second ad for unknown reason.\n      adPlayer.reset(true);\n      adPlayer.playAds(playAdsRequest);\n    } else {\n      // Without resetting timed out ad can start playing in background in 5-10 seconds.\n      adPlayer.reset(true);\n      adPlayer = null;\n      leaveAdsMode();\n    }\n  }\n\n  try {\n    const playerContainer = document.querySelector(\n      \".ad-player-container .video-player\"\n    );\n    const adContainer = document.querySelector(\n      \".ad-player-container .ad-container\"\n    );\n\n    if (!playerContainer) {\n      throw new Error(\"Player container not found\");\n    }\n\n    if (!adContainer) {\n      throw new Error(\"Ad container not found\");\n    }\n\n    adPlayer = await initAds({ playerContainer, adContainer });\n  } catch (e) {\n    console.log(`Failed to init ads: ${e.message}`, e);\n    return;\n  }\n\n  // setup events\n  adPlayer.addEventListener(\"AdStarted\", () => {\n    console.log(\"adevent: ad started\");\n    ++startedAds;\n    loadingAds.value = false;\n    if (activityPaused.value) {\n      adPlayer.pause();\n    }\n  });\n  adPlayer.addEventListener(\"AdContentPauseRequested\", async () => {\n    console.log(\"adevent: AdContentPauseRequested\");\n    loadingAds.value = true;\n    enterAdsMode();\n    await nextTick();\n  });\n  adPlayer.addEventListener(\"AdContentResumeRequested\", () => {\n    console.log(\"adevent: AdContentResumeRequested\");\n  });\n  adPlayer.addEventListener(\"AdComplete\", () => {\n    console.log(\"adevent: ad complete\");\n    playNextAd();\n  });\n  adPlayer.addEventListener(\"AdError\", (event) => {\n    console.log(`adevent: ad error: ${JSON.stringify(event?.detail)}`);\n    playNextAd();\n  });\n  adPlayer.addEventListener(\"AdPaused\", () => {\n    console.log(`adevent: ad paused: activityPaused=${activityPaused.value}`);\n    // Sometimes ad is paused for unknown reason shortly after starting.\n    // This resumes playback, but what to do if pause is necessary?\n    // E.g. when the user clicks \"Learn more\"\n    if (!activityPaused.value) {\n      adPlayer.play();\n    }\n  });\n  adPlayer.addEventListener(\"AdSkipped\", () => {\n    console.log(\"adevent: ad skipped\");\n    playNextAd();\n  });\n\n  playNextAd();\n}\n\nasync function showAdsImaSdk(tags) {\n  try {\n    const useVmap = tags?.length > 0 && shouldUseVmap(tags[0])\n    console.log(`showAdsImaSdk: useVmap=${useVmap}`);\n    imaSdkAdPlayer.showAds({\n      tags,\n      maxAds: MAX_ADS,\n      placement: \"preroll\",\n      vmap: useVmap,\n    });\n  } catch (e) {\n    console.log(`showAdsImaSdk:error: ${e.message}`);\n  }\n}\n\n// lifecycle\nonMounted(async () => {\n  console.log(\"waiting for state...\");\n  await mainStore.waitState();\n  console.log(\"got state\");\n\n  // Load persisted swipe hint state\n  try {\n    swipeHintShown.value = localStorage.getItem(SWIPE_HINT_STORAGE_KEY) === \"1\";\n  } catch (e) {\n    swipeHintShown.value = false;\n  }\n\n  initSwipeHint();\n  showOverlay();\n\n  // Init playback mode with a tiny delay to give time to a local state to initialize.\n  // The local state usualy is missing on the start and is initialized soon after that.\n  // Detecting playback mode right on the start causes bugs in this situation:\n  // - acecast playback is running in the background\n  // - we start new local playback\n  // - on the start playback mode is detected as acecast (becase local playback is not initialized yet)\n  // - but we expected to switch to local playback mode\n  setTimeout(watchPlaybackMode, 100);\n\n  fixBoxSize();\n  window.addEventListener(\"resize\", fixBoxSize);\n  window.addEventListener(\"keydown\", onKeyDown);\n  window.addEventListener(\"keyup\", onKeyUp);\n  navigationService.restoreFocus();\n  await refreshFavoriteState();\n\n  //TODO: make this more configurable\n  const appInfo = await CapacitorApp.getInfo();\n  const inAppMode = appInfo.id === \"org.acestream.node\";\n  const playerContainer = document.querySelector(\n    \".ad-player-container .video-player\"\n  );\n  const adContainer = document.querySelector(\n    \".ad-player-container .ad-container\"\n  );\n  const sizeReferenceContainer = document.querySelector(\".player-root\");\n  await initImaSdkAdPlayer(\n    inAppMode,\n    playerContainer,\n    adContainer,\n    sizeReferenceContainer\n  );\n  listenP2PSession();\n});\n\nonBeforeUnmount(() => {\n  window.removeEventListener(\"resize\", fixBoxSize);\n  window.removeEventListener(\"keydown\", onKeyDown);\n  window.removeEventListener(\"keyup\", onKeyUp);\n  window.removeEventListener(\"resize\", updateSwipeHintOkPosition);\n  window.removeEventListener(\"orientationchange\", updateSwipeHintOkPosition);\n});\n</script>\n\n<template>\n  <div\n    class=\"player-root\"\n    :class=\"{\n      'is-tv': isTv,\n      'mode-portrait': !isLandscapeMode,\n      'mode-landscape': isLandscapeMode,\n    }\"\n  >\n\n    <!--\n    <div\n        v-if=\"false\"\n        style=\"\n          position: absolute;\n          top: 0;\n          left: 0;\n          margin-top: 12px;\n          margin-left: 12px;\n          font-size: 12px;\n          z-index: 1000;\n        \"\n      >\n      isOverlayVisible:{{ isOverlayVisible }}\n      overlayVisible:{{ overlayVisible }}\n      isLocalPlayback:{{ isLocalPlayback }}\n      isPlaying:{{ isPlaying }}\n      showOverlayWhenNotPlaying:{{ showOverlayWhenNotPlaying }}\n      isVideo:{{ isVideo }}\n      draggingProgress:{{ draggingProgress }}\n    </div>\n    -->\n\n    <div\n      v-show=\"playingAds\"\n      class=\"ad-player-container\"\n      :class=\"{\n        'is-tv': isTv,\n        'mode-portrait': !isLandscapeMode,\n        'mode-landscape': isLandscapeMode,\n        'orientation-portrait': !isLandscapeOrientation,\n        'orientation-landscape': isLandscapeOrientation,\n      }\"\n    >\n      <video class=\"video-player\" :class=\"{ 'as-visible': playingAds }\"></video>\n      <div class=\"ad-container\"></div>\n      <div class=\"ad-loading-progress-container\" v-if=\"loadingAds\">\n        <buffering-progress />\n      </div>\n    </div>\n\n    <!-- This is visible in PIP -->\n    <v-container class=\"page-container fill-height pip-container\" v-if=\"isInPiP && (isPrebuffering || isPlayerBuffering)\">\n      <div class=\"progress-container\">\n        <v-progress-circular\n          indeterminate\n          color=\"primary\"\n          size=\"24\"\n          width=\"1\"\n          />\n      </div>\n      <div class=\"p2p-info-container\" v-if=\"gotEngineSession && isPrebuffering\">\n        <div class=\"p2p-info-item\">Helping: {{ engineStatus.peers }}</div>\n        <div class=\"p2p-info-item\">DL: {{ engineStatus.speedDown }}</div>\n        <div class=\"p2p-info-item\">UL: {{ engineStatus.speedUp }}</div>\n      </div>\n    </v-container>\n\n    <div\n      v-if=\"showControls\"\n      v-show=\"!playingAds\"\n      @touchstart=\"onTouchStart\"\n      @touchmove=\"onTouchMove\"\n      @touchend=\"onTouchEnd\"\n      class=\"fill-height player-screen\"\n      :class=\"{\n        'developer-mode': DEVELOPER_MODE,\n        'is-tv': isTv,\n        'mode-portrait': !isLandscapeMode,\n        'mode-landscape': isLandscapeMode,\n        'orientation-portrait': !isLandscapeOrientation,\n        'orientation-landscape': isLandscapeOrientation,\n      }\"\n    >\n      <div v-if=\"!isLocalPlayback\" class=\"solid-background-image\"></div>\n      <div v-if=\"isOverlayVisible\" class=\"solid-background-overlay\"></div>\n\n      <!-- Swipe hint overlay -->\n      <div\n        v-if=\"swipeHintVisible\"\n        class=\"swipe-hint-overlay\"\n        @click.self.prevent.stop\n        @touchstart.self.prevent.stop\n        @touchmove.self.prevent.stop\n        @touchend.self.prevent.stop\n      >\n        <div class=\"swipe-hint-content\">\n          <div class=\"swipe-hint-arrow swipe-hint-arrow-up\">\n            <svg\n              width=\"64\"\n              height=\"64\"\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <path\n                d=\"M7 14L12 9L17 14\"\n                stroke=\"currentColor\"\n                stroke-width=\"0.5\"\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n              />\n            </svg>\n          </div>\n          <div class=\"swipe-hint-text\">{{ $t('swipe_hint') }}</div>\n          <div ref=\"swipeHintDownArrowEl\" class=\"swipe-hint-arrow swipe-hint-arrow-down\">\n            <svg\n              width=\"64\"\n              height=\"64\"\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <path\n                d=\"M7 10L12 15L17 10\"\n                stroke=\"currentColor\"\n                stroke-width=\"0.5\"\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n              />\n            </svg>\n          </div>\n        </div>\n        <div class=\"swipe-hint-ok-container\" :style=\"swipeHintOkContainerStyle\">\n          <div ref=\"swipeHintOkButtonEl\" class=\"swipe-hint-ok-button\" @click.stop=\"dismissSwipeHint\">\n            OK\n          </div>\n        </div>\n      </div>\n\n      <div\n        v-if=\"backdropUrl && !isPlayingOrPaused\"\n        class=\"poster\"\n        :style=\"`background-image: url(${backdropUrl})`\"\n      >\n        <div class=\"poster-overlay\"></div>\n      </div>\n\n      <div class=\"preloader-image\" v-if=\"isPrebuffering && gotPreloaderImage\">\n        <img :src=\"preloaderImageUrl\" class=\"image-background\" />\n        <div\n          class=\"image-foreground-container\"\n          :style=\"`width: ${prebufferingProgress}%`\"\n        >\n          <img :src=\"preloaderImageUrl\" class=\"image-foreground\" />\n        </div>\n      </div>\n\n      <div\n        v-if=\"DEVELOPER_MODE\"\n        style=\"\n          position: absolute;\n          top: 0;\n          left: 0;\n          margin-top: 64px;\n          font-size: 12px;\n        \"\n      >\n        hasPlaylist: {{ hasPlaylist }}\n        <br/>\n        hasM3uPlaylist: {{ hasM3uPlaylist }}\n        <br/>\n        m3uPlaylistState: {{ Object.keys(m3uPlaylistState) }}\n        <br/>\n        playlist: {{ Object.keys(playlist) }}\n        <br/>\n\n        {{ gotEngineSession ? \"yes\" : \"no\" }}\n        <br />\n        local: {{ mainStore.hasLocalPlayback }} acecast:\n        {{ mainStore.hasAcecastPlayback }} chromecast:\n        {{ mainStore.hasChromecastPlayback }}\n        <br />\n        isLocalPlayback: {{ isLocalPlayback }}\n        <br />\n        isIdle: {{ isIdle }}\n        <br />\n        isVideo: {{ isVideo }} isAudio: {{ isAudio }}\n        <br />\n        isLocked: {{ isLocked }}\n        <br />\n        isLive: {{ isLive }}\n        live: {{ mediaItem?.live }}\n        <br />\n        isP2P: {{ isP2P }}\n        <br />\n        <!--\n        currentStream: {{ currentStream }}\n        <debug-state name=\"LOCAL\" :state=\"mainStore.playerState.local\" />\n        <debug-state name=\"ACECAST\" :state=\"mainStore.playerState.acecast\" />\n        <debug-state\n          name=\"CHROMECAST\"\n          :state=\"mainStore.playerState.chromecast\"\n        />\n        -->\n      </div>\n\n      <div class=\"unlock-button-container\" v-if=\"unlockButtonVisible\">\n        <v-btn outlined @click=\"unlockScreen\">\n          <v-icon left> mdi-lock-open </v-icon>\n          Unlock\n        </v-btn>\n      </div>\n\n      <!-- center container vibible without overlay -->\n      <div class=\"status-container\" v-if=\"isLandscapeMode\">\n        <div\n          class=\"box-message\"\n          v-if=\"overlayMessage\"\n          v-html=\"overlayMessage\"\n        ></div>\n\n        <!-- play/pause or buffering -->\n        <div class=\"play-button-container\">\n          <!--\n          <div class=\"box-buffering-progress\" v-if=\"isPlayerBuffering\">\n            <buffering-progress />\n          </div>\n          -->\n\n          <div\n            ref=\"playPauseAnimation\"\n            v-show=\"isTv && !isPlayerBuffering && playPauseAnimationVisible\"\n          >\n            <v-icon size=\"34\">\n              {{ playPauseAnimationIcon }}\n            </v-icon>\n          </div>\n        </div>\n\n        <div class=\"onscreen-info-container\" v-if=\"showingInformation\">\n          <div class=\"p2p-info\">\n            <div class=\"p2p-info-item\">Helping: {{ engineStatus.peers }}</div>\n            <div class=\"p2p-info-item\">DL: {{ engineStatus.speedDown }}</div>\n            <div class=\"p2p-info-item\">UL: {{ engineStatus.speedUp }}</div>\n          </div>\n        </div>\n      </div>\n\n      <v-container class=\"page-container fill-height\" v-if=\"isOverlayVisible\">\n        <div class=\"top-bar\">\n          <div class=\"left-actions\">\n            <control-button\n              v-if=\"!isLocked && homeButtonVisible && !isTv\"\n              @click=\"goHome()\"\n              icon=\"mdi-arrow-left\"\n            />\n\n            <div\n              v-if=\"isLandscapeOrientation\"\n              class=\"top-title-container fade-text-right\"\n              v-html=\"mediaTitle\"\n            ></div>\n          </div>\n\n          <!-- Playback mode selector -->\n          <!--\n          <div class=\"center-actions\" v-if=\"!isTv\">\n            <v-btn v-if=\"playbackMode != MODE_LOCAL && mainStore.hasLocalPlayback\" @click=\"switchToLocalPlayer()\">\n              Local\n            </v-btn>\n            <v-btn v-if=\"playbackMode != MODE_ACECAST && mainStore.hasAcecastPlayback\" @click=\"switchToAcecast()\">\n              AC\n            </v-btn>\n            <v-btn v-if=\"playbackMode != MODE_CHROMECAST && mainStore.hasChromecastPlayback\" @click=\"switchToChromecast()\">\n              CC\n            </v-btn>\n          </div>\n          -->\n\n          <div class=\"right-actions\">\n            <template v-if=\"isTv && isLandscapeMode\">\n              <div class=\"p2p-info-container\" v-if=\"gotEngineSession && !renderingDisabled\">\n                <div class=\"p2p-info-item\">\n                  Helping: {{ engineStatus.peers }}\n                </div>\n                <div class=\"p2p-info-item\">\n                  DL: {{ engineStatus.speedDown }}\n                </div>\n                <div class=\"p2p-info-item\">UL: {{ engineStatus.speedUp }}</div>\n              </div>\n            </template>\n\n            <template v-else>\n              <control-button\n                v-if=\"canTogglePip && !isLocked\"\n                @click=\"togglePiP()\"\n                icon=\"mdi-picture-in-picture-bottom-right\"\n              />\n\n              <control-button\n                v-if=\"!isLocked\"\n                @click=\"showResolver()\"\n                icon=\"mdi-cast-variant\"\n              />\n\n              <control-button\n                v-if=\"!isLocked && isLocalPlayback && isPlayingOrPaused\"\n                @click=\"showMenu()\"\n                icon=\"mdi-cog\"\n              />\n            </template>\n          </div>\n        </div>\n\n        <!-- Portrait controls -->\n        <div class=\"portrait-container\" v-if=\"!isLandscapeMode\">\n\n          <div class=\"portrait-top-container\" v-if=\"isLocalPlayback\">\n            <div\n              class=\"title-container\"\n              :class=\"mediaTitleClass\"\n              v-html=\"mediaTitle\"\n            ></div>\n\n            <div class=\"p2p-info-container\" v-if=\"gotEngineSession && !renderingDisabled\">\n              <div class=\"p2p-info-item\">Helping: {{ engineStatus.peers }}</div>\n              <div class=\"p2p-info-item\">DL: {{ engineStatus.speedDown }}</div>\n              <div class=\"p2p-info-item\">UL: {{ engineStatus.speedUp }}</div>\n            </div>\n\n            <div class=\"actions\">\n              <favorite-toggle-button\n                v-if=\"canAddToFavorites && favoriteUri && !isLocked\"\n                @click=\"toggleFavorite()\"\n                :active=\"isFavorite\"\n                />\n            </div>\n\n          </div>\n\n          <div class=\"portrait-center-container\">\n            <div\n              class=\"volume-placeholder\"\n              v-if=\"\n                canChangeVolume &&\n                !isIdle &&\n                !isLocalPlayback &&\n                !showSimpleControls\n              \"\n            >\n              <div class=\"volume-container\">\n                <v-btn\n                  icon\n                  @click=\"toggleMute\"\n                  :disabled=\"isLocked || !isPlayingOrPaused\"\n                >\n                  <v-icon>\n                    {{ isMuted ? \"mdi-volume-off\" : \"mdi-volume-mute\" }}\n                  </v-icon>\n                </v-btn>\n\n                <v-slider\n                  :value=\"displayVolume\"\n                  min=\"0\"\n                  max=\"100\"\n                  :disabled=\"isSliderDisabled\"\n                  @input=\"onVolumeUpdate\"\n                  @start=\"onVolumeSliderStart\"\n                  @end=\"onVolumeSliderEnd\"\n                />\n              </div>\n            </div>\n\n            <div class=\"box-row\">\n              <!-- rewind 10 -->\n              <div class=\"center-box-actions\">\n                <control-button\n                  v-if=\"isFastSeekEnabled\"\n                  @click=\"seekBy(-10)\"\n                  icon=\"mdi-rewind-10\"\n                  type=\"small\"\n                  :withBackground=\"!showBox\"\n                />\n              </div>\n\n              <div\n                ref=\"centerBox\"\n                class=\"box-container\"\n                :class=\"{ opaque: showBox }\"\n              >\n                <div class=\"box-container-inner\">\n                  <div\n                    class=\"box-message\"\n                    v-if=\"overlayMessage\"\n                    v-html=\"overlayMessage\"\n                  ></div>\n\n                  <div\n                    class=\"box-buffering-progress\"\n                    v-else-if=\"showBox && isPlayerBuffering\"\n                  >\n                    <buffering-progress />\n                  </div>\n\n                  <!-- play/pause -->\n                  <control-button\n                    v-else-if=\"!isLocked && !isIdle && !showSimpleControls && isPlayingOrPaused && !renderingDisabled\"\n                    @click=\"togglePause\"\n                    :icon=\"isPlaying ? 'mdi-pause' : 'mdi-play'\"\n                    type=\"big\"\n                    :withBackground=\"!showBox\"\n                  />\n\n                  <v-icon v-else-if=\"showBox && !isPlayerBuffering && !renderingDisabled\" class=\"content-type-image\" size=\"96\">\n                    {{ contentTypeIcon }}\n                  </v-icon>\n                </div>\n              </div>\n\n              <!-- fast forward 10 -->\n              <div class=\"center-box-actions\">\n                <control-button\n                  v-if=\"isFastSeekEnabled\"\n                  @click=\"seekBy(10)\"\n                  icon=\"mdi-fast-forward-10\"\n                  type=\"small\"\n                  :withBackground=\"!showBox\"\n                />\n              </div>\n            </div>\n\n          </div>\n\n          <div class=\"portrait-center-info-container\" v-if=\"!isLocalPlayback\">\n            <div\n              class=\"title-container\"\n              :class=\"mediaTitleClass\"\n              v-html=\"mediaTitle\"\n            ></div>\n\n            <div class=\"p2p-info-container\" :class=\"{'invisible': !gotEngineSession }\">\n              <div class=\"p2p-info-item\">Helping: {{ engineStatus.peers }}</div>\n              <div class=\"p2p-info-item\">DL: {{ engineStatus.speedDown }}</div>\n              <div class=\"p2p-info-item\">UL: {{ engineStatus.speedUp }}</div>\n            </div>\n          </div>\n\n          <div class=\"portrait-bottom-container\" :class=\"{'is-playing': isLocalPlayback }\">\n            <div\n              class=\"progress-placeholder\"\n              v-if=\"!isIdle && !showSimpleControls\"\n            >\n              <div class=\"progress-container\">\n                <div class=\"progress-slider-row\">\n                  <v-slider\n                    :value=\"progressValue\"\n                    min=\"0\"\n                    :max=\"progressMax\"\n                    :step=\"progressStep\"\n                    :disabled=\"isSliderDisabled\"\n                    @start=\"onSliderStart\"\n                    @end=\"onSliderEnd\"\n                    @input=\"onSliderInput\"\n                  />\n\n                  <div class=\"go-live-button-container\">\n                    <div\n                      v-if=\"liveProgress && isPlayingOrPaused && !renderingDisabled\"\n                      class=\"go-live-button\"\n                      :class=\"{ 'is-live': liveProgress.live }\"\n                      @click=\"goLive\"\n                    >\n                      LIVE\n                    </div>\n                  </div>\n                </div>\n                <div class=\"progress-time-row\">\n                  <div\n                    class=\"progress-time\"\n                    :class=\"{ 'text-disabled': isLocked || !isPlayingOrPaused || renderingDisabled }\"\n                  >\n                    {{ formatTime(displayTime) }}\n                  </div>\n                  <div\n                    class=\"progress-duration\"\n                    :class=\"{ 'text-disabled': isLocked || !isPlayingOrPaused || renderingDisabled }\"\n                  >\n                    {{ formatTime(displayDuration) }}\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"buttons-row buttons-row-centered buttons-row-first\">\n              <!-- select audio track -->\n              <control-button\n                v-if=\"!isAudio && !isLocked && !isIdle && !showSimpleControls\"\n                @click=\"selectAudioTrack()\"\n                icon=\"mdi-music-note\"\n                :disabled=\"renderingDisabled || !hasAudioTracks || !isPlayingOrPaused\"\n              />\n\n              <!-- select spu track -->\n              <control-button\n                v-if=\"\n                  !isAudio &&\n                  !isLocked &&\n                  !isIdle &&\n                  hasSpuTracks &&\n                  isPlayingOrPaused &&\n                  !renderingDisabled\n                \"\n                @click=\"selectSpuTrack()\"\n                icon=\"mdi-subtitles\"\n              />\n\n              <!-- stop -->\n              <control-button\n                icon=\"mdi-stop\"\n                v-if=\"!isLocked && !isIdle\"\n                :type=\"showSimpleControls ? 'big' : null\"\n                @click=\"stop()\"\n              />\n\n              <!-- restart -->\n              <control-button\n                v-if=\"isIdle && !gotEngineSession\"\n                @click=\"restart()\"\n                icon=\"mdi-restart\"\n                type=\"big\"\n              />\n\n              <!-- stop engine session -->\n              <control-button\n                v-if=\"isIdle && gotEngineSession\"\n                @click=\"stopEngineSession()\"\n                icon=\"mdi-stop\"\n              />\n\n              <!-- resize video -->\n              <control-button\n                v-if=\"!isAudio && !isLocked && !isIdle && !showSimpleControls\"\n                :disabled=\"!isPlayingOrPaused || (!isAceCastPlayback && !isVideo)\"\n                @click=\"resizeVideo()\"\n                v-on-long-press=\"[onResizeVideoLongPress, { delay: 1000 }]\"\n                icon=\"mdi-aspect-ratio\"\n              />\n\n              <!-- switch to audio -->\n              <control-button\n                v-if=\"isVideo && !isLocked && !isIdle && isLocalPlayback\"\n                :disabled=\"!isPlayingOrPaused\"\n                @click=\"toggleAudioMode()\"\n                icon=\"mdi-headphones\"\n              />\n\n              <!-- lock screen -->\n              <control-button\n                icon=\"mdi-lock\"\n                v-if=\"!isLocked && !isIdle && isLocalPlayback\"\n                @click=\"lockScreen()\"\n              />\n            </div>\n\n            <div\n              class=\"buttons-row buttons-row-centered\"\n              v-if=\"hasPlaylist && !isIdle\"\n            >\n              <!-- playlist prev -->\n              <control-button\n                @click=\"skipPrev()\"\n                :disabled=\"!hasPrev\"\n                icon=\"mdi-skip-previous\"\n              />\n\n              <!-- show playlist -->\n              <control-button\n                v-if=\"hasPlaylist\"\n                @click=\"showPlaylist()\"\n                icon=\"mdi-playlist-play\"\n              />\n\n              <!-- playlist next -->\n              <control-button\n                @click=\"skipNext()\"\n                :disabled=\"!hasNext\"\n                icon=\"mdi-skip-next\"\n              />\n            </div>\n          </div>\n        </div>\n\n        <div class=\"center-landscape-controls\" v-if=\"isLandscapeMode && !isTv\">\n          <!-- rewind 10 -->\n          <control-button\n            v-if=\"isFastSeekEnabled\"\n            @click=\"seekBy(-10)\"\n            icon=\"mdi-rewind-10\"\n            type=\"small\"\n            :withBackground=\"!showBox\"\n          />\n\n          <!-- play/pause or buffering -->\n          <div class=\"play-button-container\">\n            <control-button\n              v-if=\"!isLocked && !isIdle && isPlayingOrPaused && !renderingDisabled\"\n              @click=\"togglePause\"\n              :icon=\"isPlaying ? 'mdi-pause' : 'mdi-play'\"\n              type=\"big\"\n              :withBackground=\"!showBox\"\n            />\n          </div>\n\n          <!-- fast forward 10 -->\n          <control-button\n            v-if=\"isFastSeekEnabled\"\n            @click=\"seekBy(10)\"\n            icon=\"mdi-fast-forward-10\"\n            type=\"small\"\n            :withBackground=\"!showBox\"\n          />\n        </div>\n\n        <div class=\"bottom-controls-container\" v-if=\"isLandscapeMode\">\n          <div class=\"buttons-row\" v-if=\"isTv\">\n            <div class=\"left-container\">\n              <!-- playlist prev -->\n              <control-button\n                v-if=\"hasPlaylist\"\n                @click=\"skipPrev()\"\n                :disabled=\"!hasPrev\"\n                icon=\"mdi-skip-previous\"\n                v-focus=\"{ id: 'playlist-prev', enabled: !preventFocus }\"\n                :hint=\"$t('previous')\"\n              />\n\n              <!-- show playlist -->\n              <control-button\n                v-if=\"hasPlaylist\"\n                @click=\"showPlaylist()\"\n                icon=\"mdi-playlist-play\"\n                v-focus=\"{ id: 'playlist-show', enabled: !preventFocus }\"\n                :hint=\"$t('playlist')\"\n              />\n\n              <!-- playlist next -->\n              <control-button\n                v-if=\"hasPlaylist\"\n                @click=\"skipNext()\"\n                :disabled=\"!hasNext\"\n                icon=\"mdi-skip-next\"\n                v-focus=\"{ id: 'playlist-next', enabled: !preventFocus }\"\n                :hint=\"$t('next')\"\n              />\n            </div>\n\n            <div class=\"right-container\">\n              <favorite-toggle-button\n                v-if=\"canAddToFavorites && favoriteUri && !isLocked\"\n                @click=\"toggleFavorite()\"\n                :active=\"isFavorite\"\n                v-focus=\"{ id: 'toggle-favorite', enabled: !preventFocus }\"\n              />\n\n              <!-- toggle subtitles (tv) -->\n              <control-button\n                v-if=\"\n                  !isAudio &&\n                  !isLocked &&\n                  !isIdle &&\n                  hasSpuTracks &&\n                  isPlayingOrPaused\n                \"\n                @click=\"toggleSubtitles()\"\n                :icon=\"\n                  currentSpuTrack < 0\n                    ? 'mdi-subtitles-outline'\n                    : 'mdi-subtitles'\n                \"\n                v-focus=\"{ id: 'toggle-subtitles', enabled: !preventFocus }\"\n                :hint=\"$t('subtitles')\"\n              />\n\n              <!-- resize video -->\n              <control-button\n                v-if=\"!isAudio && !isLocked && !isIdle\"\n                :disabled=\"!isVideo || !isPlayingOrPaused\"\n                @click=\"resizeVideo()\"\n                icon=\"mdi-aspect-ratio\"\n                :hint=\"$t('resize')\"\n                v-focus=\"{ id: 'resize-video', enabled: !preventFocus }\"\n              />\n\n              <!-- menu-->\n              <control-button\n                v-if=\"!isLocked && isLocalPlayback && isPlayingOrPaused\"\n                @click=\"showMenu()\"\n                icon=\"mdi-cog\"\n                :hint=\"$t('menu')\"\n                v-focus=\"{ id: 'menu', enabled: !preventFocus }\"\n              />\n            </div>\n          </div>\n\n          <div class=\"buttons-row as-top\" v-if=\"!isTv\">\n            <div class=\"left-container progress-time-row\">\n              <div class=\"progress-time\">\n                {{ formatTime(displayTime) }}\n              </div>\n              <template v-if=\"!liveProgress\">\n                <div class=\"progress-time-spacer\">/</div>\n                <div class=\"progress-duration\">\n                  {{ formatTime(displayDuration) }}\n                </div>\n              </template>\n            </div>\n            <div class=\"right-container\">\n              <!-- toggle info -->\n              <control-button\n                v-if=\"gotEngineSession\"\n                @click=\"toggleInformation()\"\n                :icon=\"\n                  showingInformation\n                    ? 'mdi-information'\n                    : 'mdi-information-outline'\n                \"\n              />\n\n              <!-- select stream -->\n              <the-button\n                v-if=\"hasStreams\"\n                outlined\n                @click=\"selectStream()\"\n                style=\"font-size: 12px; border-radius: 16px; padding: 4px\"\n              >\n                {{ currentStream.name }}\n              </the-button>\n\n              <!-- playlist prev -->\n              <control-button\n                v-if=\"hasPlaylist\"\n                @click=\"skipPrev()\"\n                :disabled=\"!hasPrev\"\n                icon=\"mdi-skip-previous\"\n              />\n\n              <!-- show playlist (hidden on TV for M3U playlists) -->\n              <control-button\n                v-if=\"hasPlaylist\"\n                @click=\"showPlaylist()\"\n                icon=\"mdi-playlist-play\"\n              />\n\n              <!-- playlist next -->\n              <control-button\n                v-if=\"hasPlaylist\"\n                @click=\"skipNext()\"\n                :disabled=\"!hasNext\"\n                icon=\"mdi-skip-next\"\n              />\n\n              <!-- select audio track -->\n              <control-button\n                v-if=\"!isAudio && !isLocked && !isIdle\"\n                @click=\"selectAudioTrack()\"\n                icon=\"mdi-music-note\"\n                v-focus=\"{ id: 'select-audio-track', enabled: !preventFocus }\"\n                :disabled=\"!hasAudioTracks || !isPlayingOrPaused\"\n              />\n\n              <!-- toggle subtitles -->\n              <!-- <control-button\n                v-if=\"!isAudio && !isLocked && !isIdle && hasSpuTracks && isPlayingOrPaused\"\n                @click=\"toggleSubtitles()\"\n                :icon=\"currentSpuTrack < 0 ? 'mdi-subtitles-outline' : 'mdi-subtitles'\"\n                /> -->\n\n              <!-- select spu track -->\n              <control-button\n                v-if=\"\n                  !isAudio &&\n                  !isLocked &&\n                  !isIdle &&\n                  hasSpuTracks &&\n                  isPlayingOrPaused\n                \"\n                v-focus=\"{ id: 'select-spu-track', enabled: !preventFocus }\"\n                @click=\"selectSpuTrack()\"\n                icon=\"mdi-subtitles\"\n              />\n\n              <!-- switch to audio -->\n              <control-button\n                v-if=\"isVideo && !isLocked && !isIdle && isLocalPlayback\"\n                @click=\"toggleAudioMode()\"\n                :disabled=\"!isPlayingOrPaused\"\n                icon=\"mdi-headphones\"\n              />\n            </div>\n          </div>\n\n          <div class=\"progress-container\" v-if=\"!isIdle\">\n            <div class=\"progress-slider-row\">\n              <v-slider\n                :value=\"progressValue\"\n                min=\"0\"\n                :max=\"progressMax\"\n                :disabled=\"isSliderDisabled\"\n                :step=\"progressStep\"\n                :key=\"progressKey\"\n                v-focus=\"{\n                  id: 'progress-slider',\n                  enabled: !preventFocus,\n                  focusElementSelector: '.v-slider__thumb-container',\n                  onclick: onProgressClick,\n                }\"\n                @start=\"onSliderStart\"\n                @end=\"onSliderEnd\"\n                @change=\"onSliderChange\"\n                @blur=\"onSliderBlur\"\n                @input=\"onSliderInput\"\n              />\n\n              <div v-if=\"!isTv\" class=\"go-live-button-container\">\n                <div\n                  v-if=\"liveProgress && isPlayingOrPaused\"\n                  class=\"go-live-button\"\n                  :class=\"{ 'is-live': liveProgress.live }\"\n                  @click=\"goLive\"\n                >\n                  LIVE\n                </div>\n              </div>\n            </div>\n\n            <div class=\"progress-time-row\" v-if=\"isTv\">\n              <div class=\"progress-time\">\n                {{ formatTime(displayTime) }}\n              </div>\n              <div v-if=\"liveProgress\" class=\"go-live-button-container\">\n                <the-button\n                  class=\"go-live-button-new\"\n                  :class=\"{ 'is-live': liveProgress.live }\"\n                  v-focus=\"{ id: 'go-live', enabled: !preventFocus }\"\n                  @click=\"goLive\"\n                  height=\"24\"\n                  text\n                >\n                  <svg\n                    class=\"live-circle\"\n                    viewBox=\"0 0 100 100\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <circle cx=\"50\" cy=\"50\" r=\"50\" />\n                  </svg>\n                  LIVE\n                </the-button>\n              </div>\n              <div v-else class=\"progress-duration\">\n                {{ formatTime(displayDuration) }}\n              </div>\n            </div>\n          </div>\n\n          <div class=\"buttons-row as-bottom\" v-if=\"!isTv\">\n            <div class=\"left-container\">\n              <!-- lock -->\n              <control-button\n                icon=\"mdi-lock\"\n                v-if=\"!isLocked && !isIdle && isLocalPlayback\"\n                @click=\"lockScreen()\"\n              />\n            </div>\n\n            <div class=\"center-container\">\n              <!-- stop -->\n              <control-button\n                icon=\"mdi-stop\"\n                v-if=\"!isLocked && !isIdle\"\n                @click=\"stop()\"\n              />\n            </div>\n\n            <div class=\"right-container\">\n              <!-- resize video -->\n              <control-button\n                v-if=\"!isAudio && !isLocked && !isIdle\"\n                :disabled=\"!isVideo || !isPlayingOrPaused\"\n                @click=\"resizeVideo()\"\n                v-on-long-press=\"[onResizeVideoLongPress, { delay: 1000 }]\"\n                icon=\"mdi-aspect-ratio\"\n              />\n\n              <!--\n              <div class=\"p2p-info-container\" v-if=\"gotEngineSession\">\n                <div class=\"p2p-info-item\">\n                  Helping: {{ engineStatus.peers }}\n                </div>\n                <div class=\"p2p-info-item\">\n                  DL: {{ engineStatus.speedDown }}\n                </div>\n                <div class=\"p2p-info-item\">\n                  UL: {{ engineStatus.speedUp }}\n                </div>\n              </div>\n              -->\n            </div>\n          </div>\n        </div>\n      </v-container>\n\n      <transition>\n        <list-selector\n          v-if=\"dialog.visible && dialog.type == 'list-selector'\"\n          :title=\"$t(dialog.title)\"\n          :items=\"dialog.items\"\n          :selectedItem=\"dialog.selectedItem\"\n          rounded\n          @item-selected=\"dialog.onselected\"\n          @cancel=\"closeDialog\"\n        />\n      </transition>\n\n      <transition>\n        <player-menu\n          v-if=\"dialog.visible && dialog.type == 'player-menu'\"\n          :animationDuration=\"100\"\n          :playbackSpeed=\"playbackSpeed\"\n          :audioDelay=\"audioDelay\"\n          :spuDelay=\"spuDelay\"\n          :audioTracks=\"audioTracks\"\n          :selectedAudioTrack=\"currentAudioTrack\"\n          :spuTracks=\"spuTracks\"\n          :selectedSpuTrack=\"currentSpuTrack\"\n          :streams=\"streams\"\n          :selectedStream=\"currentStream?.id\"\n          @lock-screen=\"lockScreen\"\n          @cancel=\"closeDialog\"\n          @select-audio-track=\"onAudioTrackSelected\"\n          @select-spu-track=\"onSpuTrackSelected\"\n          @select-stream=\"onStreamSelected\"\n          @set-rate=\"setRate\"\n          @set-audio-delay=\"setAudioDelay\"\n          @set-spu-delay=\"setSpuDelay\"\n        />\n      </transition>\n\n      <transition>\n        <resize-video-menu\n          v-if=\"dialog.visible && dialog.type == 'resize-video-menu'\"\n          :animationDuration=\"100\"\n          :currentVideoSize=\"currentVideoSize\"\n          :hasNotch=\"hasNotch\"\n          :displayUnderNotch=\"currentDisplayUnderNotch\"\n          @cancel=\"closeDialog\"\n          @on-video-size=\"setVideoSize\"\n          @on-display-under-notch=\"setDisplayUnderNotch\"\n        />\n      </transition>\n\n      <transition>\n        <playlist-sheet\n          v-if=\"dialog.visible && dialog.type == 'playlist'\"\n          :animationDuration=\"100\"\n          :playlist=\"m3uPlaylist || playlist\"\n          @item-selected=\"onPlaylistItemSelected\"\n          @cancel=\"closeDialog\"\n        />\n      </transition>\n\n      <!-- Swipe feedback overlay -->\n      <div\n        v-if=\"swipeFeedbackVisible && swipeFeedbackItem && touchStartY !== null\"\n        class=\"swipe-feedback-overlay\"\n        :class=\"{\n          'swipe-feedback-from-top': swipeFeedbackDirection === 'prev',\n          'swipe-feedback-from-bottom': swipeFeedbackDirection === 'next'\n        }\"\n      >\n        <div\n          class=\"swipe-feedback-body\"\n          :style=\"{\n            transform: swipeFeedbackDirection === 'prev'\n              ? `translateY(${swipeOffset * SWIPE_ARROW_SPEED_RATIO}px)`\n              : `translateY(${-swipeOffset * SWIPE_ARROW_SPEED_RATIO}px)`,\n            opacity: Math.min(swipeProgress * 2, 1)\n          }\"\n        >\n          <div class=\"swipe-feedback-content\">\n            <div class=\"swipe-feedback-icon\">\n              <svg\n                v-if=\"swipeFeedbackDirection === 'next'\"\n                width=\"64\"\n                height=\"64\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path\n                  d=\"M7 14L12 9L17 14\"\n                  stroke=\"currentColor\"\n                  stroke-width=\"0.5\"\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                />\n              </svg>\n              <svg\n                v-else\n                width=\"64\"\n                height=\"64\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path\n                  d=\"M7 10L12 15L17 10\"\n                  stroke=\"currentColor\"\n                  stroke-width=\"0.5\"\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                />\n              </svg>\n            </div>\n            <div class=\"swipe-feedback-title\">\n              {{ swipeFeedbackItem.title }}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <ExternalPage\n        v-if=\"externalPageVisible\"\n        :url=\"externalPageUrl\"\n        @close=\"closeExternalPage()\"\n        />\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\">\n.box-message {\n  .as-small-text {\n    font-size: 12px;\n  }\n}\niframe.ad-player {\n  width: 100%;\n  height: 100%;\n  border: none;\n  opacity: 0;\n\n  &.as-visible {\n    opacity: 1;\n  }\n}\n</style>\n\n<style scoped lang=\"scss\">\n$colorTextMain: #fff;\n$colorTextDisabled: rgba(255, 255, 255, 0.5);\n$overscanMarginVertical: 27px;\n$overscanMarginHorizontal: 48px;\n\n.player-root {\n  background-color: transparent;\n  position: relative;\n  height: 100vh;\n\n  &.is-tv {\n    // Add overscan margins\n    padding: $overscanMarginVertical $overscanMarginHorizontal;\n  }\n\n  &:not(.is-tv) {\n    padding-top: var(--inset-padding-top);\n    padding-bottom: var(--inset-padding-bottom);\n    padding-left: var(--inset-padding-left);\n    padding-right: var(--inset-padding-right);\n  }\n\n  &.mode-landscape:not(.is-tv) {\n    padding-top: var(--inset-padding-top);\n    padding-left: calc(var(--inset-padding-left) + 24px);\n    padding-right: calc(var(--inset-padding-right) + 24px);\n  }\n}\n\n.player-screen {\n  background-color: transparent;\n  position: relative;\n  width: 100%;\n  height: 100%;\n\n  &.developer-mode {\n    background-color: #0000aa80;\n  }\n}\n\n.ad-player-container {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 1;\n  background-color: #000;\n\n  .video-player {\n    width: 100%;\n    height: 100%;\n    opacity: 0;\n    visibility: hidden;\n\n    &.as-visible {\n      opacity: 1;\n      visibility: visible;\n    }\n  }\n\n  .ad-container {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n  }\n\n  .ad-loading-progress-container {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n}\n.page-container {\n  z-index: 0;\n\n  .mode-portrait.orientation-landscape & {\n    align-items: flex-start;\n    padding-top: 52px;\n  }\n}\n\n.text-disabled {\n  color: $colorTextDisabled;\n}\n\n.unlock-button-container {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 1;\n  .mode-portrait & {\n    top: auto;\n    bottom: 5%;\n  }\n}\n\n.top-bar {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 64px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 16px;\n\n  .mode-landscape & {\n    padding: 0 4px 0 20px;\n  }\n\n  .left-actions {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: flex-start;\n  }\n\n  .right-actions {\n    white-space: nowrap;\n  }\n\n  .top-title-container {\n    width: 50vw;\n    overflow: hidden;\n    white-space: nowrap;\n    position: relative;\n  }\n}\n.bottom-controls-container {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n\n  .progress-container {\n    width: 100%;\n    padding: 0 16px;\n  }\n  .progress-slider-row {\n    height: 32px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n  .progress-slider-row > * {\n    height: 32px;\n  }\n  .progress-time-row {\n    display: flex;\n    align-items: center;\n\n    .mode-portrait & {\n      justify-content: space-between;\n    }\n\n    .mode-landscape & {\n      justify-content: flex-start;\n\n      .progress-time-spacer {\n        padding: 0 4px;\n      }\n      .progress-time-spacer,\n      .progress-duration {\n        color: $colorTextDisabled;\n      }\n    }\n\n    .is-tv & {\n      justify-content: space-between;\n\n      .progress-time-spacer,\n      .progress-duration {\n        color: $colorTextMain;\n      }\n    }\n  }\n\n  .buttons-row {\n    padding-right: 4px;\n  }\n  .is-tv & .buttons-row {\n    padding-right: 12px;\n  }\n  .buttons-row.as-top {\n    padding-left: 20px;\n  }\n  .buttons-row.as-bottom {\n    padding-left: 8px;\n  }\n\n  .volume-container {\n    width: 100%;\n    padding: 0 16px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n  .volume-container > * {\n    height: 32px;\n  }\n  .go-live-button-container {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .go-live-button {\n    font-size: 10px;\n    border: 1px solid #fdc725;\n    padding: 2px 4px;\n    border-radius: 4px;\n    color: #fdc725;\n  }\n  .go-live-button.is-live {\n    border-color: #e0e0e0;\n    color: #e0e0e0;\n  }\n  .go-live-button.focus {\n    color: white;\n    border: 1px solid white;\n  }\n  .go-live-button-new {\n    .live-circle {\n      width: 12px;\n      height: 12px;\n      margin-right: 8px;\n      fill: #fdc725;\n    }\n\n    &.is-live {\n      .live-circle {\n        fill: white;\n      }\n    }\n\n    &.focus {\n      .live-circle {\n        fill: #212121;\n      }\n    }\n  }\n}\n\n.bottom-controls-container .p2p-info-container,\n.top-bar .p2p-info-container {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n\n  .p2p-info-item {\n    margin: 0 8px;\n    font-size: 12px;\n    color: #aaa;\n  }\n}\n\n.buttons-row {\n  padding: 0 16px;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n\n  &.buttons-row-centered {\n    justify-content: center;\n  }\n\n  .left-container,\n  .right-container {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: flex-start;\n    height: auto !important;\n  }\n\n  .center-container {\n    position: absolute;\n    left: 50%;\n    transform: translateX(-50%);\n  }\n}\n.onscreen-message {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background-color: #00000080;\n  color: white;\n  padding: 8px;\n  border-radius: 4px;\n  font-size: 16px;\n  font-weight: bold;\n  text-align: center;\n  z-index: 100;\n}\n.player-buffering-progress {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 101;\n}\n\n.solid-background-image {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  z-index: -1;\n\n  background-image: url(../assets/img/background_v4_portrait.webp);\n  background-position: center;\n  background-repeat: no-repeat;\n  background-attachment: fixed;\n  background-size: cover;\n\n  @media (min-aspect-ratio: 1/1) {\n    & {\n      background-image: url(../assets/img/background_v4_landscape.webp);\n    }\n  }\n}\n.solid-background-overlay {\n  background-color: rgb(0, 0, 0, 0.5);\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  z-index: -1;\n}\n.invisible-when-disabled:disabled {\n  opacity: 0;\n}\n\n.ui-version {\n  position: absolute;\n  bottom: 16px;\n  right: 12px;\n  color: white;\n  font-size: 12px;\n}\n\n.center-landscape-controls {\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n}\n\n.play-button-container {\n  width: 56px;\n  height: 56px;\n  margin: 0 64px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n$statusContainerHeight: 64px;\n\n.box-message {\n  text-align: center;\n}\n\n.status-container {\n  width: 100%;\n  height: $statusContainerHeight;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  top: calc(50% - #{$statusContainerHeight / 2});\n  left: 0;\n\n  .box-message {\n    position: absolute;\n    bottom: calc(100% + 16px);\n    padding: 8px 16px;\n    background-color: rgba(0, 0, 0, 0.5);\n    border-radius: 4px;\n  }\n\n  .onscreen-info-container {\n    position: absolute;\n    top: calc(100% + 16px);\n    padding: 8px 16px;\n    background-color: rgba(0, 0, 0, 0.5);\n    border-radius: 4px;\n\n    .p2p-info {\n      display: flex;\n      flex-direction: row;\n\n      .p2p-info-item {\n        padding: 0 8px;\n      }\n    }\n  }\n}\n\n.portrait-container {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n\n  .portrait-top-container {\n    position: absolute;\n    left: 0;\n    top: 96px;\n    width: 100%;\n\n    .actions {\n      display: flex;\n      justify-content: center;\n    }\n  }\n\n  .portrait-bottom-container {\n    width: 100%;\n    &.is-playing {\n      position: absolute;\n      left: 0;\n      bottom: 32px;\n    }\n  }\n\n  .title-container {\n    font-size: 20px;\n    margin-top: 16px;\n    text-align: center;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: 2;\n    overflow: hidden;\n    word-wrap: break-word;\n\n    &.media-title-size-1 {\n      font-size: 19px;\n    }\n    &.media-title-size-2 {\n      font-size: 18px;\n    }\n    &.media-title-size-3 {\n      font-size: 16px;\n    }\n\n    .mode-portrait.orientation-landscape & {\n      display: none;\n    }\n  }\n\n  .p2p-info-container {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    margin-top: 8px;\n\n    .p2p-info-item {\n      margin: 0 8px;\n      font-size: 12px;\n      color: #aaa;\n    }\n\n    &.invisible {\n      opacity: 0;\n    }\n  }\n\n  .progress-placeholder {\n    width: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    margin-top: 16px;\n\n    .progress-container {\n      width: 100%;\n      max-width: 400px;\n      padding: 0 16px;\n    }\n  }\n\n  .progress-slider-row {\n    height: 32px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n  .progress-slider-row > * {\n    height: 32px;\n  }\n  .progress-time-row {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    font-size: 14px;\n  }\n  .go-live-button-container {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .go-live-button {\n    font-size: 10px;\n    border: 1px solid #fdc725;\n    padding: 2px 4px;\n    border-radius: 4px;\n    color: #fdc725;\n  }\n  .go-live-button.is-live {\n    border-color: #e0e0e0;\n    color: #e0e0e0;\n  }\n\n  .buttons-row-first {\n    margin-top: 16px;\n\n    .orientation-landscape & {\n      margin-top: 0;\n    }\n  }\n}\n\n.portrait-center-container {\n  $boxSize: 174px;\n\n  display: block;\n  width: 100%;\n  height: $boxSize;\n  position: relative;\n\n  .orientation-landscape & {\n    height: auto;\n  }\n\n  .volume-placeholder {\n    position: absolute;\n    top: -40px;\n    width: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    .mode-portrait.orientation-landscape & {\n      top: auto;\n      position: relative;\n    }\n\n    .volume-container {\n      width: 100%;\n      max-width: 400px;\n      padding: 0 16px;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n    }\n    .volume-container > * {\n      height: 32px;\n    }\n  }\n\n  .box-row {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n\n    .center-box-actions {\n      flex-grow: 0;\n      flex-shrink: 0;\n      width: 40px;\n    }\n\n    .box-container {\n      background-color: transparent;\n      border-radius: 2px;\n      width: 184px;\n      height: $boxSize;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n\n      &.opaque {\n        background-color: rgba(255, 255, 255, 0.25);\n        margin: 0 24px;\n        width: $boxSize;\n\n        .orientation-landscape & {\n          height: auto;\n          min-height: 100px;\n        }\n\n        .box-container-inner {\n          margin: 12px;\n          width: calc(100% - 24px);\n          height: calc(100% - 24px);\n          background-color: rgba(255, 255, 255, 0.3);\n          box-shadow: 0 0 8px 0 rgba(0, 0, 0, 0.5);\n\n          display: flex;\n          justify-content: center;\n          align-items: center;\n\n          .orientation-landscape & {\n            background-color: transparent;\n            box-shadow: none;\n          }\n        }\n      }\n    }\n  }\n}\n\n.poster {\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n\n  .poster-overlay {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.6);\n  }\n}\n\n.preloader-image {\n  position: fixed;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n\n  img {\n    max-width: 50vw;\n  }\n\n  .image-foreground-container {\n    position: absolute;\n    left: 0;\n    top: 0;\n  }\n\n  .image-background {\n    opacity: 0.25;\n  }\n\n  .image-foreground-container {\n    width: 0%;\n    overflow: hidden;\n  }\n}\n\n.pip-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n\n  .progress-container {\n    margin-bottom: 8px;\n  }\n\n  .p2p-info-container {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    margin-top: 8px;\n\n    .p2p-info-item {\n      margin: 0 4px;\n      font-size: 10px;\n      color: #aaa;\n    }\n  }\n}\n\n// Swipe feedback overlay styles\n.swipe-feedback-overlay {\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  z-index: 1000;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  pointer-events: none;\n  padding: 20px;\n  transition: transform 0.05s linear;\n  will-change: transform;\n  overflow: hidden;\n  \n  // Swipe down (prev) - arrow appears from top\n  &.swipe-feedback-from-top {\n    align-items: flex-start;\n    \n    &::before {\n      content: '';\n      position: absolute;\n      left: 0;\n      right: 0;\n      top: 0;\n      bottom: 0;\n      background: linear-gradient(\n        to bottom,\n        rgba(0, 0, 0, 0.8) 0%,\n        rgba(0, 0, 0, 0.4) 50%,\n        transparent 100%\n      );\n      pointer-events: none;\n    }\n  }\n  \n  // Swipe up (next) - arrow appears from bottom\n  &.swipe-feedback-from-bottom {\n    align-items: flex-end;\n    \n    &::before {\n      content: '';\n      position: absolute;\n      left: 0;\n      right: 0;\n      top: 0;\n      bottom: 0;\n      background: linear-gradient(\n        to top,\n        rgba(0, 0, 0, 0.8) 0%,\n        rgba(0, 0, 0, 0.4) 50%,\n        transparent 100%\n      );\n      pointer-events: none;\n    }\n  }\n}\n\n.swipe-feedback-content {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n  text-align: center;\n  max-width: 80%;\n}\n\n.swipe-feedback-icon {\n  color: $colorTextMain;\n  opacity: 0.9;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  \n  svg {\n    width: 64px;\n    height: 64px;\n    color: currentColor;\n  }\n}\n\n.swipe-feedback-label {\n  font-size: 14px;\n  color: $colorTextMain;\n  opacity: 0.8;\n  text-transform: uppercase;\n  letter-spacing: 1px;\n  font-weight: 500;\n}\n\n.swipe-feedback-title {\n  font-size: 18px;\n  color: $colorTextMain;\n  font-weight: 500;\n  line-height: 1.3;\n  word-wrap: break-word;\n  overflow-wrap: break-word;\n}\n\n// Body that moves with finger; overlay stays full-screen\n.swipe-feedback-body {\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  transition: transform 0.05s linear;\n  will-change: transform;\n}\n\n// Swipe feedback fade transition\n.swipe-feedback-fade-enter-active,\n.swipe-feedback-fade-leave-active {\n  transition: opacity 0.3s ease;\n}\n\n.swipe-feedback-fade-enter-from,\n.swipe-feedback-fade-leave-to {\n  opacity: 0;\n}\n\n// Swipe hint overlay\n.swipe-hint-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.8);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  // Block all interactions under the hint; only the OK button is clickable.\n  pointer-events: auto;\n  touch-action: none;\n}\n\n.swipe-hint-content {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 16px;\n  text-align: center;\n  padding: 20px;\n  // Don't allow clicking on arrows/text; clicks should be handled only by the OK button.\n  pointer-events: none;\n  position: relative;\n}\n\n.swipe-hint-ok-container {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: calc(15vh + env(safe-area-inset-bottom, 0px));\n  display: flex;\n  justify-content: center;\n  pointer-events: auto;\n}\n\n.swipe-hint-ok-button {\n  min-width: 96px;\n  color: black;\n  background-color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 8px 16px;\n  border-radius: 28px;\n  cursor: pointer;\n}\n\n.swipe-hint-text {\n  color: white;\n  font-size: 18px;\n  font-weight: 100;\n  line-height: 1.4;\n}\n\n.swipe-hint-arrow {\n  color: white !important;\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n\n  &.swipe-hint-arrow-up {\n    top: -142px;\n  }\n\n  &.swipe-hint-arrow-down {\n    bottom: -148px;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerScreen.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerScreen.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./PlayerScreen.vue?vue&type=template&id=cb70d34a&scoped=true&\"\nimport script from \"./PlayerScreen.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./PlayerScreen.vue?vue&type=script&setup=true&lang=js&\"\nimport style0 from \"./PlayerScreen.vue?vue&type=style&index=0&id=cb70d34a&prod&lang=scss&\"\nimport style1 from \"./PlayerScreen.vue?vue&type=style&index=1&id=cb70d34a&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cb70d34a\",\n  null\n  \n)\n\nexport default component.exports","import PlayerScreen from '@/pages/PlayerScreen.vue';\n\nexport const routes = [\n  {\n    name: 'player',\n    path: '/',\n    component: PlayerScreen,\n  },\n]","export function shouldInstallMock(location) {\n    const url = new URL(location.href)\n    return parseInt(url.searchParams.get('mock')) === 1\n}\n","const locale = 'ru';\n\nexport const idleState = {\n  locale,\n  local: {\n    hasVolume: true,\n    playbackState: 0,\n    localInternalPlaylistState: {\n      size: 1,\n      mediaItem: {\n        title: 'Test Media Item',\n        type: 2,\n        videoDisabled: false,\n        p2p: true,\n        live: 1,\n      },\n    },\n  },\n};\n\nconst playlistSize = 27;\n\nconst playlist = {\n  size: 0,\n  mediaItem: null,\n  position: 0,\n  hasPrev: false,\n  hasNext: true,\n  items: [],\n};\n\n// generate lorem ipsum 30 words\nconst loremIpsum = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec euismod, nisl eget aliquam aliquam, nisl nunc aliquet nunc, vitae aliquam nisl nisl nec nisl. Donec euismod, nisl eget aliquam aliquam, nisl nunc aliquet nunc, vitae aliquam nisl nisl nec nisl.';\nloremIpsum;\n\nfor(let i = 0; i < playlistSize; i++) {\n  playlist.items.push({\n    index: i,\n    title: `Test Media Item ${i + 1}`,\n    // title: `Test Media Item ${i + 1}. ${loremIpsum}`,\n    type: 'VIDEO',\n    videoDisabled: false,\n    p2p: true,\n    live: 1,\n  });\n}\nplaylist.size = playlistSize;\nplaylist.mediaItem = playlist.items[playlist.position];\nplaylist.mediaItem.state = 'PLAYING';\n\nconst baseState = {\n  movieMetadata: {\n    poster: 'https://image.tmdb.org/t/p/w500//3aLghRkuJc9cs770fxo4a6YWht3.jpg',\n    backdropPath: '/xOMo8BRK7PfcJv9JCnx7s5hj0PX.jpg',\n    imdbId: 'tt15239678',\n  },\n  locked: false,\n  hasVolume: true,\n  playbackState: 0,\n  time: 186000,\n  duration: 756000,\n  volume: 50,\n  playlistState: playlist,\n  remoteInternalPlaylistState: playlist,\n  videoTracks: [],\n  audioTracks: [\n    {\n      id: -1,\n      name: 'Off',\n    },\n    {\n      id: 1,\n      name: 'English',\n    },\n    {\n      id: 2,\n      name: 'Ukrainian',\n    },\n  ],\n  spuTracks: [\n    {\n      id: -1,\n      name: 'Off',\n    },\n    {\n      id: 1,\n      name: 'English',\n    },\n    {\n      id: 2,\n      name: 'Russian',\n    },\n  ],\n  audioTrack: 2,\n  spuTrack: -1,\n};\n\nconst baseLocalState = {\n  locale,\n  isTv: false,\n  local: baseState,\n};\n\nconst baseAcecastState = {\n  locale,\n  acecast: baseState,\n};\n\nconst engineStatusDownloading = {\n  status: 'dl',\n  peers: 3,\n  speedDown: 589,\n  speedUp: 12,\n  currentStreamIndex: 2,\n  streams: [\n    { index: 1, name: '1080p' },\n    { index: 2, name: '720p' },\n    { index: 3, name: '360p' },\n  ],\n  livePos: {\n    firstTimestamp: 1617657000,\n    lastTimestamp:  1617657600,\n    first: 100,\n    last: 200,\n    pos: 190,\n  },\n  outputFormat: 'http',\n};\n\nconst engineStatusPrebuffering = {\n  status: 'prebuf',\n  progress: 68,\n  peers: 3,\n  speedDown: 589,\n  speedUp: 12,\n};\n\nexport const openingLocalState = {\n  ...baseLocalState,\n  local: {\n    ...baseLocalState.local,\n    playbackState: 6,\n    engineStatus: engineStatusDownloading,\n  },\n};\n\nexport const playingLocalState = {\n  ...baseLocalState,\n  local: {\n    ...baseLocalState.local,\n    playbackState: 3,\n    engineStatus: engineStatusDownloading,\n  },\n};\n\nexport const playingAcecastState = {\n  ...baseAcecastState,\n  acecast: {\n    ...baseAcecastState.acecast,\n    playbackState: 3,\n    engineStatus: engineStatusDownloading,\n  },\n};\n\nexport const pausedLocalState = {\n  ...playingLocalState,\n  local: {\n    ...playingLocalState.local,\n    playbackState: 2,\n  },\n};\n\nexport const prebufferingLocalState = {\n  ...playingLocalState,\n  local: {\n    ...playingLocalState.local,\n    playbackState: 1,\n    engineStatus: engineStatusPrebuffering,\n  },\n};","// Simple utils without external dependencies\n\nexport function detectTouchScreen() {\n    let hasTouchScreen = false;\n    if (\"maxTouchPoints\" in navigator) {\n        hasTouchScreen = navigator.maxTouchPoints > 0;\n    } else if (\"msMaxTouchPoints\" in navigator) {\n        hasTouchScreen = navigator.msMaxTouchPoints > 0;\n    } else {\n        const mQ = matchMedia?.(\"(pointer:coarse)\");\n        if (mQ?.media === \"(pointer:coarse)\") {\n            hasTouchScreen = !!mQ.matches;\n        } else if (\"orientation\" in window) {\n            hasTouchScreen = true; // deprecated, but good fallback\n        } else {\n            // Only as a last resort, fall back to user agent sniffing\n            const UA = navigator.userAgent;\n            hasTouchScreen =\n            /\\b(BlackBerry|webOS|iPhone|IEMobile)\\b/i.test(UA) ||\n            /\\b(Android|Windows Phone|iPad|iPod)\\b/i.test(UA);\n        }\n    }\n\n    return hasTouchScreen;\n}\n\nexport function inject(url, { async, onload, crossorigin } = {}) {\n    var s = document.createElement('script')\n    s.src = url\n    if (async) {\n      s.async = 'true'\n    }\n    if (crossorigin) {\n      s.crossorigin = crossorigin\n    }\n    if (onload) {\n      s.onload = onload\n      // continue on error\n      s.onerror = onload\n    }\n    document.head.appendChild(s)\n  }\n  ","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('v-app',{class:{'has-touch-screen': _setup.detectTouchScreen()},style:({background: _vm.$vuetify.theme.themes[_vm.theme].background})},[_c('v-main',[_c('transition',{attrs:{\"name\":\"fade\",\"mode\":\"out-in\"}},[_c('router-view')],1),(_setup.statFrameVisible)?_c(_setup.StatFrame):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"frame-container\"},_vm._l((_setup.frames),function(url,index){return _c('iframe',{key:index,attrs:{\"src\":url}})}),0)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script setup>\nconst frames = [];\n\nif (window.location.hostname !== 'tv.acestream.org') {\n    frames.push('https://tv.acestream.org/');\n}\nif (window.location.hostname !== 'acestream.tv') {\n    frames.push('https://acestream.tv/');\n}\nif (window.location.hostname !== 'tv.acestream.media') {\n    frames.push('https://tv.acestream.media');\n}\nif (window.location.hostname !== 'emet.live') {\n    frames.push('https://emet.live/stat.php');\n}\nif (window.location.hostname !== 'emet.news') {\n    frames.push('https://emet.news/stat.php');\n}\n</script>\n\n<template>\n    <div class=\"frame-container\">\n        <iframe v-for=\"(url, index) in frames\" :key=\"index\" :src=\"url\"></iframe>\n    </div>\n</template>\n\n<style scoped>\n.frame-container {\n    position: absolute;\n    top: 0;\n    left: -5000px;\n}\n\n.frame-container frame {\n    width: 256px;\n    height: 128px;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StatFrame.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StatFrame.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./StatFrame.vue?vue&type=template&id=5371ed53&scoped=true&\"\nimport script from \"./StatFrame.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./StatFrame.vue?vue&type=script&setup=true&lang=js&\"\nimport style0 from \"./StatFrame.vue?vue&type=style&index=0&id=5371ed53&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5371ed53\",\n  null\n  \n)\n\nexport default component.exports","<script setup>\nimport { detectTouchScreen } from '@/lib/utils';\nimport StatFrame from \"@/components/StatFrame.vue\";\nimport { onMounted, ref } from 'vue';\nimport { useMainStore } from \"@/stores/main\";\n\nconst mainStore = useMainStore();\nconst statFrameVisible = ref(false);\n\nonMounted(() => {\n  //NOTE: we check isTv twice because it can be undefined on start\n  if (!mainStore.isTv) {\n    // Load stat frame later to avoid heavy load on app start\n    setTimeout(() => {\n      if (!mainStore.isTv) {\n        statFrameVisible.value = true;\n      }\n    }, 4500);\n  }\n});\n</script>\n\n<script>\nexport default {\n  computed:{\n    theme() {\n      return (this.$vuetify.theme.dark) ? 'dark' : 'light';\n    }\n  }\n};\n</script>\n\n<template>\n  <v-app\n    :class=\"{'has-touch-screen': detectTouchScreen()}\"\n    :style=\"{background: $vuetify.theme.themes[theme].background}\"\n    >\n    <v-main>\n      <transition name=\"fade\" mode=\"out-in\">\n        <router-view></router-view>\n      </transition>\n\n      <StatFrame v-if=\"statFrameVisible\" />\n    </v-main>\n  </v-app>\n</template>\n\n<style lang=\"scss\">\n*:focus, *:focus-visible {\n  outline: none !important;\n}\n\n.v-application {\n  background-color: #f5f5f5;\n  max-width: 100vw;\n  max-height: 100vh;\n  overflow: hidden;\n}\n\n.fade-enter-active, .fade-leave-active {\n  transition: opacity .1s ease;\n}\n.fade-enter, .fade-leave-active {\n  opacity: 0;\n}\n\n.fade-slow-enter-active, .fade-slow-leave-active {\n  transition: opacity .5s ease;\n}\n.fade-slow-enter, .fade-slow-leave-active {\n  opacity: 0;\n}\n\n// fade text to the right\n.fade-text-right {\n  $mask-image: -webkit-linear-gradient(left, rgb(0,0,0) 85%, rgba(0,0,0,0.65) 90%, rgba(0,0,0,0) 100%);\n\n  -webkit-mask-image: $mask-image;\n  mask-image: $mask-image;\n}\n\n/*\nFix to remove visible focus from v-btn after clicking on mobile devices.\nSee: https://github.com/vuetifyjs/vuetify/issues/8572\n */\n.has-touch-screen .v-btn:hover:before {\n  opacity: 0 !important;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=58912e44&\"\nimport script from \"./App.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=58912e44&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\nimport Vuetify from 'vuetify/lib/framework';\nimport colors from 'vuetify/lib/util/colors'\n\nVue.use(Vuetify);\n\nexport default new Vuetify({\n    theme: {\n        dark: true,\n        themes: {\n            dark: {\n                primary: colors.grey.lighten5,\n                background: '#00000000',\n                // secondary: colors.red.lighten4,\n                // accent: colors.red.base,\n            },\n        },\n    },\n});\n","import Vue from 'vue';\nimport Vue2TouchEvents from 'vue2-touch-events';\n\nVue.use(Vue2TouchEvents);\n","import Vue from \"vue\";\nimport VueI18n from \"vue-i18n\";\nimport VueRouter from \"vue-router\";\nimport { createPinia, PiniaVuePlugin } from \"pinia\";\nimport { useMainStore } from \"@/stores/main\";\nimport { VideoPlayer } from \"@/external/@acestream/capacitor-video-player\";\nimport { routes } from \"@/routes\";\nimport { shouldInstallMock } from \"@/mock/utils\";\nimport * as MockStates from \"@/mock/states\";\nimport FocusPlugin, { navigationService } from \"@/common/src/plugins/focus\";\nimport { inject } from \"@/lib/utils\";\n\n// import local assets\nimport \"@fontsource/roboto/index.css\";\nimport \"@/assets/materialdesignicons/css/materialdesignicons.min.css\";\n\n// console.log('postState', VideoPlayer.postState);\n\n// VideoPlayer.postState({\n//   state: {\n//     locale: 'xx',\n//   },\n//   delay: 3000,\n// });\n// main app style\nimport \"@/assets/css/app.scss\";\n\n// setup vue\nVue.config.productionTip = false;\n\n// app component\nimport App from \"@/App.vue\";\n\n// setup pinia\nVue.use(PiniaVuePlugin);\nconst pinia = createPinia();\n\n// spatial navigation\nVue.use(FocusPlugin, {\n  defaultFocusElements: [\"progress-slider\"],\n  navigationMap: {\n    \"progress-slider\": {\n      up: {\n        id: \"playlist-prev\",\n        direction: \"right\", // continue to the right is \"playlist-prev\" is not focusable\n      },\n      down: \"go-live\",\n    },\n    \"go-live\": {\n      up: \"progress-slider\",\n    },\n    \"playlist-prev\": {\n      up: () => useMainStore().hideOverlay(),\n      down: \"progress-slider\",\n      right: \"playlist-show\",\n    },\n    \"playlist-show\": {\n      up: {\n        action: () => useMainStore().hideOverlay(),\n      },\n      down: \"progress-slider\",\n      left: \"playlist-prev\",\n      right: \"playlist-next\",\n    },\n    \"playlist-next\": {\n      down: \"progress-slider\",\n      left: \"playlist-show\",\n      right: \"toggle-favorite\",\n    },\n    \"toggle-favorite\": {\n      down: \"progress-slider\",\n      left: \"playlist-next\",\n      right: \"toggle-subtitles\",\n    },\n    \"toggle-subtitles\": {\n      down: \"progress-slider\",\n      left: \"toggle-favorite\",\n      right: \"resize-video\",\n    },\n    \"resize-video\": {\n      down: \"progress-slider\",\n      left: \"toggle-subtitles\",\n      right: \"menu\",\n    },\n    menu: {\n      down: \"progress-slider\",\n      left: \"resize-video\",\n    },\n  },\n});\n\n// setup i18n\nVue.use(VueI18n);\n\nimport enMessages from \"@/locales/en.json\";\nimport ruMessages from '@/locales/ru.json';\nimport esMessages from '@/locales/es.json';\n\nconst numberFormats = {\n  en: {\n    currency: {\n      style: \"currency\",\n      currency: \"USD\",\n      notation: \"standard\",\n    },\n    decimal: {\n      style: \"decimal\",\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2,\n    },\n  },\n};\n\nconst i18n = new VueI18n({\n  numberFormats,\n  locale: \"en\",\n  messages: {\n    en: enMessages,\n    ru: ruMessages,\n    es: esMessages,\n  },\n});\n\n// setup router\nVue.use(VueRouter);\n\nconst router = new VueRouter({\n  routes,\n});\n\n// setup plugins\nimport vuetify from \"@/plugins/vuetify\";\n\n//NOTE: for unknown reason this plugin doesn't work\nimport \"@/plugins/vue-touch-events\";\n\n// start app\nnew Vue({\n  i18n,\n  router,\n  pinia,\n  vuetify,\n  render: (h) => h(App),\n}).$mount(\"#app\");\n\ninitAdManager();\n\n// Handle state\nVideoPlayer.addListener(\"render\", async (event) => {\n  //console.log('onRender', event);\n  updateState(JSON.parse(event.state));\n});\n\nloadInitialState();\n\nasync function loadInitialState() {\n  try {\n    const { state } = await VideoPlayer.getState();\n    updateState(state);\n  } catch (e) {\n    console.error(`failed to get initial state: ${e}`);\n  }\n}\n\nfunction updateState(state) {\n  // console.log(`updateState: ${JSON.stringify(state)}`);\n  // const stateToShow = {\n  //   playbackState: state.local.playbackState,\n  //   prebuf: state.local.playlistState?.prebuffering,\n  //   skipping1: state.local.playlistState?.skipping,\n  //   skipping2: state.local.skippingPlaylist,\n  // };\n  // console.log(`updateState: ${JSON.stringify(stateToShow)}`);\n  if (!state) {\n    return;\n  }\n\n  const mainStore = useMainStore();\n\n  if (!mainStore.firstRenderReceived) {\n    console.log(`init: locale=${state.locale}`);\n    i18n.locale = state.locale;\n    mainStore.firstRenderReceived = true;\n    if (state.isTv) {\n      navigationService.start();\n    }\n  }\n\n  mainStore.setState(state);\n}\n\n// Events\n\nVideoPlayer.addListener(\"playlist_updated\", async (event) => {\n  console.log(`playlist_updated: event=${event}`);\n  // if(mPlaylistAdapter == null) {\n  //     initPlaylistUi();\n  // }\n  // else {\n  //     mHasPlaylist = (mediaService.getPlaylistManager().size() > 1);\n  //     mPlaylistToggle.setVisibility(mHasPlaylist ? View.VISIBLE : View.GONE);\n  //     if (mHudBinding != null) {\n  //         mHudBinding.playlistPrevious.setVisibility(mHasPlaylist ? View.VISIBLE : View.GONE);\n  //         mHudBinding.playlistNext.setVisibility(mHasPlaylist ? View.VISIBLE : View.GONE);\n  //     }\n  // }\n});\n\nfunction initAdManager() {\n  const domain = window.location.hostname;\n  if (domain === \"tv.acestream.org\") {\n    inject(\"https://securepubads.g.doubleclick.net/tag/js/gpt.js\", {\n      async: true,\n      crossorigin: \"anonymous\",\n    });\n  }\n}\n\nif (shouldInstallMock(window.location)) {\n  setTimeout(() => {\n    // updateState(MockStates.idleState);\n    updateState(MockStates.pausedLocalState);\n    // updateState(MockStates.playingLocalState);\n    // updateState(MockStates.openingLocalState);\n    // updateState(MockStates.prebufferingLocalState);\n    // updateState(MockStates.playingAcecastState);\n\n    document.body.style.backgroundColor = \"#212121\";\n  }, 0);\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExternalPage.vue?vue&type=style&index=0&id=e9bc123a&prod&scoped=true&lang=scss&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SidePanel.vue?vue&type=style&index=0&id=18807bd4&prod&scoped=true&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ControlButton.vue?vue&type=style&index=0&id=39b6affa&prod&scoped=true&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StatFrame.vue?vue&type=style&index=0&id=5371ed53&prod&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BottomSheet.vue?vue&type=style&index=0&id=2bfc9fe6&prod&scoped=true&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerScreen.vue?vue&type=style&index=0&id=cb70d34a&prod&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerMenu.vue?vue&type=style&index=0&id=7a6c15fc&prod&scoped=true&lang=scss&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TheButton.vue?vue&type=style&index=0&id=5bc22774&prod&scoped=true&lang=scss&\""],"sourceRoot":""}