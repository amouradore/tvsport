{"version":3,"sources":["webpack:///./node_modules/@capawesome/capacitor-file-picker/dist/esm/web.js"],"names":["FilePickerWeb","super","arguments","this","ERROR_PICK_FILE_CANCELED","_options","unimplemented","options","pickedFiles","openFilePicker","Error","result","files","pickedFile","file","blob","modifiedAt","lastModified","mimeType","getMimeTypeFromUrl","name","getNameFromUrl","path","undefined","size","getSizeFromUrl","readData","data","getDataFromFile","push","pickFiles","Object","assign","types","_a","accept","join","multiple","Promise","resolve","onChangeFired","input","document","createElement","type","addEventListener","Array","from","once","window","async","wait","click","reject","reader","FileReader","readAsDataURL","onload","splittedResult","split","base64","onerror","error","delayMs","setTimeout"],"mappings":"kHAAA,qEACO,MAAMA,UAAsB,OAC/B,cACIC,SAASC,WACTC,KAAKC,yBAA2B,sBAEpC,wBAAwBC,GACpB,MAAMF,KAAKG,cAAc,2BAE7B,gBAAgBC,GACZ,MAAMC,QAAoBL,KAAKM,eAAeF,GAC9C,IAAKC,EACD,MAAM,IAAIE,MAAMP,KAAKC,0BAEzB,MAAMO,EAAS,CACXC,MAAO,IAEX,IAAK,MAAMC,KAAcL,EAAa,CAClC,MAAMM,EAAO,CACTC,KAAMF,EACNG,WAAYH,EAAWI,aACvBC,SAAUf,KAAKgB,mBAAmBN,GAClCO,KAAMjB,KAAKkB,eAAeR,GAC1BS,UAAMC,EACNC,KAAMrB,KAAKsB,eAAeZ,KAEd,OAAZN,QAAgC,IAAZA,OAAqB,EAASA,EAAQmB,YAC1DZ,EAAKa,WAAaxB,KAAKyB,gBAAgBf,IAE3CF,EAAOC,MAAMiB,KAAKf,GAEtB,OAAOH,EAEX,iBAAiBJ,GACb,OAAOJ,KAAK2B,UAAUC,OAAOC,OAAO,CAAEC,MAAO,CAAC,YAAc1B,IAEhE,gBAAgBA,GACZ,OAAOJ,KAAK2B,UAAUC,OAAOC,OAAO,CAAEC,MAAO,CAAC,UAAW,YAAc1B,IAE3E,iBAAiBA,GACb,OAAOJ,KAAK2B,UAAUC,OAAOC,OAAO,CAAEC,MAAO,CAAC,YAAc1B,IAEhE,qBAAqBA,GACjB,IAAI2B,EACJ,MAAMC,GAAqF,QAA1ED,EAAiB,OAAZ3B,QAAgC,IAAZA,OAAqB,EAASA,EAAQ0B,aAA0B,IAAPC,OAAgB,EAASA,EAAGE,KAAK,OAAS,GACvIC,KAA0B,OAAZ9B,QAAgC,IAAZA,OAAqB,EAASA,EAAQ8B,UAC9E,OAAO,IAAIC,QAAQC,IACf,IAAIC,GAAgB,EACpB,MAAMC,EAAQC,SAASC,cAAc,SACrCF,EAAMG,KAAO,OACbH,EAAMN,OAASA,EACfM,EAAMJ,SAAWA,EACjBI,EAAMI,iBAAiB,SAAU,KAC7BL,GAAgB,EAChB,MAAM5B,EAAQkC,MAAMC,KAAKN,EAAM7B,OAAS,IACxC2B,EAAQ3B,IACT,CAAEoC,MAAM,IAEXC,OAAOJ,iBAAiB,QAASK,gBACvB/C,KAAKgD,KAAK,KACZX,GAGJD,OAAQhB,IACT,CAAEyB,MAAM,IACXP,EAAMW,UAGd,sBAAsBtC,GAClB,OAAO,IAAIwB,QAAQ,CAACC,EAASc,KACzB,MAAMC,EAAS,IAAIC,WACnBD,EAAOE,cAAc1C,GACrBwC,EAAOG,OAAS,KACZ,MAAM9C,EAAkC,kBAAlB2C,EAAO3C,OAAsB2C,EAAO3C,OAAS,GAC7D+C,EAAiB/C,EAAOgD,MAAM,WAC9BC,EAASF,EAAe,IAAM,GACpCnB,EAAQqB,IAEZN,EAAOO,QAAUC,IACbT,EAAOS,MAInB,eAAehD,GACX,OAAOA,EAAKM,KAEhB,mBAAmBN,GACf,OAAOA,EAAK8B,KAEhB,eAAe9B,GACX,OAAOA,EAAKU,KAEhB,WAAWuC,GACP,OAAO,IAAIzB,QAAQC,GAAWyB,WAAWzB,EAASwB","file":"js/chunk-2d0dec6b.fdf877aa.js","sourcesContent":["import { WebPlugin } from '@capacitor/core';\nexport class FilePickerWeb extends WebPlugin {\n    constructor() {\n        super(...arguments);\n        this.ERROR_PICK_FILE_CANCELED = 'pickFiles canceled.';\n    }\n    async convertHeicToJpeg(_options) {\n        throw this.unimplemented('Not implemented on web.');\n    }\n    async pickFiles(options) {\n        const pickedFiles = await this.openFilePicker(options);\n        if (!pickedFiles) {\n            throw new Error(this.ERROR_PICK_FILE_CANCELED);\n        }\n        const result = {\n            files: [],\n        };\n        for (const pickedFile of pickedFiles) {\n            const file = {\n                blob: pickedFile,\n                modifiedAt: pickedFile.lastModified,\n                mimeType: this.getMimeTypeFromUrl(pickedFile),\n                name: this.getNameFromUrl(pickedFile),\n                path: undefined,\n                size: this.getSizeFromUrl(pickedFile),\n            };\n            if (options === null || options === void 0 ? void 0 : options.readData) {\n                file.data = await this.getDataFromFile(pickedFile);\n            }\n            result.files.push(file);\n        }\n        return result;\n    }\n    async pickImages(options) {\n        return this.pickFiles(Object.assign({ types: ['image/*'] }, options));\n    }\n    async pickMedia(options) {\n        return this.pickFiles(Object.assign({ types: ['image/*', 'video/*'] }, options));\n    }\n    async pickVideos(options) {\n        return this.pickFiles(Object.assign({ types: ['video/*'] }, options));\n    }\n    async openFilePicker(options) {\n        var _a;\n        const accept = ((_a = options === null || options === void 0 ? void 0 : options.types) === null || _a === void 0 ? void 0 : _a.join(',')) || '';\n        const multiple = !!(options === null || options === void 0 ? void 0 : options.multiple);\n        return new Promise(resolve => {\n            let onChangeFired = false;\n            const input = document.createElement('input');\n            input.type = 'file';\n            input.accept = accept;\n            input.multiple = multiple;\n            input.addEventListener('change', () => {\n                onChangeFired = true;\n                const files = Array.from(input.files || []);\n                resolve(files);\n            }, { once: true });\n            // Workaround to detect when Cancel is selected in the File Selection dialog box.\n            window.addEventListener('focus', async () => {\n                await this.wait(1000);\n                if (onChangeFired) {\n                    return;\n                }\n                resolve(undefined);\n            }, { once: true });\n            input.click();\n        });\n    }\n    async getDataFromFile(file) {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.readAsDataURL(file);\n            reader.onload = () => {\n                const result = typeof reader.result === 'string' ? reader.result : '';\n                const splittedResult = result.split('base64,');\n                const base64 = splittedResult[1] || '';\n                resolve(base64);\n            };\n            reader.onerror = error => {\n                reject(error);\n            };\n        });\n    }\n    getNameFromUrl(file) {\n        return file.name;\n    }\n    getMimeTypeFromUrl(file) {\n        return file.type;\n    }\n    getSizeFromUrl(file) {\n        return file.size;\n    }\n    async wait(delayMs) {\n        return new Promise(resolve => setTimeout(resolve, delayMs));\n    }\n}\n//# sourceMappingURL=web.js.map"],"sourceRoot":""}