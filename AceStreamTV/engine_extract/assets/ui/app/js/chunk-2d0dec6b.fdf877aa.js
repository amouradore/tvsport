(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0dec6b"],{"86a8":function(e,i,t){"use strict";t.r(i),t.d(i,"FilePickerWeb",(function(){return s}));var n=t("1547");class s extends n["a"]{constructor(){super(...arguments),this.ERROR_PICK_FILE_CANCELED="pickFiles canceled."}async convertHeicToJpeg(e){throw this.unimplemented("Not implemented on web.")}async pickFiles(e){const i=await this.openFilePicker(e);if(!i)throw new Error(this.ERROR_PICK_FILE_CANCELED);const t={files:[]};for(const n of i){const i={blob:n,modifiedAt:n.lastModified,mimeType:this.getMimeTypeFromUrl(n),name:this.getNameFromUrl(n),path:void 0,size:this.getSizeFromUrl(n)};(null===e||void 0===e?void 0:e.readData)&&(i.data=await this.getDataFromFile(n)),t.files.push(i)}return t}async pickImages(e){return this.pickFiles(Object.assign({types:["image/*"]},e))}async pickMedia(e){return this.pickFiles(Object.assign({types:["image/*","video/*"]},e))}async pickVideos(e){return this.pickFiles(Object.assign({types:["video/*"]},e))}async openFilePicker(e){var i;const t=(null===(i=null===e||void 0===e?void 0:e.types)||void 0===i?void 0:i.join(","))||"",n=!!(null===e||void 0===e?void 0:e.multiple);return new Promise(e=>{let i=!1;const s=document.createElement("input");s.type="file",s.accept=t,s.multiple=n,s.addEventListener("change",()=>{i=!0;const t=Array.from(s.files||[]);e(t)},{once:!0}),window.addEventListener("focus",async()=>{await this.wait(1e3),i||e(void 0)},{once:!0}),s.click()})}async getDataFromFile(e){return new Promise((i,t)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>{const e="string"===typeof n.result?n.result:"",t=e.split("base64,"),s=t[1]||"";i(s)},n.onerror=e=>{t(e)}})}getNameFromUrl(e){return e.name}getMimeTypeFromUrl(e){return e.type}getSizeFromUrl(e){return e.size}async wait(e){return new Promise(i=>setTimeout(i,e))}}}}]);
//# sourceMappingURL=chunk-2d0dec6b.fdf877aa.js.map