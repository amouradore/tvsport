(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();const de=10,f={level:de,tag:"AS/AP",error(t){f.message("error",t)},debug(t){f.message("log",t)},message(t,e){console[t](f.tag+": "+e)}},le="modulepreload",ce=function(t){return"/"+t},G={},ue=function(e,n,s){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),a=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));o=Promise.all(n.map(i=>{if(i=ce(i),i in G)return;G[i]=!0;const c=i.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${d}`))return;const w=document.createElement("link");if(w.rel=c?"stylesheet":le,c||(w.as="script",w.crossOrigin=""),w.href=i,a&&w.setAttribute("nonce",a),document.head.appendChild(w),c)return new Promise((P,_)=>{w.addEventListener("load",P),w.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${i}`)))})}))}return o.then(()=>e()).catch(r=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r})};/*! Capacitor: https://capacitorjs.com/ - MIT License */const fe=t=>{const e=new Map;e.set("web",{name:"web"});const n=t.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},s=(r,a)=>{n.platforms.set(r,a)},o=r=>{n.platforms.has(r)&&(n.currentPlatform=n.platforms.get(r))};return n.addPlatform=s,n.setPlatform=o,n},ge=t=>t.CapacitorPlatforms=fe(t),N=ge(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});N.addPlatform;N.setPlatform;var T;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(T||(T={}));class x extends Error{constructor(e,n,s){super(e),this.message=e,this.code=n,this.data=s}}const me=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},we=t=>{var e,n,s,o,r;const a=t.CapacitorCustomPlatform||null,i=t.Capacitor||{},c=i.Plugins=i.Plugins||{},d=t.CapacitorPlatforms,w=()=>a!==null?a.name:me(t),P=((e=d==null?void 0:d.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||w,_=()=>P()!=="web",Y=((n=d==null?void 0:d.currentPlatform)===null||n===void 0?void 0:n.isNativePlatform)||_,X=l=>{const u=j.get(l);return!!(u!=null&&u.platforms.has(P())||H(l))},Z=((s=d==null?void 0:d.currentPlatform)===null||s===void 0?void 0:s.isPluginAvailable)||X,ee=l=>{var u;return(u=i.PluginHeaders)===null||u===void 0?void 0:u.find(O=>O.name===l)},H=((o=d==null?void 0:d.currentPlatform)===null||o===void 0?void 0:o.getPluginHeader)||ee,te=l=>t.console.error(l),ne=(l,u,O)=>Promise.reject(`${O} does not have an implementation of "${u}".`),j=new Map,re=(l,u={})=>{const O=j.get(l);if(O)return console.warn(`Capacitor plugin "${l}" already registered. Cannot register plugins twice.`),O.proxy;const C=P(),R=H(l);let h;const ie=async()=>(!h&&C in u?h=typeof u[C]=="function"?h=await u[C]():h=u[C]:a!==null&&!h&&"web"in u&&(h=typeof u.web=="function"?h=await u.web():h=u.web),h),se=(g,m)=>{var y,b;if(R){const A=R==null?void 0:R.methods.find(E=>m===E.name);if(A)return A.rtype==="promise"?E=>i.nativePromise(l,m.toString(),E):(E,D)=>i.nativeCallback(l,m.toString(),E,D);if(g)return(y=g[m])===null||y===void 0?void 0:y.bind(g)}else{if(g)return(b=g[m])===null||b===void 0?void 0:b.bind(g);throw new x(`"${l}" plugin is not implemented on ${C}`,T.Unimplemented)}},q=g=>{let m;const y=(...b)=>{const A=ie().then(E=>{const D=se(E,g);if(D){const U=D(...b);return m=U==null?void 0:U.remove,U}else throw new x(`"${l}.${g}()" is not implemented on ${C}`,T.Unimplemented)});return g==="addListener"&&(A.remove=async()=>m()),A};return y.toString=()=>`${g.toString()}() { [capacitor code] }`,Object.defineProperty(y,"name",{value:g,writable:!1,configurable:!1}),y},W=q("addListener"),K=q("removeListener"),ae=(g,m)=>{const y=W({eventName:g},m),b=async()=>{const E=await y;K({eventName:g,callbackId:E},m)},A=new Promise(E=>y.then(()=>E({remove:b})));return A.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await b()},A},I=new Proxy({},{get(g,m){switch(m){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return R?ae:W;case"removeListener":return K;default:return q(m)}}});return c[l]=I,j.set(l,{name:l,proxy:I,platforms:new Set([...Object.keys(u),...R?[C]:[]])}),I},oe=((r=d==null?void 0:d.currentPlatform)===null||r===void 0?void 0:r.registerPlugin)||re;return i.convertFileSrc||(i.convertFileSrc=l=>l),i.getPlatform=P,i.handleError=te,i.isNativePlatform=Y,i.isPluginAvailable=Z,i.pluginMethodNoop=ne,i.registerPlugin=oe,i.Exception=x,i.DEBUG=!!i.DEBUG,i.isLoggingEnabled=!!i.isLoggingEnabled,i.platform=i.getPlatform(),i.isNative=i.isNativePlatform(),i},Ee=t=>t.Capacitor=we(t),M=Ee(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),F=M.registerPlugin;M.Plugins;class J{constructor(e){this.listeners={},this.retainedEventArguments={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,n){let s=!1;this.listeners[e]||(this.listeners[e]=[],s=!0),this.listeners[e].push(n);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r),s&&this.sendRetainedArgumentsForEvent(e);const a=async()=>this.removeListener(e,n);return Promise.resolve({remove:a})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,s){const o=this.listeners[e];if(!o){if(s){let r=this.retainedEventArguments[e];r||(r=[]),r.push(n),this.retainedEventArguments[e]=r}return}o.forEach(r=>r(n))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:s=>{this.notifyListeners(n,s)}}}unimplemented(e="not implemented"){return new M.Exception(e,T.Unimplemented)}unavailable(e="not available"){return new M.Exception(e,T.Unavailable)}async removeListener(e,n){const s=this.listeners[e];if(!s)return;const o=s.indexOf(n);this.listeners[e].splice(o,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(s=>{this.notifyListeners(e,s)}))}}const z=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),V=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class ye extends J{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(s=>{if(s.length<=0)return;let[o,r]=s.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");o=V(o).trim(),r=V(r).trim(),n[o]=r}),n}async setCookie(e){try{const n=z(e.key),s=z(e.value),o=`; expires=${(e.expires||"").replace("expires=","")}`,r=(e.path||"/").replace("path=",""),a=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${s||""}${o}; path=${r}; ${a};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}F("CapacitorCookies",{web:()=>new ye});const he=async t=>new Promise((e,n)=>{const s=new FileReader;s.onload=()=>{const o=s.result;e(o.indexOf(",")>=0?o.split(",")[1]:o)},s.onerror=o=>n(o),s.readAsDataURL(t)}),pe=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(o=>o.toLocaleLowerCase()).reduce((o,r,a)=>(o[r]=t[e[a]],o),{})},ve=(t,e=!0)=>t?Object.entries(t).reduce((s,o)=>{const[r,a]=o;let i,c;return Array.isArray(a)?(c="",a.forEach(d=>{i=e?encodeURIComponent(d):d,c+=`${r}=${i}&`}),c.slice(0,-1)):(i=e?encodeURIComponent(a):a,c=`${r}=${i}`),`${s}&${c}`},"").substr(1):null,Pe=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),o=pe(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(o.includes("application/x-www-form-urlencoded")){const r=new URLSearchParams;for(const[a,i]of Object.entries(t.data||{}))r.set(a,i);n.body=r.toString()}else if(o.includes("multipart/form-data")||t.data instanceof FormData){const r=new FormData;if(t.data instanceof FormData)t.data.forEach((i,c)=>{r.append(c,i)});else for(const i of Object.keys(t.data))r.append(i,t.data[i]);n.body=r;const a=new Headers(n.headers);a.delete("content-type"),n.headers=a}else(o.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class be extends J{async request(e){const n=Pe(e,e.webFetchExtra),s=ve(e.params,e.shouldEncodeUrlParams),o=s?`${e.url}?${s}`:e.url,r=await fetch(o,n),a=r.headers.get("content-type")||"";let{responseType:i="text"}=r.ok?e:{};a.includes("application/json")&&(i="json");let c,d;switch(i){case"arraybuffer":case"blob":d=await r.blob(),c=await he(d);break;case"json":c=await r.json();break;case"document":case"text":default:c=await r.text()}const w={};return r.headers.forEach((P,_)=>{w[_]=P}),{data:c,headers:w,status:r.status,url:r.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}F("CapacitorHttp",{web:()=>new be});const S=F("ContentStart",{web:()=>ue(()=>import("./web-CzHdq_f6.js"),[]).then(t=>new t.ContentStartWeb)}),Ae=!1;let p,k,B,$,v,Q=!1;function Le(){const t=document.getElementById("loader");t&&(t.style.display="none")}async function Ce(t){try{f.debug("notifyRequestCompleted"),await S.imaSdkRequestCompleted({requestId:t})}catch(e){f.debug(`notifyRequestCompleted:failed: ${e.message}`)}}async function Se(t,e){try{f.debug("notifyRequestFailed"),await S.imaSdkRequestFailed({requestId:t,errorMessage:e})}catch(n){f.debug(`notifyRequestFailed:failed: ${n.message}`)}}async function Oe(t){try{f.debug(`notifyEvent: name=${t}`),t==="STARTED"?Le():t==="PAUSED"&&(f.debug("AS/AP: force unpause"),v.resume()),await S.imaSdkEvent({eventName:t})}catch(e){f.error(`notifyEvent:failed: ${e.message}`)}}async function L(t){try{f.debug(`notifyError: ${t}`),await S.imaSdkError({message:t})}catch(e){f.debug(`notifyError:failed: ${e.message}`)}}function Re(){if(p=document.getElementById("video-element"),k=document.getElementById("ad-container"),f.debug(`initializing IMA: video=${p} adContainer=${k}`),!p||!k){L("ima: no ad container");return}if(!window.google){L("ima: failed to init sdk");return}B=new window.google.ima.AdDisplayContainer(k,p),$=new window.google.ima.AdsLoader(B),$.getSettings().setAutoPlayAdBreaks(!1),$.addEventListener(window.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,_e,!1),$.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,$e,!1),Q=!0}function Te(t){t.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,De);const e={STARTED:window.google.ima.AdEvent.Type.STARTED,IMPRESSION:window.google.ima.AdEvent.Type.IMPRESSION,PAUSED:window.google.ima.AdEvent.Type.PAUSED,RESUMED:window.google.ima.AdEvent.Type.RESUMED,COMPLETE:window.google.ima.AdEvent.Type.COMPLETE,USER_CLOSE:window.google.ima.AdEvent.Type.USER_CLOSE,LOADED:window.google.ima.AdEvent.Type.LOADED,ALL_ADS_COMPLETED:window.google.ima.AdEvent.Type.ALL_ADS_COMPLETED,AD_BREAK_FETCH_ERROR:window.google.ima.AdEvent.Type.AD_BREAK_FETCH_ERROR,AD_BREAK_READY:window.google.ima.AdEvent.Type.AD_BREAK_READY,LOG:window.google.ima.AdEvent.Type.LOG,SKIPPED:window.google.ima.AdEvent.Type.SKIPPED,CONTENT_PAUSE_REQUESTED:window.google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,CONTENT_RESUME_REQUESTED:window.google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED};for(const[n,s]of Object.entries(e))t.addEventListener(s,()=>Oe(n))}async function _e(t){f.debug("ima:onAdsManagerLoaded"),v=t.getAdsManager(p),Te(v),Ce(0)}function $e(t){Se("ima:error: "+t.getError())}function De(t){L("ima:error: "+t.getError()),v&&v.destroy()}function Ue(t){try{if(!Q)throw new Error("ima: sdk is not initialized");if(t.length==0)throw new Error("no tags");const e=new window.google.ima.AdsRequest;e.adTagUrl=t[0],$.requestAds(e)}catch(e){L(`requestAds:error: ${e.message}`)}}function ke(){f.debug("ima:load-ads"),B.initialize();var t=p.clientWidth,e=p.clientHeight;try{v.init(t,e,window.google.ima.ViewMode.NORMAL)}catch{L("ima:AdsManager could not be started")}}function Me(){S.addListener("request_ads",t=>{try{f.debug(`request_ads: ${JSON.stringify(t)}`);const e=JSON.parse(t.tags);Ue(e)}catch(e){L(`onRequestAds:error: ${e.message}`)}}),S.addListener("init_ads",()=>{try{f.debug("init_ads"),ke()}catch(t){L(`onInitAds:error: ${t.message}`)}}),S.addListener("start_ads",()=>{try{f.debug("start_ads"),v.start()}catch(t){L(`onStartAds:error: ${t.message}`)}}),window.addEventListener("resize",()=>{if(v){var t=p.clientWidth,e=p.clientHeight;v.resize(t,e,window.google.ima.ViewMode.NORMAL)}})}async function je(t,{async:e,crossorigin:n,timeout:s}={}){return new Promise(o=>{var r=!1;function a(){r=!0,o()}var i=document.createElement("script");i.src=t,e&&(i.async="true"),n&&(i.crossorigin=n),i.onload=a,i.onerror=a,document.head.appendChild(i),s&&setTimeout(()=>{r||(console.log(`AS/AP: script inject timeout: url=${t} timeout=${s}`),a())},s)})}async function qe(){window.location.hostname==="tv.acestream.org"&&await je("https://securepubads.g.doubleclick.net/tag/js/gpt.js",{async:!0,crossorigin:"anonymous",timeout:5e3})}async function Ie(){try{await qe(),Me(),Re()}catch(t){console.log(`AS/AP: Failed to init: ${t.message}`)}}Ie();export{J as W};
